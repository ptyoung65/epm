<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°ëª¨ í˜ì´ì§€ 1 - AIRIS ë‹¤ì¤‘ í˜ì´ì§€ ì„¸ì…˜ ì¶”ì </title>
    <!-- rrweb ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script src="https://cdn.jsdelivr.net/npm/rrweb@latest/dist/rrweb.min.js"></script>
    <!-- AIRIS ì„¸ì…˜ ì¶”ì ê¸° -->
    <script src="/airis-session-tracker.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem;
            margin: 0;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        .header {
            background: #2d3748;
            color: white;
            padding: 2rem;
            text-align: center;
        }
        
        .content {
            padding: 2rem;
        }
        
        .btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin: 0.5rem;
            text-decoration: none;
            display: inline-block;
            transition: all 0.2s;
        }
        
        .btn:hover {
            background: #3182ce;
            transform: translateY(-1px);
        }
        
        .btn-success { background: #48bb78; }
        .btn-danger { background: #e53e3e; }
        .btn-warning { background: #ed8936; }
        
        .status-box {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .form-group {
            margin: 1rem 0;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ  ë°ëª¨ í˜ì´ì§€ 1</h1>
            <p>AIRIS ë‹¤ì¤‘ í˜ì´ì§€ ì„¸ì…˜ ì¶”ì  í…ŒìŠ¤íŠ¸</p>
        </div>
        
        <div class="content">
            <div class="status-box">
                <h3>ğŸ“Š ì„¸ì…˜ ìƒíƒœ</h3>
                <div id="sessionStatus">ë¡œë”© ì¤‘...</div>
                <br>
                <button id="testBtn" class="btn" style="background: #ffa500;">ğŸ§ª í…ŒìŠ¤íŠ¸ ë²„íŠ¼</button>
                <button id="startBtn" class="btn btn-success">ğŸ”´ ê¸°ë¡ ì‹œì‘</button>
                <button id="stopBtn" class="btn btn-danger">â¹ï¸ ê¸°ë¡ ì¤‘ì§€</button>
                <button id="updateBtn" class="btn">ğŸ”„ ìƒíƒœ ì—…ë°ì´íŠ¸</button>
            </div>

            <div class="status-box">
                <h3>ğŸ§ª ìƒí˜¸ì‘ìš© í…ŒìŠ¤íŠ¸</h3>
                <div class="form-group">
                    <label>ì´ë¦„:</label>
                    <input type="text" id="nameInput" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
                </div>
                
                <div class="form-group">
                    <label>ì¹´í…Œê³ ë¦¬:</label>
                    <select id="categorySelect">
                        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="home">í™ˆí˜ì´ì§€</option>
                        <option value="product">ì œí’ˆ í˜ì´ì§€</option>
                        <option value="about">íšŒì‚¬ ì†Œê°œ</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>ë©”ëª¨:</label>
                    <textarea id="memoTextarea" rows="3" placeholder="ë©”ëª¨ë¥¼ ì‘ì„±í•˜ì„¸ìš”"></textarea>
                </div>
                
                <button id="randomBtn" class="btn">ğŸ² ëœë¤ ì•¡ì…˜</button>
                <button id="errorBtn" class="btn btn-warning">âš ï¸ ì˜¤ë¥˜ ë°œìƒ</button>
            </div>

            <div class="status-box">
                <h3>ğŸ”— í˜ì´ì§€ ì´ë™</h3>
                <p>ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ì—¬ ë‹¤ì¤‘ í˜ì´ì§€ ì¶”ì ì„ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”:</p>
                <a href="/demo-page-2.html" class="btn">ğŸ“„ í˜ì´ì§€ 2ë¡œ ì´ë™</a>
                <a href="/demo-page-3.html" class="btn">ğŸ“„ í˜ì´ì§€ 3ìœ¼ë¡œ ì´ë™</a>
                <a href="/test-session-replay.html" class="btn">ğŸ¬ ë©”ì¸ í…ŒìŠ¤íŠ¸ í˜ì´ì§€</a>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ì˜¤ë¥˜ ì²˜ë¦¬
        window.addEventListener('error', (e) => {
            console.error('ğŸš¨ JavaScript ì˜¤ë¥˜ ë°œìƒ:', e.error);
            console.error('ğŸš¨ ì˜¤ë¥˜ ìœ„ì¹˜:', e.filename, 'line', e.lineno, 'col', e.colno);
        });
        
        window.addEventListener('unhandledrejection', (e) => {
            console.error('ğŸš¨ Promise ì˜¤ë¥˜:', e.reason);
        });
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìƒíƒœ ì—…ë°ì´íŠ¸
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸ  ë°ëª¨ í˜ì´ì§€ 1 ë¡œë“œë¨');
            console.log('ğŸ” í˜ì´ì§€ ë¡œë“œ ì‹œì  - rrweb ìƒíƒœ:', typeof window.rrweb, window.rrweb);
            console.log('ğŸ” í˜ì´ì§€ ë¡œë“œ ì‹œì  - airisTracker ìƒíƒœ:', typeof window.airisTracker, window.airisTracker);
            
            // ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            const testBtn = document.getElementById('testBtn');
            const startBtn = document.getElementById('startBtn');
            const stopBtn = document.getElementById('stopBtn');
            const updateBtn = document.getElementById('updateBtn');
            const randomBtn = document.getElementById('randomBtn');
            const errorBtn = document.getElementById('errorBtn');
            
            console.log('ğŸ” ë²„íŠ¼ ìš”ì†Œë“¤ í™•ì¸:', {
                testBtn: !!testBtn,
                startBtn: !!startBtn,
                stopBtn: !!stopBtn,
                updateBtn: !!updateBtn,
                randomBtn: !!randomBtn,
                errorBtn: !!errorBtn
            });
            
            // í…ŒìŠ¤íŠ¸ ë²„íŠ¼ (ê¸°ë³¸ ë™ì‘ í™•ì¸)
            if (testBtn) {
                testBtn.addEventListener('click', () => {
                    console.log('âœ… í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ ì„±ê³µ!');
                    alert('ğŸ‰ JavaScript ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤!');
                });
            }
            
            if (startBtn) {
                startBtn.addEventListener('click', () => {
                    console.log('ğŸ” ì‹œì‘ ë²„íŠ¼ í´ë¦­ë¨!');
                    startTracking();
                });
            }
            
            if (stopBtn) {
                stopBtn.addEventListener('click', () => {
                    console.log('ğŸ” ì¤‘ì§€ ë²„íŠ¼ í´ë¦­ë¨!');
                    stopTracking();
                });
            }
            
            if (updateBtn) {
                updateBtn.addEventListener('click', () => {
                    console.log('ğŸ” ì—…ë°ì´íŠ¸ ë²„íŠ¼ í´ë¦­ë¨!');
                    updateStatus();
                });
            }
            
            if (randomBtn) {
                randomBtn.addEventListener('click', () => {
                    console.log('ğŸ” ëœë¤ ë²„íŠ¼ í´ë¦­ë¨!');
                    generateRandomActions();
                });
            }
            
            if (errorBtn) {
                errorBtn.addEventListener('click', () => {
                    console.log('ğŸ” ì˜¤ë¥˜ ë²„íŠ¼ í´ë¦­ë¨!');
                    simulateError();
                });
            }
            
            // ì¶”ì ê¸° ë¡œë”© ëŒ€ê¸°
            setTimeout(() => {
                console.log('ğŸ” 3ì´ˆ í›„ - rrweb ìƒíƒœ:', typeof window.rrweb, window.rrweb);
                console.log('ğŸ” 3ì´ˆ í›„ - airisTracker ìƒíƒœ:', typeof window.airisTracker, window.airisTracker);
                updateStatus();
            }, 3000);
            
            updateStatus();
            
            // ì…ë ¥ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.getElementById('nameInput').addEventListener('input', () => {
                console.log('ğŸ“ ì´ë¦„ ì…ë ¥:', document.getElementById('nameInput').value);
            });
            
            document.getElementById('categorySelect').addEventListener('change', () => {
                console.log('ğŸ“‹ ì¹´í…Œê³ ë¦¬ ì„ íƒ:', document.getElementById('categorySelect').value);
            });
            
            document.getElementById('memoTextarea').addEventListener('input', () => {
                console.log('ğŸ“ ë©”ëª¨ ì…ë ¥:', document.getElementById('memoTextarea').value.length, 'ê¸€ì');
            });
        });

        // ì¶”ì  ì‹œì‘
        function startTracking() {
            console.log('ğŸ” startTracking í•¨ìˆ˜ í˜¸ì¶œë¨');
            console.log('ğŸ” window.airisTracker ìƒíƒœ:', window.airisTracker);
            console.log('ğŸ” window.rrweb ìƒíƒœ:', window.rrweb);
            
            if (window.airisTracker) {
                console.log('ğŸ” AIRIS ì¶”ì ê¸° ë°œê²¬, start() ë©”ì„œë“œ í˜¸ì¶œ ì‹œë„');
                const result = window.airisTracker.start();
                console.log('ğŸ” start() ê²°ê³¼:', result);
                
                if (result) {
                    console.log('âœ… ì¶”ì  ì‹œì‘ë¨');
                    alert('ğŸ¬ ì„¸ì…˜ ê¸°ë¡ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!\në‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™í•´ë„ ê³„ì† ì¶”ì ë©ë‹ˆë‹¤.');
                } else {
                    console.log('âš ï¸ ì¶”ì  ì‹œì‘ ì‹¤íŒ¨');
                    alert('âš ï¸ ì¶”ì  ì‹œì‘ì— ì‹¤íŒ¨í–ˆê±°ë‚˜ ì´ë¯¸ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤.');
                }
                updateStatus();
            } else {
                console.log('âŒ AIRIS ì¶”ì ê¸°ê°€ ì—†ìŒ');
                console.log('ğŸ” ëª¨ë“  window í”„ë¡œí¼í‹°:', Object.keys(window).filter(key => key.includes('airis') || key.includes('AIRIS')));
                alert('âŒ AIRIS ì¶”ì ê¸°ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            }
        }

        // ì¶”ì  ì¤‘ì§€
        function stopTracking() {
            if (window.airisTracker) {
                const result = window.airisTracker.stop();
                if (result) {
                    console.log('â¹ï¸ ì¶”ì  ì¤‘ì§€ë¨');
                    alert('â¹ï¸ ì„¸ì…˜ ê¸°ë¡ì´ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.');
                } else {
                    alert('âš ï¸ ì¶”ì  ì¤‘ì§€ì— ì‹¤íŒ¨í–ˆê±°ë‚˜ ì§„í–‰ ì¤‘ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                }
                updateStatus();
            }
        }

        // ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateStatus() {
            const statusDiv = document.getElementById('sessionStatus');
            
            if (window.airisTracker) {
                const status = window.airisTracker.getStatus();
                statusDiv.innerHTML = `
                    <strong>ì„¸ì…˜ ID:</strong> ${status.sessionId}<br>
                    <strong>ê¸°ë¡ ìƒíƒœ:</strong> ${status.isRecording ? 'ğŸ”´ ê¸°ë¡ ì¤‘' : 'â¸ï¸ ì¤‘ì§€ë¨'}<br>
                    <strong>ì‹œì‘ ì‹œê°„:</strong> ${status.startTime ? status.startTime.toLocaleString() : 'N/A'}<br>
                    <strong>ì´ë²¤íŠ¸ ìˆ˜:</strong> ${status.eventCount}<br>
                    <strong>ë²„í¼ í¬ê¸°:</strong> ${status.bufferSize}<br>
                    <strong>í˜„ì¬ í˜ì´ì§€:</strong> ë°ëª¨ í˜ì´ì§€ 1
                `;
            } else {
                statusDiv.innerHTML = 'âŒ AIRIS ì¶”ì ê¸°ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
            }
        }

        // ëœë¤ ì•¡ì…˜ ìƒì„±
        function generateRandomActions() {
            const nameInput = document.getElementById('nameInput');
            const categorySelect = document.getElementById('categorySelect');
            const memoTextarea = document.getElementById('memoTextarea');
            
            // ëœë¤ ë°ì´í„° ìƒì„±
            const names = ['ê¹€ì² ìˆ˜', 'ì´ì˜í¬', 'ë°•ë¯¼ìˆ˜', 'ìµœì§€ì˜', 'ì •íƒœë¯¼'];
            const categories = ['home', 'product', 'about'];
            const memos = ['í…ŒìŠ¤íŠ¸ ë©”ëª¨ì…ë‹ˆë‹¤.', 'ì´ê²ƒì€ ìƒ˜í”Œ í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤.', 'ëœë¤ìœ¼ë¡œ ìƒì„±ëœ ë‚´ìš©ì…ë‹ˆë‹¤.'];
            
            nameInput.value = names[Math.floor(Math.random() * names.length)];
            categorySelect.value = categories[Math.floor(Math.random() * categories.length)];
            memoTextarea.value = memos[Math.floor(Math.random() * memos.length)];
            
            // ì´ë²¤íŠ¸ íŠ¸ë¦¬ê±°
            nameInput.dispatchEvent(new Event('input'));
            categorySelect.dispatchEvent(new Event('change'));
            memoTextarea.dispatchEvent(new Event('input'));
            
            console.log('ğŸ² ëœë¤ ì•¡ì…˜ ì‹¤í–‰ë¨');
        }

        // ì˜¤ë¥˜ ì‹œë®¬ë ˆì´ì…˜
        function simulateError() {
            console.error('âš ï¸ ì‹œë®¬ë ˆì´ì…˜ëœ ì˜¤ë¥˜:', new Error('ë°ëª¨ í˜ì´ì§€ 1ì—ì„œ ë°œìƒí•œ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜'));
            alert('âš ï¸ ì‹œë®¬ë ˆì´ì…˜ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤ (ì½˜ì†” í™•ì¸)');
        }

        // ì£¼ê¸°ì ìœ¼ë¡œ ìƒíƒœ ì—…ë°ì´íŠ¸
        setInterval(updateStatus, 5000);
    </script>
</body>
</html>