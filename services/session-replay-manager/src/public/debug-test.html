<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë””ë²„ê·¸ í…ŒìŠ¤íŠ¸</title>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { margin: 10px; padding: 10px 20px; font-size: 16px; cursor: pointer; }
        .btn-success { background: #28a745; color: white; border: none; }
        .btn-warning { background: #ffc107; color: black; border: none; }
        .btn-danger { background: #dc3545; color: white; border: none; }
        #log { margin-top: 20px; padding: 10px; background: #f8f9fa; border: 1px solid #dee2e6; height: 300px; overflow-y: auto; }
        .status { margin: 10px 0; font-weight: bold; }
    </style>
</head>
<body>
    <h1>ì„¸ì…˜ ë¦¬í”Œë ˆì´ ë””ë²„ê·¸ í…ŒìŠ¤íŠ¸</h1>
    
    <div class="status">
        ìƒíƒœ: <span id="status">ì¤€ë¹„ë¨</span>
    </div>
    
    <div class="status">
        ì„¸ì…˜ ID: <span id="sessionId">ìƒì„±ì¤‘...</span>
    </div>
    
    <div>
        <button id="startBtn" class="btn-success">ğŸ”´ ê¸°ë¡ ì‹œì‘</button>
        <button id="pauseBtn" class="btn-warning">â¸ï¸ ê¸°ë¡ ì¼ì‹œì •ì§€</button>
        <button id="stopBtn" class="btn-danger">â¹ï¸ ê¸°ë¡ ì¤‘ì§€</button>
        <button id="testBtn">ğŸ“Š í…ŒìŠ¤íŠ¸ ë²„íŠ¼</button>
    </div>
    
    <div id="log"></div>
    
    <script>
        // ì „ì—­ ë³€ìˆ˜
        let sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        let isRecording = false;
        let startTime = null;
        
        // ë¡œê·¸ í•¨ìˆ˜
        function addLog(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(`[${timestamp}] ${message}`);
        }
        
        // ê¸°ë¡ ì‹œì‘
        function startRecording() {
            console.log('startRecording() í˜¸ì¶œë¨');
            addLog('ğŸ”´ ê¸°ë¡ ì‹œì‘ í•¨ìˆ˜ í˜¸ì¶œë¨');
            
            if (isRecording) {
                addLog('âš ï¸ ì´ë¯¸ ê¸°ë¡ ì¤‘ì…ë‹ˆë‹¤');
                return;
            }
            
            isRecording = true;
            startTime = new Date();
            document.getElementById('status').textContent = 'ê¸°ë¡ ì¤‘';
            
            addLog('âœ… ê¸°ë¡ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤');
        }
        
        // ê¸°ë¡ ì¼ì‹œì •ì§€
        function pauseRecording() {
            console.log('pauseRecording() í˜¸ì¶œë¨');
            addLog('â¸ï¸ ì¼ì‹œì •ì§€ í•¨ìˆ˜ í˜¸ì¶œë¨');
            
            if (!isRecording) {
                addLog('âš ï¸ ê¸°ë¡ì´ ì§„í–‰ ì¤‘ì´ ì•„ë‹™ë‹ˆë‹¤');
                return;
            }
            
            isRecording = false;
            document.getElementById('status').textContent = 'ì¼ì‹œì •ì§€ë¨';
            addLog('âœ… ê¸°ë¡ì´ ì¼ì‹œì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤');
        }
        
        // ê¸°ë¡ ì¤‘ì§€
        function stopRecording() {
            console.log('stopRecording() í˜¸ì¶œë¨');
            addLog('â¹ï¸ ì¤‘ì§€ í•¨ìˆ˜ í˜¸ì¶œë¨');
            
            isRecording = false;
            const duration = startTime ? Math.floor((new Date() - startTime) / 1000) : 0;
            document.getElementById('status').textContent = 'ì¤‘ì§€ë¨';
            addLog(`âœ… ê¸°ë¡ì´ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤ (${duration}ì´ˆ)`);
        }
        
        // í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function testFunction() {
            console.log('testFunction() í˜¸ì¶œë¨');
            addLog('ğŸ“Š í…ŒìŠ¤íŠ¸ ë²„íŠ¼ì´ í´ë¦­ë˜ì—ˆìŠµë‹ˆë‹¤!');
            addLog('í˜„ì¬ ìƒíƒœ: ' + (isRecording ? 'ê¸°ë¡ ì¤‘' : 'ì¤‘ì§€ë¨'));
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
        window.onload = function() {
            console.log('=== í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ===');
            addLog('ğŸš€ í˜ì´ì§€ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤');
            
            // ì„¸ì…˜ ID ì„¤ì •
            document.getElementById('sessionId').textContent = sessionId;
            addLog('ì„¸ì…˜ ID: ' + sessionId);
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • (onclick ëŒ€ì‹  addEventListener ì‚¬ìš©)
            document.getElementById('startBtn').addEventListener('click', startRecording);
            document.getElementById('pauseBtn').addEventListener('click', pauseRecording);
            document.getElementById('stopBtn').addEventListener('click', stopRecording);
            document.getElementById('testBtn').addEventListener('click', testFunction);
            
            // í•¨ìˆ˜ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
            addLog('startRecording í•¨ìˆ˜: ' + (typeof startRecording === 'function' ? 'ì¡´ì¬' : 'ì—†ìŒ'));
            addLog('pauseRecording í•¨ìˆ˜: ' + (typeof pauseRecording === 'function' ? 'ì¡´ì¬' : 'ì—†ìŒ'));
            addLog('stopRecording í•¨ìˆ˜: ' + (typeof stopRecording === 'function' ? 'ì¡´ì¬' : 'ì—†ìŒ'));
            
            addLog('âœ… ì´ˆê¸°í™” ì™„ë£Œ');
            console.log('=== ì´ˆê¸°í™” ì™„ë£Œ ===');
        };
        
        // ì „ì—­ì— í•¨ìˆ˜ ë…¸ì¶œ (ì½˜ì†”ì—ì„œ ì§ì ‘ í˜¸ì¶œ ê°€ëŠ¥)
        window.startRecording = startRecording;
        window.pauseRecording = pauseRecording;
        window.stopRecording = stopRecording;
        window.testFunction = testFunction;
    </script>
</body>
</html>