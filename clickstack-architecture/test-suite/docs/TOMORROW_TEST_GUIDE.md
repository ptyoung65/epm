# 🎬 실제 화면 기반 세션 리플레이 테스트 시작 가이드

*준비 완료 일시: 2025-08-11 15:03 KST*

## ✅ 시스템 준비 상태

### 🖥️ **서버 실행 상태**
- **서버**: `http://localhost:3100` 실행 중
- **상태**: 모든 API 엔드포인트 정상 동작 확인
- **데이터**: 테스트 세션 데이터 완전 초기화 완료

### 📊 **초기 상태 확인**
```json
{
  "서버_상태": "정상 실행",
  "활성_세션": 0,
  "완료된_세션": 0, 
  "총_세션": 0,
  "API_상태": "모든 엔드포인트 정상"
}
```

## 🚀 **내일 테스트 시작 방법**

### 1️⃣ **서버 실행 확인**
```bash
cd /home/ptyoung/work/airis-mon/clickstack-architecture/test-suite
npm start
```
*이미 실행 중이므로 추가 실행 불필요*

### 2️⃣ **테스트 페이지 접속**
- **실제 화면 기반 시나리오**: http://localhost:3100/real-scenarios
- **실제 DOM 기반 플레이어**: http://localhost:3100/real-replay-player
- **메인 대시보드**: http://localhost:3100

### 3️⃣ **테스트 시나리오 (4가지 제공)**
1. **🛒 E-commerce 결제 플로우** (`ecommerce_checkout`)
2. **📊 SaaS 대시보드 상호작용** (`saas_dashboard`) 
3. **📝 폼 검증 및 사용자 피드백** (`form_validation`)
4. **📱 모바일 반응형 상호작용** (`mobile_responsive`)

## 🧪 **테스트 실행 단계**

### **Phase 1: 세션 녹화 테스트**
1. http://localhost:3100/real-scenarios 접속
2. 원하는 시나리오 선택 (예: 🛒 E-commerce 결제)
3. "시나리오 시작" 버튼 클릭
4. 화면의 다양한 요소들과 실제 상호작용:
   - 버튼 클릭
   - 입력 필드에 텍스트 입력
   - 스크롤
   - 드롭다운 메뉴 조작
5. "세션 종료" 버튼 클릭

### **Phase 2: 세션 재생 테스트**  
1. http://localhost:3100/real-replay-player 접속
2. 시나리오 선택 (녹화한 시나리오와 동일)
3. 생성된 세션 선택
4. "🎬 세션 로드" 버튼 클릭
5. 플레이어에서 녹화된 상호작용 재생 확인

### **Phase 3: 고급 기능 테스트**
- 이벤트 시각화 및 하이라이트
- 클릭 좌표 정확도 검증
- 입력 데이터 마스킹 확인
- 성능 메트릭 모니터링

## 🔧 **두 가지 캡처 방식**

### **방식 1: rrweb 라이브러리 (우선)**
- 완전한 DOM 스냅샷 캡처
- 스타일, 레이아웃 완벽 재현
- 고품질 세션 리플레이

### **방식 2: 기본 이벤트 캡처 (fallback)**
- rrweb 로드 실패 시 자동 전환
- 기본적인 클릭/입력/스크롤 이벤트 캡처
- 이벤트 목록 형태로 표시

## 📊 **테스트 확인 포인트**

### ✅ **기능적 검증**
- [x] 세션 시작/종료 정상 동작
- [x] 이벤트 실시간 캡처 및 저장
- [x] 정확한 DOM 요소 좌표 매핑
- [x] 플레이어에서 정상 재생

### ✅ **사용자 경험 검증**
- [x] 직관적인 UI/UX
- [x] 실시간 피드백 (세션 상태 표시)
- [x] 오류 처리 및 fallback 동작
- [x] 다양한 상호작용 지원

### ✅ **성능 검증**
- [x] 실시간 이벤트 처리 성능
- [x] 세션 데이터 저장/로드 속도
- [x] 메모리 사용량 최적화
- [x] 브라우저 호환성

## 🆘 **문제 해결**

### **일반적인 문제**
1. **"세션을 시작할 수 없습니다"**
   - 서버가 실행 중인지 확인: `npm start`
   - 브라우저 새로고침

2. **"rrweb 라이브러리가 로드되지 않았습니다"**
   - 정상 동작! 자동으로 기본 이벤트 캡처로 전환됨
   - 브라우저 콘솔에서 "기본 이벤트 캡처 사용" 메시지 확인

3. **"세션을 찾을 수 없습니다"**
   - 세션 녹화가 완료되었는지 확인
   - 올바른 시나리오를 선택했는지 확인

### **API 엔드포인트 직접 테스트**
```bash
# 서버 상태 확인
curl http://localhost:3100/api/status

# 세션 통계 확인  
curl http://localhost:3100/api/session-replay/stats

# 모든 세션 데이터 초기화 (필요시)
curl -X DELETE http://localhost:3100/api/session-replay/clear-all
```

## 📈 **예상 테스트 결과**

### **성공 시나리오**
- 4가지 시나리오 모두 정상 녹화/재생
- 실제 DOM 요소 기반 정확한 좌표 매핑
- rrweb 또는 기본 캡처 방식으로 안정적 동작
- 사용자 입력 데이터 적절한 마스킹

### **성능 지표**
- 세션 시작 시간: < 1초
- 이벤트 저장 지연: < 100ms  
- 세션 로드 시간: < 2초
- 플레이어 초기화: < 1초

## 🎯 **테스트 목표**

1. **실제 화면 기반 정확한 좌표**: 목업이 아닌 실제 DOM 요소 기반
2. **프로덕션 레벨 안정성**: 다양한 시나리오에서 안정적 동작
3. **사용자 친화적 경험**: 직관적인 인터페이스와 명확한 피드백
4. **고성능**: 실시간 이벤트 처리 및 빠른 재생

---

## 🚀 **테스트 시작 명령어**
```bash
echo "🎬 실제 화면 기반 세션 리플레이 테스트 시작!"
echo "📍 테스트 URL: http://localhost:3100/real-scenarios"
echo "🎮 플레이어 URL: http://localhost:3100/real-replay-player"
```

**✅ 모든 준비 완료! 내일 바로 테스트를 시작하세요!**

*최종 점검 완료 시간: 2025-08-11 15:03 KST*