<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alert Management - AIRIS-MON í†µí•© ì•Œë¦¼ ê´€ë¦¬</title>
    <script src="/components/common-layout.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left h1 {
            color: #333;
            font-size: 32px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 700;
        }

        .header-left h1 .icon {
            font-size: 36px;
        }

        .subtitle {
            color: #666;
            font-size: 16px;
            font-weight: 500;
        }

        .header-right {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .status-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
        }

        .status-active {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        /* Alert Overview Cards */
        .alert-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 35px;
        }

        .overview-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .overview-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--accent-color);
        }

        .overview-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .overview-card.critical {
            --accent-color: #ef4444;
        }

        .overview-card.warning {
            --accent-color: #f59e0b;
        }

        .overview-card.info {
            --accent-color: #3b82f6;
        }

        .overview-card.success {
            --accent-color: #10b981;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-icon {
            font-size: 28px;
        }

        .card-value {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--accent-color);
        }

        .card-label {
            color: #666;
            font-size: 14px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .card-trend {
            font-size: 12px;
            color: #10b981;
            display: flex;
            align-items: center;
            gap: 4px;
            margin-top: 8px;
        }

        /* Main Content Grid */
        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .content-section {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f1f5f9;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* Alert List */
        .alert-item {
            display: flex;
            align-items: center;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            background: #f8fafc;
        }

        .alert-item:hover {
            background: #f1f5f9;
            transform: translateX(5px);
        }

        .alert-item.critical {
            border-left-color: #ef4444;
            background: #fef2f2;
        }

        .alert-item.warning {
            border-left-color: #f59e0b;
            background: #fefbeb;
        }

        .alert-item.info {
            border-left-color: #3b82f6;
            background: #eff6ff;
        }

        .alert-item.resolved {
            border-left-color: #10b981;
            background: #f0fdf4;
            opacity: 0.7;
        }

        .alert-icon {
            font-size: 24px;
            margin-right: 15px;
            width: 40px;
            text-align: center;
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 5px;
            color: #333;
        }

        .alert-description {
            color: #666;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .alert-meta {
            display: flex;
            gap: 20px;
            font-size: 12px;
            color: #888;
        }

        .alert-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .btn-resolve {
            background: #10b981;
            color: white;
        }

        .btn-escalate {
            background: #f59e0b;
            color: white;
        }

        .btn-ignore {
            background: #6b7280;
            color: white;
        }

        .btn-send {
            background: #3b82f6;
            color: white;
        }

        /* Quick Actions Panel */
        .quick-actions {
            display: grid;
            gap: 15px;
        }

        .action-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .action-card:hover {
            background: #f1f5f9;
            border-color: #3b82f6;
            transform: translateY(-2px);
        }

        .action-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .action-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
        }

        .action-description {
            font-size: 12px;
            color: #666;
        }

        /* Filter and Search */
        .filter-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 200px;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .filter-select {
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 35px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3);
            animation: slideInUp 0.3s ease;
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f1f5f9;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 32px;
            cursor: pointer;
            color: #666;
            padding: 5px;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: #f3f4f6;
            color: #333;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
            font-size: 14px;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e5e7eb;
        }

        .btn-cancel {
            background: #f3f4f6;
            color: #4b5563;
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-cancel:hover {
            background: #e5e7eb;
        }

        .btn-save {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-save:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        .toggle-switch {
            position: relative;
            width: 55px;
            height: 28px;
            background: #e5e7eb;
            border-radius: 28px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch.active {
            background: #3b82f6;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .toggle-switch.active::after {
            left: 29px;
        }

        .config-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .config-item:hover {
            background: #f9fafb;
            border-color: #3b82f6;
        }

        .floating-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .floating-button:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px rgba(59, 130, 246, 0.4);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .alert-overview {
                grid-template-columns: 1fr;
            }

            .filter-bar {
                flex-direction: column;
            }

            .search-input {
                min-width: 100%;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .modal-content {
                width: 95%;
                padding: 25px;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideInUp {
            from { 
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .notification-settings {
            display: grid;
            gap: 20px;
            margin-top: 20px;
        }

        .provider-card {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .provider-card.active {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        .provider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .provider-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="airis-content-wrapper">
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <h1>
                    <span class="icon">ğŸš¨</span>
                    Alert Management
                </h1>
                <p class="subtitle">í†µí•© ì•Œë¦¼ ê´€ë¦¬ ë° ëŒ€ì‘ ì‹œìŠ¤í…œ</p>
            </div>
            <div class="header-right">
                <div class="status-badge status-active">
                    <span>â—</span> ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ í™œì„±
                </div>
                <button class="btn btn-primary" onclick="openNotificationSettings()">
                    âš™ï¸ ì•Œë¦¼ ì„¤ì •
                </button>
                <button class="btn btn-success" onclick="refreshAlerts()">
                    ğŸ”„ ìƒˆë¡œê³ ì¹¨
                </button>
            </div>
        </div>

        <!-- Alert Overview -->
        <div class="alert-overview">
            <div class="overview-card critical">
                <div class="card-header">
                    <div class="card-icon">ğŸ”¥</div>
                </div>
                <div class="card-value" id="criticalCount">3</div>
                <div class="card-label">ìœ„í—˜ ì•Œë¦¼</div>
                <div class="card-trend">
                    <span>ğŸ“ˆ</span> +2 ì§€ë‚œ ì‹œê°„
                </div>
            </div>

            <div class="overview-card warning">
                <div class="card-header">
                    <div class="card-icon">âš ï¸</div>
                </div>
                <div class="card-value" id="warningCount">8</div>
                <div class="card-label">ê²½ê³  ì•Œë¦¼</div>
                <div class="card-trend">
                    <span>ğŸ“Š</span> +5 ì§€ë‚œ ì‹œê°„
                </div>
            </div>

            <div class="overview-card info">
                <div class="card-header">
                    <div class="card-icon">â„¹ï¸</div>
                </div>
                <div class="card-value" id="infoCount">12</div>
                <div class="card-label">ì •ë³´ ì•Œë¦¼</div>
                <div class="card-trend">
                    <span>ğŸ“‰</span> -3 ì§€ë‚œ ì‹œê°„
                </div>
            </div>

            <div class="overview-card success">
                <div class="card-header">
                    <div class="card-icon">âœ…</div>
                </div>
                <div class="card-value" id="resolvedCount">47</div>
                <div class="card-label">í•´ê²°ëœ ì•Œë¦¼</div>
                <div class="card-trend">
                    <span>ğŸ¯</span> ì˜¤ëŠ˜ ì´ í•´ê²°
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Alert List -->
            <div class="content-section">
                <div class="section-header">
                    <h3 class="section-title">
                        <span>ğŸ“‹</span>
                        ì‹¤ì‹œê°„ ì•Œë¦¼ ëª©ë¡
                    </h3>
                    <div>
                        <button class="btn btn-warning btn-small" onclick="bulkAction('escalate')">
                            ğŸ“¢ ì¼ê´„ ì—ìŠ¤ì»¬ë ˆì´ì…˜
                        </button>
                        <button class="btn btn-success btn-small" onclick="bulkAction('resolve')">
                            âœ… ì¼ê´„ í•´ê²°
                        </button>
                    </div>
                </div>

                <!-- Filter Bar -->
                <div class="filter-bar">
                    <input type="text" class="search-input" placeholder="ì•Œë¦¼ ê²€ìƒ‰..." id="alertSearch" onkeyup="filterAlerts()">
                    <select class="filter-select" id="severityFilter" onchange="filterAlerts()">
                        <option value="">ëª¨ë“  ì‹¬ê°ë„</option>
                        <option value="critical">ìœ„í—˜</option>
                        <option value="warning">ê²½ê³ </option>
                        <option value="info">ì •ë³´</option>
                    </select>
                    <select class="filter-select" id="statusFilter" onchange="filterAlerts()">
                        <option value="">ëª¨ë“  ìƒíƒœ</option>
                        <option value="active">í™œì„±</option>
                        <option value="resolved">í•´ê²°ë¨</option>
                        <option value="ignored">ë¬´ì‹œë¨</option>
                    </select>
                </div>

                <!-- Alert Items -->
                <div id="alertList">
                    <!-- Alerts will be populated here -->
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="content-section">
                <div class="section-header">
                    <h3 class="section-title">
                        <span>âš¡</span>
                        ë¹ ë¥¸ ì‘ì—…
                    </h3>
                </div>

                <div class="quick-actions">
                    <div class="action-card" onclick="openCreateAlert()">
                        <div class="action-icon">â•</div>
                        <div class="action-title">ìˆ˜ë™ ì•Œë¦¼ ìƒì„±</div>
                        <div class="action-description">ì‚¬ìš©ì ì •ì˜ ì•Œë¦¼ì„ ìƒì„±í•©ë‹ˆë‹¤</div>
                    </div>

                    <div class="action-card" onclick="openNotificationSettings()">
                        <div class="action-icon">ğŸ“§</div>
                        <div class="action-title">ë©”ì¼/SMS ì„¤ì •</div>
                        <div class="action-description">ì•Œë¦¼ ì „ì†¡ ë°©ë²•ì„ ì„¤ì •í•©ë‹ˆë‹¤</div>
                    </div>

                    <div class="action-card" onclick="openEscalationRules()">
                        <div class="action-icon">ğŸ“ˆ</div>
                        <div class="action-title">ì—ìŠ¤ì»¬ë ˆì´ì…˜ ê·œì¹™</div>
                        <div class="action-description">ì•Œë¦¼ ì—ìŠ¤ì»¬ë ˆì´ì…˜ ê·œì¹™ì„ ê´€ë¦¬í•©ë‹ˆë‹¤</div>
                    </div>

                    <div class="action-card" onclick="openAlertTemplates()">
                        <div class="action-icon">ğŸ“</div>
                        <div class="action-title">ì•Œë¦¼ í…œí”Œë¦¿</div>
                        <div class="action-description">ì•Œë¦¼ ë©”ì‹œì§€ í…œí”Œë¦¿ì„ ê´€ë¦¬í•©ë‹ˆë‹¤</div>
                    </div>

                    <div class="action-card" onclick="viewAlertHistory()">
                        <div class="action-icon">ğŸ“Š</div>
                        <div class="action-title">ì•Œë¦¼ íˆìŠ¤í† ë¦¬</div>
                        <div class="action-description">ê³¼ê±° ì•Œë¦¼ ê¸°ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤</div>
                    </div>

                    <div class="action-card" onclick="openMaintenanceMode()">
                        <div class="action-icon">ğŸ”§</div>
                        <div class="action-title">ì ê²€ ëª¨ë“œ</div>
                        <div class="action-description">ì‹œìŠ¤í…œ ì ê²€ ì¤‘ ì•Œë¦¼ì„ ì¼ì‹œ ì¤‘ë‹¨</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <button class="floating-button" onclick="openQuickResponse()" title="ë¹ ë¥¸ ëŒ€ì‘">
        âš¡
    </button>

    <!-- Modals -->
    <!-- Create Alert Modal -->
    <div id="createAlertModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span>â•</span>
                    ìˆ˜ë™ ì•Œë¦¼ ìƒì„±
                </h3>
                <button class="close-btn" onclick="closeModal('createAlertModal')">&times;</button>
            </div>
            
            <form id="createAlertForm">
                <div class="form-group">
                    <label class="form-label">ì•Œë¦¼ ì œëª©</label>
                    <input type="text" class="form-input" id="alertTitle" placeholder="ì•Œë¦¼ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ì•Œë¦¼ ë‚´ìš©</label>
                    <textarea class="form-textarea" id="alertDescription" placeholder="ìƒì„¸í•œ ì•Œë¦¼ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">ì‹¬ê°ë„</label>
                        <select class="form-select" id="alertSeverity" required>
                            <option value="info">ì •ë³´</option>
                            <option value="warning">ê²½ê³ </option>
                            <option value="critical">ìœ„í—˜</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì†ŒìŠ¤</label>
                        <select class="form-select" id="alertSource" required>
                            <option value="manual">ìˆ˜ë™</option>
                            <option value="database">ë°ì´í„°ë² ì´ìŠ¤</option>
                            <option value="application">ì• í”Œë¦¬ì¼€ì´ì…˜</option>
                            <option value="infrastructure">ì¸í”„ë¼</option>
                            <option value="network">ë„¤íŠ¸ì›Œí¬</option>
                            <option value="security">ë³´ì•ˆ</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">ë‹´ë‹¹ì</label>
                        <select class="form-select" id="alertAssignee">
                            <option value="">ë¯¸í• ë‹¹</option>
                            <option value="admin">ê´€ë¦¬ì</option>
                            <option value="devops">DevOps</option>
                            <option value="developer">ê°œë°œì</option>
                            <option value="security">ë³´ì•ˆíŒ€</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì˜í–¥ë°›ëŠ” ì‹œìŠ¤í…œ</label>
                        <input type="text" class="form-input" id="alertAffected" placeholder="ì˜ˆ: database, api (ì‰¼í‘œë¡œ êµ¬ë¶„)">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ì¦‰ì‹œ ì•Œë¦¼ ì „ì†¡</label>
                    <div style="display: flex; gap: 10px; align-items: center; margin-top: 8px;">
                        <label><input type="checkbox" id="notifyEmail"> ì´ë©”ì¼</label>
                        <label><input type="checkbox" id="notifySMS"> SMS</label>
                        <label><input type="checkbox" id="notifySlack"> Slack</label>
                        <label><input type="checkbox" id="notifyTeams"> Teams</label>
                    </div>
                </div>
            </form>
            
            <div class="modal-actions">
                <button class="btn-cancel" onclick="closeModal('createAlertModal')">ì·¨ì†Œ</button>
                <button class="btn-save" onclick="createNewAlert()">ì•Œë¦¼ ìƒì„±</button>
            </div>
        </div>
    </div>

    <!-- Alert History Modal -->
    <div id="alertHistoryModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span>ğŸ“Š</span>
                    ì•Œë¦¼ íˆìŠ¤í† ë¦¬
                </h3>
                <button class="close-btn" onclick="closeModal('alertHistoryModal')">&times;</button>
            </div>
            
            <div class="filter-bar" style="margin-bottom: 20px;">
                <input type="date" class="form-input" id="historyStartDate" style="flex: none; width: 160px;">
                <input type="date" class="form-input" id="historyEndDate" style="flex: none; width: 160px;">
                <select class="filter-select" id="historySeverityFilter">
                    <option value="">ëª¨ë“  ì‹¬ê°ë„</option>
                    <option value="critical">ìœ„í—˜</option>
                    <option value="warning">ê²½ê³ </option>
                    <option value="info">ì •ë³´</option>
                </select>
                <button class="btn btn-primary btn-small" onclick="loadAlertHistory()">ğŸ” ì¡°íšŒ</button>
            </div>
            
            <div id="alertHistoryList" style="max-height: 400px; overflow-y: auto;">
                <!-- History will be populated here -->
            </div>
            
            <div class="modal-actions">
                <button class="btn-cancel" onclick="closeModal('alertHistoryModal')">ë‹«ê¸°</button>
                <button class="btn btn-primary" onclick="exportAlertHistory()">ğŸ“¥ ë‚´ë³´ë‚´ê¸°</button>
            </div>
        </div>
    </div>

    <!-- Escalation Rules Modal -->
    <div id="escalationRulesModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span>ğŸ“ˆ</span>
                    ì—ìŠ¤ì»¬ë ˆì´ì…˜ ê·œì¹™ ê´€ë¦¬
                </h3>
                <button class="close-btn" onclick="closeModal('escalationRulesModal')">&times;</button>
            </div>
            
            <div id="escalationRulesList">
                <!-- Rules will be populated here -->
            </div>
            
            <div class="modal-actions">
                <button class="btn-cancel" onclick="closeModal('escalationRulesModal')">ë‹«ê¸°</button>
                <button class="btn btn-primary" onclick="addEscalationRule()">â• ìƒˆ ê·œì¹™ ì¶”ê°€</button>
            </div>
        </div>
    </div>

    <!-- Add Escalation Rule Modal -->
    <div id="addEscalationRuleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span>â•</span>
                    ì—ìŠ¤ì»¬ë ˆì´ì…˜ ê·œì¹™ ì¶”ê°€
                </h3>
                <button class="close-btn" onclick="closeModal('addEscalationRuleModal')">&times;</button>
            </div>
            
            <form id="escalationRuleForm">
                <div class="form-group">
                    <label class="form-label">ê·œì¹™ ì´ë¦„</label>
                    <input type="text" class="form-input" id="ruleName" placeholder="ì˜ˆ: ìœ„í—˜ ì•Œë¦¼ ì¦‰ì‹œ ì—ìŠ¤ì»¬ë ˆì´ì…˜" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">ëŒ€ìƒ ì‹¬ê°ë„</label>
                        <select class="form-select" id="ruleSeverity" required>
                            <option value="critical">ìœ„í—˜</option>
                            <option value="warning">ê²½ê³ </option>
                            <option value="info">ì •ë³´</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì—ìŠ¤ì»¬ë ˆì´ì…˜ ì§€ì—° ì‹œê°„</label>
                        <select class="form-select" id="ruleDelay" required>
                            <option value="0">ì¦‰ì‹œ</option>
                            <option value="300">5ë¶„</option>
                            <option value="900">15ë¶„</option>
                            <option value="1800">30ë¶„</option>
                            <option value="3600">1ì‹œê°„</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ì•Œë¦¼ ì±„ë„</label>
                    <div style="display: flex; gap: 15px; margin-top: 8px;">
                        <label><input type="checkbox" id="ruleEmail"> ì´ë©”ì¼</label>
                        <label><input type="checkbox" id="ruleSMS"> SMS</label>
                        <label><input type="checkbox" id="ruleSlack"> Slack</label>
                        <label><input type="checkbox" id="ruleTeams"> Teams</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ìˆ˜ì‹ ì ëª©ë¡</label>
                    <textarea class="form-textarea" id="ruleRecipients" placeholder="ì´ë©”ì¼ ì£¼ì†Œë‚˜ ì „í™”ë²ˆí˜¸ë¥¼ ì¤„ë³„ë¡œ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                </div>
            </form>
            
            <div class="modal-actions">
                <button class="btn-cancel" onclick="closeModal('addEscalationRuleModal')">ì·¨ì†Œ</button>
                <button class="btn-save" onclick="saveEscalationRule()">ê·œì¹™ ì €ì¥</button>
            </div>
        </div>
    </div>

    <!-- Alert Templates Modal -->
    <div id="alertTemplatesModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span>ğŸ“</span>
                    ì•Œë¦¼ í…œí”Œë¦¿ ê´€ë¦¬
                </h3>
                <button class="close-btn" onclick="closeModal('alertTemplatesModal')">&times;</button>
            </div>
            
            <div id="alertTemplatesList">
                <!-- Templates will be populated here -->
            </div>
            
            <div class="modal-actions">
                <button class="btn-cancel" onclick="closeModal('alertTemplatesModal')">ë‹«ê¸°</button>
                <button class="btn btn-primary" onclick="addAlertTemplate()">â• ìƒˆ í…œí”Œë¦¿ ì¶”ê°€</button>
            </div>
        </div>
    </div>

    <!-- Add Template Modal -->
    <div id="addTemplateModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span>â•</span>
                    ì•Œë¦¼ í…œí”Œë¦¿ ì¶”ê°€
                </h3>
                <button class="close-btn" onclick="closeModal('addTemplateModal')">&times;</button>
            </div>
            
            <form id="templateForm">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">í…œí”Œë¦¿ ì´ë¦„</label>
                        <input type="text" class="form-input" id="templateName" placeholder="ì˜ˆ: ìœ„í—˜ ì•Œë¦¼ í…œí”Œë¦¿" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">í…œí”Œë¦¿ íƒ€ì…</label>
                        <select class="form-select" id="templateType" required>
                            <option value="critical">ìœ„í—˜</option>
                            <option value="warning">ê²½ê³ </option>
                            <option value="info">ì •ë³´</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ì œëª© í…œí”Œë¦¿</label>
                    <input type="text" class="form-input" id="templateSubject" placeholder="[{{severity}}] {{title}}" required>
                    <small style="color: #666; font-size: 12px;">ì‚¬ìš© ê°€ëŠ¥í•œ ë³€ìˆ˜: {{title}}, {{severity}}, {{source}}, {{timestamp}}</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ë³¸ë¬¸ í…œí”Œë¦¿</label>
                    <textarea class="form-textarea" id="templateBody" placeholder="ì•Œë¦¼ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\n\nì œëª©: {{title}}\në‚´ìš©: {{description}}\nì‹œê°„: {{timestamp}}" required></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ì‚¬ìš© ì±„ë„</label>
                    <div style="display: flex; gap: 15px; margin-top: 8px;">
                        <label><input type="checkbox" id="templateEmail" checked> ì´ë©”ì¼</label>
                        <label><input type="checkbox" id="templateSMS"> SMS</label>
                        <label><input type="checkbox" id="templateSlack"> Slack</label>
                        <label><input type="checkbox" id="templateTeams"> Teams</label>
                    </div>
                </div>
            </form>
            
            <div class="modal-actions">
                <button class="btn-cancel" onclick="closeModal('addTemplateModal')">ì·¨ì†Œ</button>
                <button class="btn-save" onclick="saveAlertTemplate()">í…œí”Œë¦¿ ì €ì¥</button>
            </div>
        </div>
    </div>

    <!-- Maintenance Mode Modal -->
    <div id="maintenanceModeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span>ğŸ”§</span>
                    ì ê²€ ëª¨ë“œ ì„¤ì •
                </h3>
                <button class="close-btn" onclick="closeModal('maintenanceModeModal')">&times;</button>
            </div>
            
            <div style="padding: 20px; background: #fef3c7; border-radius: 8px; margin-bottom: 20px;">
                <p style="color: #92400e; font-weight: 600;">âš ï¸ ì ê²€ ëª¨ë“œ í™œì„±í™” ì‹œ ëª¨ë“  ì•Œë¦¼ì´ ì¼ì‹œ ì¤‘ë‹¨ë©ë‹ˆë‹¤.</p>
            </div>
            
            <form id="maintenanceForm">
                <div class="form-group">
                    <label class="form-label">ì ê²€ ê¸°ê°„</label>
                    <div class="form-row">
                        <input type="datetime-local" class="form-input" id="maintenanceStart" required>
                        <input type="datetime-local" class="form-input" id="maintenanceEnd" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ì ê²€ ì‚¬ìœ </label>
                    <textarea class="form-textarea" id="maintenanceReason" placeholder="ì˜ˆ: ì‹œìŠ¤í…œ ì—…ê·¸ë ˆì´ë“œ ë° ë³´ì•ˆ íŒ¨ì¹˜ ì ìš©" required></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ì˜í–¥ë°›ëŠ” ì‹œìŠ¤í…œ</label>
                    <div style="display: flex; gap: 15px; margin-top: 8px; flex-wrap: wrap;">
                        <label><input type="checkbox" id="maintainDatabase"> ë°ì´í„°ë² ì´ìŠ¤</label>
                        <label><input type="checkbox" id="maintainApplication"> ì• í”Œë¦¬ì¼€ì´ì…˜</label>
                        <label><input type="checkbox" id="maintainInfrastructure"> ì¸í”„ë¼</label>
                        <label><input type="checkbox" id="maintainNetwork"> ë„¤íŠ¸ì›Œí¬</label>
                        <label><input type="checkbox" id="maintainSecurity"> ë³´ì•ˆ</label>
                    </div>
                </div>
                
                <div class="config-item">
                    <div>
                        <div style="font-weight: 500;">ê¸´ê¸‰ ì•Œë¦¼ í—ˆìš©</div>
                        <div style="font-size: 12px; color: #666;">ìœ„í—˜ ìˆ˜ì¤€ì˜ ì•Œë¦¼ì€ ì ê²€ ì¤‘ì—ë„ ì „ì†¡</div>
                    </div>
                    <div class="toggle-switch active" id="allowCriticalToggle" onclick="toggleMaintenanceOption(this)"></div>
                </div>
            </form>
            
            <div class="modal-actions">
                <button class="btn-cancel" onclick="closeModal('maintenanceModeModal')">ì·¨ì†Œ</button>
                <button class="btn btn-warning" onclick="activateMaintenanceMode()">ğŸ”§ ì ê²€ ëª¨ë“œ í™œì„±í™”</button>
            </div>
        </div>
    </div>

    <!-- Quick Response Modal -->
    <div id="quickResponseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span>âš¡</span>
                    ë¹ ë¥¸ ëŒ€ì‘ íŒ¨ë„
                </h3>
                <button class="close-btn" onclick="closeModal('quickResponseModal')">&times;</button>
            </div>
            
            <div class="quick-actions" style="margin-bottom: 20px;">
                <div class="action-card" onclick="quickResolveAll()">
                    <div class="action-icon">âœ…</div>
                    <div class="action-title">ëª¨ë“  ê²½ê³  í•´ê²°</div>
                    <div class="action-description">ëª¨ë“  ê²½ê³  ìˆ˜ì¤€ ì•Œë¦¼ì„ ì¼ê´„ í•´ê²°</div>
                </div>
                
                <div class="action-card" onclick="quickEscalateAll()">
                    <div class="action-icon">ğŸ“¢</div>
                    <div class="action-title">ìœ„í—˜ ì•Œë¦¼ ì—ìŠ¤ì»¬ë ˆì´ì…˜</div>
                    <div class="action-description">ëª¨ë“  ìœ„í—˜ ì•Œë¦¼ì„ ê´€ë¦¬ìì—ê²Œ ì „ë‹¬</div>
                </div>
                
                <div class="action-card" onclick="quickNotifyTeam()">
                    <div class="action-icon">ğŸ‘¥</div>
                    <div class="action-title">íŒ€ ê¸´ê¸‰ ì•Œë¦¼</div>
                    <div class="action-description">ì „ì²´ íŒ€ì—ê²Œ ìƒí™© ë¸Œë¦¬í•‘ ì „ì†¡</div>
                </div>
                
                <div class="action-card" onclick="quickSilenceAll()">
                    <div class="action-icon">ğŸ”‡</div>
                    <div class="action-title">ì¼ì‹œ ì•Œë¦¼ ì¤‘ë‹¨</div>
                    <div class="action-description">1ì‹œê°„ ë™ì•ˆ ëª¨ë“  ì•Œë¦¼ ì¤‘ë‹¨</div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">ê¸´ê¸‰ ë©”ì‹œì§€</label>
                <textarea class="form-textarea" id="quickMessage" placeholder="íŒ€ì—ê²Œ ì „ë‹¬í•  ê¸´ê¸‰ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”"></textarea>
            </div>
            
            <div class="modal-actions">
                <button class="btn-cancel" onclick="closeModal('quickResponseModal')">ë‹«ê¸°</button>
                <button class="btn btn-danger" onclick="executeQuickResponse()">âš¡ ì¦‰ì‹œ ì‹¤í–‰</button>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Alert data structure
        const alertsData = [
            {
                id: 'alert-001',
                title: 'DB ì„œë²„ ì—°ê²° ì‹¤íŒ¨',
                description: 'DB Master ì„œë²„(10.0.3.10)ì—ì„œ ì—°ê²° ì‹œê°„ ì´ˆê³¼ ë°œìƒ',
                severity: 'critical',
                status: 'active',
                timestamp: new Date(Date.now() - 300000).toISOString(),
                source: 'database',
                assignee: '',
                notificationsSent: ['email', 'sms'],
                escalationLevel: 1
            },
            {
                id: 'alert-002',
                title: 'WAS ì„œë²„ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  ë†’ìŒ',
                description: 'WAS-APP-01 ì„œë²„ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ ì´ 85%ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤',
                severity: 'warning',
                status: 'active',
                timestamp: new Date(Date.now() - 600000).toISOString(),
                source: 'application',
                assignee: '',
                notificationsSent: ['email'],
                escalationLevel: 0
            },
            {
                id: 'alert-003',
                title: 'API ì‘ë‹µ ì‹œê°„ ì§€ì—°',
                description: 'ê²°ì œ API í‰ê·  ì‘ë‹µ ì‹œê°„ì´ 3ì´ˆë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤',
                severity: 'warning',
                status: 'active',
                timestamp: new Date(Date.now() - 900000).toISOString(),
                source: 'api',
                assignee: 'admin',
                notificationsSent: ['email'],
                escalationLevel: 1
            },
            {
                id: 'alert-004',
                title: 'ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ ì‚¬ìš©ë¥  ì¦ê°€',
                description: 'ì½”ì–´ ìŠ¤ìœ„ì¹˜ ëŒ€ì—­í­ ì‚¬ìš©ë¥ ì´ 90%ì— ê·¼ì ‘í–ˆìŠµë‹ˆë‹¤',
                severity: 'critical',
                status: 'active',
                timestamp: new Date(Date.now() - 120000).toISOString(),
                source: 'network',
                assignee: '',
                notificationsSent: ['email', 'sms', 'slack'],
                escalationLevel: 2
            },
            {
                id: 'alert-005',
                title: 'ë””ìŠ¤í¬ ê³µê°„ ë¶€ì¡±',
                description: '/var/log ë””ë ‰í† ë¦¬ ë””ìŠ¤í¬ ì‚¬ìš©ë¥ ì´ 95%ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤',
                severity: 'critical',
                status: 'active',
                timestamp: new Date(Date.now() - 1800000).toISOString(),
                source: 'infrastructure',
                assignee: 'devops',
                notificationsSent: ['email', 'sms'],
                escalationLevel: 1
            },
            {
                id: 'alert-006',
                title: 'ë¡œê·¸ì¸ ì‹¤íŒ¨ ì¦ê°€',
                description: 'ì§€ë‚œ 10ë¶„ê°„ ë¡œê·¸ì¸ ì‹¤íŒ¨ íšŸìˆ˜ê°€ 100íšŒë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤',
                severity: 'warning',
                status: 'active',
                timestamp: new Date(Date.now() - 420000).toISOString(),
                source: 'security',
                assignee: '',
                notificationsSent: ['email'],
                escalationLevel: 0
            }
        ];

        let filteredAlerts = [...alertsData];

        // Initialize page
        function initializeAlertManagement() {
            populateAlertList();
            updateOverviewCards();
            startRealTimeUpdates();
        }

        function populateAlertList() {
            const container = document.getElementById('alertList');
            
            if (filteredAlerts.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <div style="font-size: 48px; margin-bottom: 20px;">ğŸ“­</div>
                        <div style="font-size: 18px; font-weight: 600; margin-bottom: 10px;">ì¡°ê±´ì— ë§ëŠ” ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤</div>
                        <div style="font-size: 14px;">í•„í„°ë¥¼ ì¡°ì •í•˜ê±°ë‚˜ ìƒˆë¡œê³ ì¹¨ì„ ì‹œë„í•´ë³´ì„¸ìš”</div>
                    </div>
                `;
                return;
            }

            container.innerHTML = filteredAlerts.map(alert => `
                <div class="alert-item ${alert.severity} ${alert.status}" data-alert-id="${alert.id}">
                    <div class="alert-icon">${getSeverityIcon(alert.severity)}</div>
                    <div class="alert-content">
                        <div class="alert-title">${alert.title}</div>
                        <div class="alert-description">${alert.description}</div>
                        <div class="alert-meta">
                            <span>â° ${formatTime(alert.timestamp)}</span>
                            <span>ğŸ“ ${alert.source}</span>
                            <span>ğŸ‘¤ ${alert.assignee || 'ë¯¸í• ë‹¹'}</span>
                            <span>ğŸ“¢ ${alert.escalationLevel}ë‹¨ê³„</span>
                            <span>ğŸ“§ ${alert.notificationsSent.join(', ')}</span>
                        </div>
                    </div>
                    <div class="alert-actions">
                        <input type="checkbox" class="alert-checkbox" value="${alert.id}" onchange="updateBulkActions()">
                        <button class="btn-small btn-resolve" onclick="resolveAlert('${alert.id}')" title="ì´ ì•Œë¦¼ì„ í•´ê²° ì²˜ë¦¬í•©ë‹ˆë‹¤">í•´ê²°</button>
                        <button class="btn-small btn-escalate" onclick="escalateAlert('${alert.id}')" title="ìƒìœ„ ë‹¨ê³„ë¡œ ì—ìŠ¤ì»¬ë ˆì´ì…˜í•©ë‹ˆë‹¤">ì—ìŠ¤ì»¬ë ˆì´ì…˜</button>
                        <button class="btn-small btn-send" onclick="sendNotification('${alert.id}')" title="ìˆ˜ë™ìœ¼ë¡œ ì•Œë¦¼ì„ ì „ì†¡í•©ë‹ˆë‹¤">ì•Œë¦¼ ì „ì†¡</button>
                        <button class="btn-small btn-ignore" onclick="ignoreAlert('${alert.id}')" title="ì´ ì•Œë¦¼ì„ ë¬´ì‹œ ì²˜ë¦¬í•©ë‹ˆë‹¤">ë¬´ì‹œ</button>
                        <button class="btn-small btn-history" onclick="showAlertHistory('${alert.id}')" title="ì•Œë¦¼ íˆìŠ¤í† ë¦¬ë¥¼ í™•ì¸í•©ë‹ˆë‹¤" style="background: #6b7280; color: white;">íˆìŠ¤í† ë¦¬</button>
                    </div>
                </div>
            `).join('');
        }

        function getSeverityIcon(severity) {
            const icons = {
                'critical': 'ğŸ”¥',
                'warning': 'âš ï¸',
                'info': 'â„¹ï¸'
            };
            return icons[severity] || 'â„¹ï¸';
        }

        function formatTime(timestamp) {
            const now = new Date();
            const alertTime = new Date(timestamp);
            const diffMinutes = Math.floor((now - alertTime) / 60000);
            
            if (diffMinutes < 1) return 'ë°©ê¸ˆ ì „';
            if (diffMinutes < 60) return `${diffMinutes}ë¶„ ì „`;
            if (diffMinutes < 1440) return `${Math.floor(diffMinutes / 60)}ì‹œê°„ ì „`;
            return `${Math.floor(diffMinutes / 1440)}ì¼ ì „`;
        }

        function updateOverviewCards() {
            const critical = alertsData.filter(a => a.severity === 'critical' && a.status === 'active').length;
            const warning = alertsData.filter(a => a.severity === 'warning' && a.status === 'active').length;
            const info = alertsData.filter(a => a.severity === 'info' && a.status === 'active').length;
            const resolved = alertsData.filter(a => a.status === 'resolved').length;

            document.getElementById('criticalCount').textContent = critical;
            document.getElementById('warningCount').textContent = warning;
            document.getElementById('infoCount').textContent = info;
            document.getElementById('resolvedCount').textContent = resolved;
        }

        function filterAlerts() {
            const searchTerm = document.getElementById('alertSearch').value.toLowerCase();
            const severityFilter = document.getElementById('severityFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;

            filteredAlerts = alertsData.filter(alert => {
                const matchesSearch = alert.title.toLowerCase().includes(searchTerm) || 
                                    alert.description.toLowerCase().includes(searchTerm);
                const matchesSeverity = !severityFilter || alert.severity === severityFilter;
                const matchesStatus = !statusFilter || alert.status === statusFilter;

                return matchesSearch && matchesSeverity && matchesStatus;
            });

            populateAlertList();
        }

        function refreshAlerts() {
            showNotification('ì•Œë¦¼ ëª©ë¡ì„ ìƒˆë¡œê³ ì¹¨í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');
            
            setTimeout(() => {
                // Simulate new alerts
                const newAlert = {
                    id: `alert-${Date.now()}`,
                    title: 'ìƒˆë¡œìš´ ì‹œìŠ¤í…œ ì•Œë¦¼',
                    description: 'ìë™ ìƒì„±ëœ í…ŒìŠ¤íŠ¸ ì•Œë¦¼ì…ë‹ˆë‹¤',
                    severity: 'info',
                    status: 'active',
                    timestamp: new Date().toISOString(),
                    source: 'system',
                    assignee: '',
                    notificationsSent: [],
                    escalationLevel: 0
                };
                
                alertsData.unshift(newAlert);
                filteredAlerts = [...alertsData];
                populateAlertList();
                updateOverviewCards();
                
                showNotification('ì•Œë¦¼ ëª©ë¡ì´ ìƒˆë¡œê³ ì¹¨ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }, 1000);
        }

        // Alert actions
        function resolveAlert(alertId) {
            const alert = alertsData.find(a => a.id === alertId);
            if (!alert) return;
            
            showModal('ì•Œë¦¼ í•´ê²°', `
                <div style="margin-bottom: 20px;">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <h4 style="margin-bottom: 10px; color: #333;">í•´ê²°í•  ì•Œë¦¼</h4>
                        <div style="font-weight: 600; color: #${alert.severity === 'critical' ? 'dc2626' : alert.severity === 'warning' ? 'ea580c' : '2563eb'};">
                            ${getSeverityIcon(alert.severity)} ${alert.title}
                        </div>
                        <div style="font-size: 14px; color: #666; margin-top: 5px;">${alert.description}</div>
                    </div>
                    <form id="resolveForm">
                        <div class="form-group">
                            <label class="form-label">í•´ê²° ì‚¬ìœ </label>
                            <select class="form-select" id="resolveReason" required>
                                <option value="">í•´ê²° ì‚¬ìœ ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="fixed">ë¬¸ì œ ìˆ˜ì • ì™„ë£Œ</option>
                                <option value="false-positive">ì˜¤íƒì§€ (ì •ìƒ ìƒí™©)</option>
                                <option value="maintenance">ì˜ˆì •ëœ ì ê²€</option>
                                <option value="duplicate">ì¤‘ë³µ ì•Œë¦¼</option>
                                <option value="other">ê¸°íƒ€</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">í•´ê²° ìƒì„¸ ë‚´ìš©</label>
                            <textarea class="form-textarea" id="resolveNotes" rows="4" placeholder="í•´ê²° ê³¼ì •ì´ë‚˜ ì¶”ê°€ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." required></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">í•´ê²°ì</label>
                            <input type="text" class="form-input" id="resolvedBy" placeholder="ì´ë¦„ ë˜ëŠ” ì´ë©”ì¼" value="í˜„ì¬ ì‚¬ìš©ì" required>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
                                <input type="checkbox" id="notifyResolution"> í•´ê²° ì•Œë¦¼ ì „ì†¡ (ê´€ë ¨ìì—ê²Œ í•´ê²° ì‚¬ì‹¤ í†µì§€)
                            </label>
                        </div>
                    </form>
                </div>
            `, () => {
                const form = document.getElementById('resolveForm');
                if (form.checkValidity()) {
                    const resolveData = {
                        reason: document.getElementById('resolveReason').value,
                        notes: document.getElementById('resolveNotes').value,
                        resolvedBy: document.getElementById('resolvedBy').value,
                        notifyResolution: document.getElementById('notifyResolution').checked,
                        timestamp: new Date().toISOString()
                    };
                    
                    closeModal();
                    performResolveAlert(alertId, resolveData);
                } else {
                    showNotification('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”', 'warning');
                }
            });
        }
        
        function performResolveAlert(alertId, resolveData) {
            showNotification('ì•Œë¦¼ì„ í•´ê²°í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');
            
            // API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜
            fetch(`/api/alerts/${alertId}/resolve`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(resolveData)
            })
            .then(response => {
                if (response.ok) {
                    const alert = alertsData.find(a => a.id === alertId);
                    if (alert) {
                        alert.status = 'resolved';
                        alert.resolvedAt = resolveData.timestamp;
                        alert.resolvedBy = resolveData.resolvedBy;
                        alert.resolution = resolveData;
                        
                        // í•´ê²° ì•Œë¦¼ ì „ì†¡
                        if (resolveData.notifyResolution) {
                            setTimeout(() => {
                                showNotification('í•´ê²° ì•Œë¦¼ì„ ê´€ë ¨ìì—ê²Œ ì „ì†¡í–ˆìŠµë‹ˆë‹¤', 'info');
                            }, 1000);
                        }
                        
                        populateAlertList();
                        updateOverviewCards();
                        showNotification(`"${alert.title}" ì•Œë¦¼ì´ ì„±ê³µì ìœ¼ë¡œ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤`, 'success');
                        
                        // í•´ê²° ë¡œê·¸ ê¸°ë¡
                        addAlertLog(alertId, 'resolved', `í•´ê²°ë¨: ${resolveData.reason} - ${resolveData.notes}`, resolveData.resolvedBy);
                    }
                } else {
                    throw new Error('ì„œë²„ ì˜¤ë¥˜');
                }
            })
            .catch(error => {
                console.error('Resolve error:', error);
                // ë¡œì»¬ ì—…ë°ì´íŠ¸ë¡œ í´ë°±
                const alert = alertsData.find(a => a.id === alertId);
                if (alert) {
                    alert.status = 'resolved';
                    alert.resolvedAt = resolveData.timestamp;
                    alert.resolvedBy = resolveData.resolvedBy;
                    alert.resolution = resolveData;
                    populateAlertList();
                    updateOverviewCards();
                    showNotification('ì•Œë¦¼ì´ ë¡œì»¬ì—ì„œ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤ (ì„œë²„ ì—°ê²° ì‹¤íŒ¨)', 'warning');
                }
            });
        }

        function escalateAlert(alertId) {
            const alert = alertsData.find(a => a.id === alertId);
            if (!alert) return;
            
            const currentLevel = alert.escalationLevel || 1;
            const maxLevel = 3;
            
            if (currentLevel >= maxLevel) {
                showNotification('ì´ë¯¸ ìµœëŒ€ ì—ìŠ¤ì»¬ë ˆì´ì…˜ ë‹¨ê³„ì…ë‹ˆë‹¤', 'warning');
                return;
            }
            
            showModal('ì•Œë¦¼ ì—ìŠ¤ì»¬ë ˆì´ì…˜', `
                <div style="margin-bottom: 20px;">
                    <div style="background: #fef3c7; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid #f59e0b;">
                        <h4 style="margin-bottom: 10px; color: #92400e;">ì—ìŠ¤ì»¬ë ˆì´ì…˜í•  ì•Œë¦¼</h4>
                        <div style="font-weight: 600; color: #${alert.severity === 'critical' ? 'dc2626' : alert.severity === 'warning' ? 'ea580c' : '2563eb'};">
                            ${getSeverityIcon(alert.severity)} ${alert.title}
                        </div>
                        <div style="font-size: 14px; color: #666; margin-top: 5px;">${alert.description}</div>
                        <div style="font-size: 14px; color: #92400e; margin-top: 10px;">
                            í˜„ì¬ ë‹¨ê³„: ${currentLevel}ë‹¨ê³„ â†’ ${currentLevel + 1}ë‹¨ê³„ë¡œ ì—ìŠ¤ì»¬ë ˆì´ì…˜
                        </div>
                    </div>
                    <form id="escalateForm">
                        <div class="form-group">
                            <label class="form-label">ì—ìŠ¤ìº¬ë ˆì´ì…˜ ëŒ€ìƒ</label>
                            <select class="form-select" id="escalateTarget" required>
                                <option value="">ì—ìŠ¤ìº¬ë ˆì´ì…˜ ëŒ€ìƒì„ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="team-lead">íŒ€ ë¦¬ë”</option>
                                <option value="manager">ê´€ë¦¬ì</option>
                                <option value="senior-engineer">ì‹œë‹ˆì–´ ì—”ì§€ë‹ˆì–´</option>
                                <option value="on-call">ë‹¹ì§ì</option>
                                <option value="emergency-team">ë¹„ìƒ ëŒ€ì‘íŒ€</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ì—ìŠ¤ì»¬ë ˆì´ì…˜ ì‚¬ìœ </label>
                            <select class="form-select" id="escalateReason" required>
                                <option value="">ì—ìŠ¤ìº¬ë ˆì´ì…˜ ì‚¬ìœ ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="no-response">ì´ˆê¸° ëŒ€ì‘ ì—†ìŒ</option>
                                <option value="complex-issue">ë³µì¡í•œ ë¬¸ì œë¡œ ì „ë¬¸ê°€ í•„ìš”</option>
                                <option value="high-impact">ë†’ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜í–¥</option>
                                <option value="time-critical">ì‹œê°„ ì¤‘ìš” ì‚¬ì•ˆ</option>
                                <option value="resource-needed">ì¶”ê°€ ë¦¬ì†ŒìŠ¤ í•„ìš”</option>
                                <option value="policy-required">ì •ì±… ê²°ì • í•„ìš”</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ì—ìŠ¤ì»¬ë ˆì´ì…˜ ë©”ì‹œì§€</label>
                            <textarea class="form-textarea" id="escalateMessage" rows="4" placeholder="ì—ìŠ¤ì»¬ë ˆì´ì…˜ ìƒí™©ê³¼ í•„ìš”í•œ ì¡°ì¹˜ë¥¼ ìƒì„¸íˆ ì„¤ëª…í•´ì£¼ì„¸ìš”..." required></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ìš°ì„ ìˆœìœ„</label>
                            <select class="form-select" id="escalatePriority">
                                <option value="normal">ì¼ë°˜</option>
                                <option value="high">ë†’ìŒ</option>
                                <option value="urgent">ê¸´ê¸‰</option>
                                <option value="critical">ìœ„ê¸‰</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
                                <input type="checkbox" id="escalateImmediate" checked> ì¦‰ì‹œ ì•Œë¦¼ ì „ì†¡
                            </label>
                        </div>
                    </form>
                </div>
            `, () => {
                const form = document.getElementById('escalateForm');
                if (form.checkValidity()) {
                    const escalateData = {
                        target: document.getElementById('escalateTarget').value,
                        reason: document.getElementById('escalateReason').value,
                        message: document.getElementById('escalateMessage').value,
                        priority: document.getElementById('escalatePriority').value,
                        immediate: document.getElementById('escalateImmediate').checked,
                        fromLevel: currentLevel,
                        toLevel: currentLevel + 1,
                        timestamp: new Date().toISOString(),
                        escalatedBy: 'í˜„ì¬ ì‚¬ìš©ì'
                    };
                    
                    closeModal();
                    performEscalateAlert(alertId, escalateData);
                } else {
                    showNotification('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”', 'warning');
                }
            });
        }
        
        function performEscalateAlert(alertId, escalateData) {
            showNotification(`ì•Œë¦¼ì„ ${escalateData.toLevel}ë‹¨ê³„ë¡œ ì—ìŠ¤ì»¬ë ˆì´ì…˜í•˜ê³  ìˆìŠµë‹ˆë‹¤...`, 'info');
            
            // API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜
            fetch(`/api/alerts/${alertId}/escalate`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(escalateData)
            })
            .then(response => {
                if (response.ok) {
                    const alert = alertsData.find(a => a.id === alertId);
                    if (alert) {
                        alert.escalationLevel = escalateData.toLevel;
                        alert.lastEscalation = escalateData;
                        
                        // ì—ìŠ¤ì»ë ˆì´ì…˜ ì•Œë¦¼ ì „ì†¡
                        if (escalateData.immediate) {
                            setTimeout(() => {
                                showNotification(`${escalateData.target}ì—ê²Œ ì—ìŠ¤ì»ë ˆì´ì…˜ ì•Œë¦¼ì„ ì „ì†¡í–ˆìŠµë‹ˆë‹¤`, 'info');
                            }, 1000);
                        }
                        
                        populateAlertList();
                        showNotification(`"${alert.title}" ì•Œë¦¼ì´ ${escalateData.toLevel}ë‹¨ê³„ë¡œ ì—ìŠ¤ì»ë ˆì´ì…˜ë˜ì—ˆìŠµë‹ˆë‹¤`, 'warning');
                        
                        // ì—ìŠ¤ì»½ë ˆì´ì…˜ ë¡œê·¸ ê¸°ë¡
                        addAlertLog(alertId, 'escalated', `${escalateData.fromLevel}ë‹¨ê³„ì—ì„œ ${escalateData.toLevel}ë‹¨ê³„ë¡œ ì—ìŠ¤ì»½ë ˆì´ì…˜: ${escalateData.reason}`, escalateData.escalatedBy);
                    }
                } else {
                    throw new Error('ì„œë²„ ì˜¤ë¥˜');
                }
            })
            .catch(error => {
                console.error('Escalate error:', error);
                // ë¡œì»¬ ì—…ë°ì´íŠ¸ë¡œ í´ë°±
                const alert = alertsData.find(a => a.id === alertId);
                if (alert) {
                    alert.escalationLevel = escalateData.toLevel;
                    alert.lastEscalation = escalateData;
                    populateAlertList();
                    showNotification('ì—ìŠ¤ì»¼ë ˆì´ì…˜ì´ ë¡œì»¬ì—ì„œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ì„œë²„ ì—°ê²° ì‹¤íŒ¨)', 'warning');
                }
            });
        }

        function ignoreAlert(alertId) {
            const alert = alertsData.find(a => a.id === alertId);
            if (!alert) return;
            
            showModal('ì•Œë¦¼ ë¬´ì‹œ', `
                <div style="margin-bottom: 20px;">
                    <div style="background: #fef2f2; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid #ef4444;">
                        <h4 style="margin-bottom: 10px; color: #dc2626;">ë¬´ì‹œí•  ì•Œë¦¼</h4>
                        <div style="font-weight: 600; color: #${alert.severity === 'critical' ? 'dc2626' : alert.severity === 'warning' ? 'ea580c' : '2563eb'};">
                            ${getSeverityIcon(alert.severity)} ${alert.title}
                        </div>
                        <div style="font-size: 14px; color: #666; margin-top: 5px;">${alert.description}</div>
                        <div style="background: #fee2e2; padding: 8px; border-radius: 6px; margin-top: 10px; font-size: 12px; color: #dc2626;">
                            âš ï¸ ë¬´ì‹œëœ ì•Œë¦¼ì€ ë” ì´ìƒ ì•Œë¦¼ì„ ë°œìƒì‹œí‚¤ì§€ ì•Šìœ¼ë©°, ëŒ€ì‹œë³´ë“œì—ì„œ ìˆ¨ê²¨ì§‘ë‹ˆë‹¤.
                        </div>
                    </div>
                    <form id="ignoreForm">
                        <div class="form-group">
                            <label class="form-label">ë¬´ì‹œ ì‚¬ìœ </label>
                            <select class="form-select" id="ignoreReason" required>
                                <option value="">ë¬´ì‹œ ì‚¬ìœ ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="false-positive">ì˜¤íƒì§€ (ì •ìƒ ìƒí™©)</option>
                                <option value="known-issue">ì•Œë ¤ì§„ ë¬¸ì œ (ìˆ˜ì • ì˜ˆì •)</option>
                                <option value="low-priority">ë‚®ì€ ìš°ì„ ìˆœìœ„</option>
                                <option value="duplicate">ì¤‘ë³µ ì•Œë¦¼</option>
                                <option value="maintenance">ì˜ˆì •ëœ ìœ ì§€ë³´ìˆ˜</option>
                                <option value="temporary">ì¼ì‹œì  ìƒí™©</option>
                                <option value="not-applicable">í•´ë‹¹ ì—†ìŒ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ë¬´ì‹œ ìƒì„¸ ë‚´ìš©</label>
                            <textarea class="form-textarea" id="ignoreNotes" rows="3" placeholder="ë¬´ì‹œ ì‚¬ìœ ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”..." required></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ë¬´ì‹œ ê¸°ê°„</label>
                            <select class="form-select" id="ignoreDuration">
                                <option value="permanent">ì˜êµ¬ ë¬´ì‹œ</option>
                                <option value="1hour">1ì‹œê°„</option>
                                <option value="4hours">4ì‹œê°„</option>
                                <option value="1day">1ì¼</option>
                                <option value="1week">1ì£¼</option>
                                <option value="1month">1ê°œì›”</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ë¬´ì‹œì</label>
                            <input type="text" class="form-input" id="ignoredBy" placeholder="ì´ë¦„ ë˜ëŠ” ì´ë©”ì¼" value="í˜„ì¬ ì‚¬ìš©ì" required>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
                                <input type="checkbox" id="notifyIgnore"> ë¬´ì‹œ ì•Œë¦¼ ì „ì†¡ (ê´€ë ¨ìì—ê²Œ ë¬´ì‹œ ì‚¬ì‹¤ í†µì§€)
                            </label>
                        </div>
                    </form>
                </div>
            `, () => {
                const form = document.getElementById('ignoreForm');
                if (form.checkValidity()) {
                    const ignoreData = {
                        reason: document.getElementById('ignoreReason').value,
                        notes: document.getElementById('ignoreNotes').value,
                        duration: document.getElementById('ignoreDuration').value,
                        ignoredBy: document.getElementById('ignoredBy').value,
                        notifyIgnore: document.getElementById('notifyIgnore').checked,
                        timestamp: new Date().toISOString()
                    };
                    
                    // ë¬´ì‹œ ê¸°ê°„ ê³„ì‚°
                    if (ignoreData.duration !== 'permanent') {
                        const durations = {
                            '1hour': 60 * 60 * 1000,
                            '4hours': 4 * 60 * 60 * 1000,
                            '1day': 24 * 60 * 60 * 1000,
                            '1week': 7 * 24 * 60 * 60 * 1000,
                            '1month': 30 * 24 * 60 * 60 * 1000
                        };
                        ignoreData.ignoreUntil = new Date(Date.now() + durations[ignoreData.duration]).toISOString();
                    }
                    
                    closeModal();
                    performIgnoreAlert(alertId, ignoreData);
                } else {
                    showNotification('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”', 'warning');
                }
            });
        }
        
        function performIgnoreAlert(alertId, ignoreData) {
            showNotification('ì•Œë¦¼ì„ ë¬´ì‹œ ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');
            
            // API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜
            fetch(`/api/alerts/${alertId}/ignore`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(ignoreData)
            })
            .then(response => {
                if (response.ok) {
                    const alert = alertsData.find(a => a.id === alertId);
                    if (alert) {
                        alert.status = 'ignored';
                        alert.ignoredAt = ignoreData.timestamp;
                        alert.ignoredBy = ignoreData.ignoredBy;
                        alert.ignoreData = ignoreData;
                        
                        // ë¬´ì‹œ ì•Œë¦¼ ì „ì†¡
                        if (ignoreData.notifyIgnore) {
                            setTimeout(() => {
                                showNotification('ë¬´ì‹œ ì•Œë¦¼ì„ ê´€ë ¨ìì—ê²Œ ì „ì†¡í–ˆìŠµë‹ˆë‹¤', 'info');
                            }, 1000);
                        }
                        
                        populateAlertList();
                        updateOverviewCards();
                        
                        const durationText = ignoreData.duration === 'permanent' ? 'ì˜êµ¬ì ìœ¼ë¡œ' : `${ignoreData.duration}ê°„`;
                        showNotification(`"${alert.title}" ì•Œë¦¼ì´ ${durationText} ë¬´ì‹œë˜ì—ˆìŠµë‹ˆë‹¤`, 'info');
                        
                        // ë¬´ì‹œ ë¡œê·¸ ê¸°ë¡
                        addAlertLog(alertId, 'ignored', `ë¬´ì‹œë¨ (${ignoreData.duration}): ${ignoreData.reason} - ${ignoreData.notes}`, ignoreData.ignoredBy);
                    }
                } else {
                    throw new Error('ì„œë²„ ì˜¤ë¥˜');
                }
            })
            .catch(error => {
                console.error('Ignore error:', error);
                // ë¡œì»¬ ì—…ë°ì´íŠ¸ë¡œ í´ë°±
                const alert = alertsData.find(a => a.id === alertId);
                if (alert) {
                    alert.status = 'ignored';
                    alert.ignoredAt = ignoreData.timestamp;
                    alert.ignoredBy = ignoreData.ignoredBy;
                    alert.ignoreData = ignoreData;
                    populateAlertList();
                    updateOverviewCards();
                    showNotification('ì•Œë¦¼ì´ ë¡œì»¬ì—ì„œ ë¬´ì‹œë˜ì—ˆìŠµë‹ˆë‹¤ (ì„œë²„ ì—°ê²° ì‹¤íŒ¨)', 'warning');
                }
            });
        }

        function sendNotification(alertId) {
            const alert = alertsData.find(a => a.id === alertId);
            if (!alert) return;
            
            showModal('ì•Œë¦¼ ìˆ˜ë™ ì „ì†¡', `
                <div style="margin-bottom: 20px;">
                    <div style="background: #eff6ff; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid #3b82f6;">
                        <h4 style="margin-bottom: 10px; color: #1d4ed8;">ì „ì†¡í•  ì•Œë¦¼</h4>
                        <div style="font-weight: 600; color: #${alert.severity === 'critical' ? 'dc2626' : alert.severity === 'warning' ? 'ea580c' : '2563eb'};">
                            ${getSeverityIcon(alert.severity)} ${alert.title}
                        </div>
                        <div style="font-size: 14px; color: #666; margin-top: 5px;">${alert.description}</div>
                        <div style="font-size: 12px; color: #1d4ed8; margin-top: 8px;">
                            ì´ë¯¸ ì „ì†¡ëœ ì•Œë¦¼: ${alert.notificationsSent ? alert.notificationsSent.join(', ') : 'ì—†ìŒ'}
                        </div>
                    </div>
                    <form id="sendNotificationForm">
                        <div class="form-group">
                            <label class="form-label">ì „ì†¡ ë°©ë²• ì„ íƒ</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 8px;">
                                <label style="display: flex; align-items: center; gap: 8px; padding: 10px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer;">
                                    <input type="checkbox" name="notificationMethods" value="email" checked>
                                    ğŸ“§ ì´ë©”ì¼
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; padding: 10px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer;">
                                    <input type="checkbox" name="notificationMethods" value="sms">
                                    ğŸ“± SMS
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; padding: 10px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer;">
                                    <input type="checkbox" name="notificationMethods" value="slack">
                                    ğŸ’¬ Slack
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; padding: 10px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer;">
                                    <input type="checkbox" name="notificationMethods" value="teams">
                                    ğŸ‘¥ Teams
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ìˆ˜ì‹ ì ê·¸ë£¹</label>
                            <select class="form-select" id="recipientGroup" required>
                                <option value="">ìˆ˜ì‹ ì ê·¸ë£¹ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="assigned">ë‹´ë‹¹ì</option>
                                <option value="team">íŒ€ ì „ì²´</option>
                                <option value="managers">ê´€ë¦¬ìë“¤</option>
                                <option value="on-call">ë‹¹ì§ì</option>
                                <option value="stakeholders">ì´í•´ê´€ê³„ì</option>
                                <option value="custom">ì‚¬ìš©ì ì§€ì •</option>
                            </select>
                        </div>
                        <div class="form-group" id="customRecipientsGroup" style="display: none;">
                            <label class="form-label">ì‚¬ìš©ì ì§€ì • ìˆ˜ì‹ ì</label>
                            <textarea class="form-textarea" id="customRecipients" rows="3" placeholder="ì´ë©”ì¼ ì£¼ì†Œë‚˜ ì „í™”ë²ˆí˜¸ë¥¼ ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ë©”ì‹œì§€ í…œí”Œë¦¿</label>
                            <select class="form-select" id="messageTemplate">
                                <option value="default">ê¸°ë³¸ ì•Œë¦¼ í…œí”Œë¦¿</option>
                                <option value="urgent">ê¸´ê¸‰ ì•Œë¦¼ í…œí”Œë¦¿</option>
                                <option value="summary">ìš”ì•½ í…œí”Œë¦¿</option>
                                <option value="detailed">ìƒì„¸ í…œí”Œë¦¿</option>
                                <option value="custom">ì‚¬ìš©ì ì§€ì •</option>
                            </select>
                        </div>
                        <div class="form-group" id="customMessageGroup" style="display: none;">
                            <label class="form-label">ì‚¬ìš©ì ì§€ì • ë©”ì‹œì§€</label>
                            <textarea class="form-textarea" id="customMessage" rows="4" placeholder="ì „ì†¡í•  ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
                                <input type="checkbox" id="sendImmediate" checked> ì¦‰ì‹œ ì „ì†¡
                            </label>
                        </div>
                    </form>
                </div>
            `, () => {
                const form = document.getElementById('sendNotificationForm');
                const methods = Array.from(document.querySelectorAll('input[name="notificationMethods"]:checked')).map(cb => cb.value);
                const recipientGroup = document.getElementById('recipientGroup').value;
                
                if (methods.length === 0) {
                    showNotification('ì „ì†¡ ë°©ë²•ì„ ì„ íƒí•´ì£¼ì„¸ìš”', 'warning');
                    return;
                }
                
                if (!recipientGroup) {
                    showNotification('ìˆ˜ì‹ ì ê·¸ë£¹ì„ ì„ íƒí•´ì£¼ì„¸ìš”', 'warning');
                    return;
                }
                
                const notificationData = {
                    methods: methods,
                    recipientGroup: recipientGroup,
                    customRecipients: document.getElementById('customRecipients')?.value || '',
                    messageTemplate: document.getElementById('messageTemplate').value,
                    customMessage: document.getElementById('customMessage')?.value || '',
                    immediate: document.getElementById('sendImmediate').checked,
                    timestamp: new Date().toISOString(),
                    sentBy: 'í˜„ì¬ ì‚¬ìš©ì'
                };
                
                closeModal();
                performSendNotification(alertId, notificationData);
            });
            
            // ë™ì  í¼ ì²˜ë¦¬
            document.getElementById('recipientGroup').addEventListener('change', function() {
                const customGroup = document.getElementById('customRecipientsGroup');
                if (this.value === 'custom') {
                    customGroup.style.display = 'block';
                } else {
                    customGroup.style.display = 'none';
                }
            });
            
            document.getElementById('messageTemplate').addEventListener('change', function() {
                const customMessageGroup = document.getElementById('customMessageGroup');
                if (this.value === 'custom') {
                    customMessageGroup.style.display = 'block';
                } else {
                    customMessageGroup.style.display = 'none';
                }
            });
        }
        
        function performSendNotification(alertId, notificationData) {
            showNotification(`${notificationData.methods.length}ê°œ ë°©ë²•ìœ¼ë¡œ ì•Œë¦¼ì„ ì „ì†¡í•˜ê³  ìˆìŠµë‹ˆë‹¤...`, 'info');
            
            // API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜
            fetch(`/api/alerts/${alertId}/send-notification`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(notificationData)
            })
            .then(response => {
                if (response.ok) {
                    const alert = alertsData.find(a => a.id === alertId);
                    if (alert) {
                        // ì „ì†¡ëœ ì•Œë¦¼ ê¸°ë¡ ì¶”ê°€
                        if (!alert.notificationsSent) alert.notificationsSent = [];
                        notificationData.methods.forEach(method => {
                            alert.notificationsSent.push(`manual-${method}`);
                        });
                        
                        populateAlertList();
                        showNotification(`ì•Œë¦¼ì´ ${notificationData.methods.join(', ')}ë¡œ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤`, 'success');
                        
                        // ì „ì†¡ ë¡œê·¸ ê¸°ë¡
                        addAlertLog(alertId, 'notification_sent', `ìˆ˜ë™ ì•Œë¦¼ ì „ì†¡: ${notificationData.methods.join(', ')} to ${notificationData.recipientGroup}`, notificationData.sentBy);
                    }
                } else {
                    throw new Error('ì„œë²„ ì˜¤ë¥˜');
                }
            })
            .catch(error => {
                console.error('Send notification error:', error);
                // ë¡œì»¬ ì—…ë°ì´íŠ¸ë¡œ í´ë°±
                const alert = alertsData.find(a => a.id === alertId);
                if (alert) {
                    if (!alert.notificationsSent) alert.notificationsSent = [];
                    notificationData.methods.forEach(method => {
                        alert.notificationsSent.push(`manual-${method}`);
                    });
                    populateAlertList();
                    showNotification('ì•Œë¦¼ì´ ë¡œì»¬ì—ì„œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤ (ì„œë²„ ì—°ê²° ì‹¤íŒ¨)', 'warning');
                }
            });
        }

        function bulkAction(action) {
            const checkedBoxes = document.querySelectorAll('.alert-checkbox:checked');
            const alertIds = Array.from(checkedBoxes).map(cb => cb.value);
            
            if (alertIds.length === 0) {
                showNotification('ì„ íƒëœ ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤', 'warning');
                return;
            }

            if (action === 'resolve') {
                alertIds.forEach(id => resolveAlert(id));
                showNotification(`${alertIds.length}ê°œ ì•Œë¦¼ì´ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤`, 'success');
            } else if (action === 'escalate') {
                alertIds.forEach(id => escalateAlert(id));
                showNotification(`${alertIds.length}ê°œ ì•Œë¦¼ì´ ì—ìŠ¤ì»¬ë ˆì´ì…˜ë˜ì—ˆìŠµë‹ˆë‹¤`, 'warning');
            }
            
            // Clear checkboxes
            checkedBoxes.forEach(cb => cb.checked = false);
        }

        function updateBulkActions() {
            const checkedCount = document.querySelectorAll('.alert-checkbox:checked').length;
            // Update UI to show selected count if needed
        }

        function startRealTimeUpdates() {
            setInterval(() => {
                updateOverviewCards();
                // Simulate real-time updates
                if (Math.random() > 0.95) {
                    refreshAlerts();
                }
            }, 30000); // Update every 30 seconds
        }

        // Global data for modals
        const escalationRules = [
            {
                id: 'rule-001',
                name: 'ìœ„í—˜ ì•Œë¦¼ ì¦‰ì‹œ ì—ìŠ¤ì»¬ë ˆì´ì…˜',
                severity: 'critical',
                delay: 0,
                channels: ['email', 'sms'],
                recipients: ['admin@company.com', '010-1234-5678'],
                enabled: true
            },
            {
                id: 'rule-002',
                name: 'ë¯¸í•´ê²° ì•Œë¦¼ ì¬ì „ì†¡',
                severity: 'warning',
                delay: 1800,
                channels: ['email', 'slack'],
                recipients: ['devops-team@company.com'],
                enabled: true
            }
        ];

        const alertTemplates = [
            {
                id: 'template-001',
                name: 'ìœ„í—˜ ì•Œë¦¼ í…œí”Œë¦¿',
                type: 'critical',
                subject: '[CRITICAL] {{title}}',
                body: 'ê¸´ê¸‰ ì•Œë¦¼ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\n\nì œëª©: {{title}}\në‚´ìš©: {{description}}\nì‹œê°„: {{timestamp}}\n\nì¦‰ì‹œ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.',
                channels: ['email', 'sms']
            },
            {
                id: 'template-002',
                name: 'ê²½ê³  ì•Œë¦¼ í…œí”Œë¦¿',
                type: 'warning',
                subject: '[WARNING] {{title}}',
                body: 'ê²½ê³  ì•Œë¦¼ì…ë‹ˆë‹¤.\n\nì œëª©: {{title}}\në‚´ìš©: {{description}}\nì‹œê°„: {{timestamp}}\n\nê²€í† ê°€ í•„ìš”í•©ë‹ˆë‹¤.',
                channels: ['email']
            }
        ];

        // Modal functions
        function openCreateAlert() {
            document.getElementById('createAlertForm').reset();
            openModal('createAlertModal');
        }

        function createNewAlert() {
            const form = document.getElementById('createAlertForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const newAlert = {
                id: `alert-${Date.now()}`,
                title: document.getElementById('alertTitle').value,
                description: document.getElementById('alertDescription').value,
                severity: document.getElementById('alertSeverity').value,
                status: 'active',
                timestamp: new Date().toISOString(),
                source: document.getElementById('alertSource').value,
                assignee: document.getElementById('alertAssignee').value,
                notificationsSent: [],
                escalationLevel: 0,
                affected: document.getElementById('alertAffected').value.split(',').map(s => s.trim()).filter(s => s),
                autoResolve: false
            };

            // Check which notifications to send
            const notifyChannels = [];
            if (document.getElementById('notifyEmail').checked) notifyChannels.push('email');
            if (document.getElementById('notifySMS').checked) notifyChannels.push('sms');
            if (document.getElementById('notifySlack').checked) notifyChannels.push('slack');
            if (document.getElementById('notifyTeams').checked) notifyChannels.push('teams');

            newAlert.notificationsSent = notifyChannels;

            // Add to alerts data
            alertsData.unshift(newAlert);
            filteredAlerts = [...alertsData];
            populateAlertList();
            updateOverviewCards();

            closeModal('createAlertModal');
            
            if (notifyChannels.length > 0) {
                showNotification(`ìƒˆ ì•Œë¦¼ì´ ìƒì„±ë˜ê³  ${notifyChannels.join(', ')} ì±„ë„ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤`, 'success');
            } else {
                showNotification('ìƒˆ ì•Œë¦¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }
        }

        function openNotificationSettings() {
            showNotification('ì•Œë¦¼ ì„¤ì • í™”ë©´ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤', 'info');
            window.location.href = '/notification-settings';
        }

        function openEscalationRules() {
            populateEscalationRules();
            openModal('escalationRulesModal');
        }

        function populateEscalationRules() {
            const container = document.getElementById('escalationRulesList');
            container.innerHTML = escalationRules.map(rule => `
                <div class="rule-item">
                    <div class="rule-header">
                        <div class="rule-title">${rule.name}</div>
                        <div class="rule-actions">
                            <div class="toggle-switch ${rule.enabled ? 'active' : ''}" onclick="toggleEscalationRule('${rule.id}')"></div>
                            <button class="btn-small btn-edit" onclick="editEscalationRule('${rule.id}')">ìˆ˜ì •</button>
                            <button class="btn-small btn-delete" onclick="deleteEscalationRule('${rule.id}')">ì‚­ì œ</button>
                        </div>
                    </div>
                    <div class="rule-conditions">
                        ì¡°ê±´: ì‹¬ê°ë„ê°€ '${getSeverityText(rule.severity)}'ì¸ ê²½ìš° â†’ ${rule.delay === 0 ? 'ì¦‰ì‹œ' : `${rule.delay/60}ë¶„ í›„`} ${rule.channels.join(', ')} ì „ì†¡
                    </div>
                    <div class="rule-targets">
                        ${rule.recipients.map(recipient => `<span class="target-badge">${getRecipientIcon(recipient)} ${recipient}</span>`).join('')}
                    </div>
                </div>
            `).join('');
        }

        function getSeverityText(severity) {
            const map = { 'critical': 'ìœ„í—˜', 'warning': 'ê²½ê³ ', 'info': 'ì •ë³´' };
            return map[severity] || severity;
        }

        function getRecipientIcon(recipient) {
            if (recipient.includes('@')) return 'ğŸ“§';
            if (recipient.startsWith('010') || recipient.startsWith('+')) return 'ğŸ“±';
            return 'ğŸ‘¤';
        }

        function addEscalationRule() {
            document.getElementById('escalationRuleForm').reset();
            openModal('addEscalationRuleModal');
        }

        function saveEscalationRule() {
            const form = document.getElementById('escalationRuleForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const channels = [];
            if (document.getElementById('ruleEmail').checked) channels.push('email');
            if (document.getElementById('ruleSMS').checked) channels.push('sms');
            if (document.getElementById('ruleSlack').checked) channels.push('slack');
            if (document.getElementById('ruleTeams').checked) channels.push('teams');

            const newRule = {
                id: `rule-${Date.now()}`,
                name: document.getElementById('ruleName').value,
                severity: document.getElementById('ruleSeverity').value,
                delay: parseInt(document.getElementById('ruleDelay').value),
                channels: channels,
                recipients: document.getElementById('ruleRecipients').value.split('\n').filter(r => r.trim()),
                enabled: true
            };

            escalationRules.push(newRule);
            populateEscalationRules();
            closeModal('addEscalationRuleModal');
            showNotification('ì—ìŠ¤ì»¬ë ˆì´ì…˜ ê·œì¹™ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
        }

        function toggleEscalationRule(ruleId) {
            const rule = escalationRules.find(r => r.id === ruleId);
            if (rule) {
                rule.enabled = !rule.enabled;
                populateEscalationRules();
                showNotification(`ì—ìŠ¤ì»¬ë ˆì´ì…˜ ê·œì¹™ì´ ${rule.enabled ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}ë˜ì—ˆìŠµë‹ˆë‹¤`, 'info');
            }
        }

        function editEscalationRule(ruleId) {
            showNotification(`ê·œì¹™ ${ruleId} í¸ì§‘ ê¸°ëŠ¥ì„ êµ¬í˜„ ì¤‘ì…ë‹ˆë‹¤`, 'info');
        }

        function deleteEscalationRule(ruleId) {
            if (confirm('ì´ ì—ìŠ¤ì»¬ë ˆì´ì…˜ ê·œì¹™ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                const index = escalationRules.findIndex(r => r.id === ruleId);
                if (index !== -1) {
                    escalationRules.splice(index, 1);
                    populateEscalationRules();
                    showNotification('ì—ìŠ¤ì»¬ë ˆì´ì…˜ ê·œì¹™ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                }
            }
        }

        function openAlertTemplates() {
            populateAlertTemplates();
            openModal('alertTemplatesModal');
        }

        function populateAlertTemplates() {
            const container = document.getElementById('alertTemplatesList');
            container.innerHTML = alertTemplates.map(template => `
                <div class="template-item">
                    <div class="template-header">
                        <div class="template-title">${template.name}</div>
                        <div class="rule-actions">
                            <button class="btn-small btn-edit" onclick="editAlertTemplate('${template.id}')">ìˆ˜ì •</button>
                            <button class="btn-small btn-delete" onclick="deleteAlertTemplate('${template.id}')">ì‚­ì œ</button>
                        </div>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <strong>ì œëª©:</strong> ${template.subject}<br>
                        <strong>ì±„ë„:</strong> ${template.channels.map(c => getChannelIcon(c) + ' ' + c).join(', ')}
                    </div>
                    <div class="template-preview">
${template.body}
                    </div>
                </div>
            `).join('');
        }

        function getChannelIcon(channel) {
            const icons = { 'email': 'ğŸ“§', 'sms': 'ğŸ“±', 'slack': 'ğŸ’¬', 'teams': 'ğŸ‘¥' };
            return icons[channel] || 'ğŸ“¢';
        }

        function addAlertTemplate() {
            document.getElementById('templateForm').reset();
            document.getElementById('templateEmail').checked = true;
            openModal('addTemplateModal');
        }

        function saveAlertTemplate() {
            const form = document.getElementById('templateForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const channels = [];
            if (document.getElementById('templateEmail').checked) channels.push('email');
            if (document.getElementById('templateSMS').checked) channels.push('sms');
            if (document.getElementById('templateSlack').checked) channels.push('slack');
            if (document.getElementById('templateTeams').checked) channels.push('teams');

            const newTemplate = {
                id: `template-${Date.now()}`,
                name: document.getElementById('templateName').value,
                type: document.getElementById('templateType').value,
                subject: document.getElementById('templateSubject').value,
                body: document.getElementById('templateBody').value,
                channels: channels
            };

            alertTemplates.push(newTemplate);
            populateAlertTemplates();
            closeModal('addTemplateModal');
            showNotification('ì•Œë¦¼ í…œí”Œë¦¿ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
        }

        function editAlertTemplate(templateId) {
            showNotification(`í…œí”Œë¦¿ ${templateId} í¸ì§‘ ê¸°ëŠ¥ì„ êµ¬í˜„ ì¤‘ì…ë‹ˆë‹¤`, 'info');
        }

        function deleteAlertTemplate(templateId) {
            if (confirm('ì´ ì•Œë¦¼ í…œí”Œë¦¿ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                const index = alertTemplates.findIndex(t => t.id === templateId);
                if (index !== -1) {
                    alertTemplates.splice(index, 1);
                    populateAlertTemplates();
                    showNotification('ì•Œë¦¼ í…œí”Œë¦¿ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                }
            }
        }

        function viewAlertHistory() {
            // Set default date range (last 7 days)
            const today = new Date();
            const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);
            
            document.getElementById('historyStartDate').value = weekAgo.toISOString().split('T')[0];
            document.getElementById('historyEndDate').value = today.toISOString().split('T')[0];
            
            loadAlertHistory();
            openModal('alertHistoryModal');
        }

        function loadAlertHistory() {
            const startDate = document.getElementById('historyStartDate').value;
            const endDate = document.getElementById('historyEndDate').value;
            const severityFilter = document.getElementById('historySeverityFilter').value;

            showNotification('ì•Œë¦¼ íˆìŠ¤í† ë¦¬ë¥¼ ë¡œë”©í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');

            // Simulate API call
            setTimeout(() => {
                const history = Array.from({ length: 20 }, (_, i) => {
                    const severity = ['critical', 'warning', 'info'][Math.floor(Math.random() * 3)];
                    return {
                        id: `history-${i + 1}`,
                        title: `ê³¼ê±° ì•Œë¦¼ ${i + 1}`,
                        severity: severity,
                        status: 'resolved',
                        createdAt: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000).toISOString(),
                        resolvedAt: new Date(Date.now() - Math.random() * 6 * 24 * 60 * 60 * 1000).toISOString(),
                        resolution: Math.random() > 0.5 ? 'ìë™ í•´ê²°' : 'ìˆ˜ë™ í•´ê²°',
                        resolvedBy: Math.random() > 0.5 ? 'system' : 'admin'
                    };
                }).filter(item => !severityFilter || item.severity === severityFilter);

                const container = document.getElementById('alertHistoryList');
                container.innerHTML = history.map(item => `
                    <div class="alert-item ${item.severity} resolved" style="margin-bottom: 10px;">
                        <div class="alert-icon">${getSeverityIcon(item.severity)}</div>
                        <div class="alert-content">
                            <div class="alert-title">${item.title}</div>
                            <div class="alert-meta">
                                <span>â° ìƒì„±: ${formatTime(item.createdAt)}</span>
                                <span>âœ… í•´ê²°: ${formatTime(item.resolvedAt)}</span>
                                <span>ğŸ‘¤ ${item.resolvedBy}</span>
                                <span>ğŸ“‹ ${item.resolution}</span>
                            </div>
                        </div>
                    </div>
                `).join('');

                showNotification(`${history.length}ê°œì˜ íˆìŠ¤í† ë¦¬ í•­ëª©ì„ ë¡œë”©í–ˆìŠµë‹ˆë‹¤`, 'success');
            }, 1000);
        }

        function exportAlertHistory() {
            const historyData = {
                exportDate: new Date().toISOString(),
                period: {
                    start: document.getElementById('historyStartDate').value,
                    end: document.getElementById('historyEndDate').value
                },
                filter: document.getElementById('historySeverityFilter').value,
                data: Array.from(document.querySelectorAll('#alertHistoryList .alert-item')).map((item, i) => ({
                    id: `export-${i + 1}`,
                    title: item.querySelector('.alert-title').textContent,
                    severity: item.classList.contains('critical') ? 'critical' : item.classList.contains('warning') ? 'warning' : 'info',
                    exportedAt: new Date().toISOString()
                }))
            };

            downloadJson(historyData, `alert-history-${new Date().toISOString().split('T')[0]}.json`);
            showNotification('ì•Œë¦¼ íˆìŠ¤í† ë¦¬ê°€ ë‚´ë³´ë‚´ê¸°ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
        }

        function openMaintenanceMode() {
            // Set default times (1 hour from now to 2 hours from now)
            const now = new Date();
            const startTime = new Date(now.getTime() + 60 * 60 * 1000);
            const endTime = new Date(now.getTime() + 2 * 60 * 60 * 1000);
            
            document.getElementById('maintenanceStart').value = startTime.toISOString().slice(0, 16);
            document.getElementById('maintenanceEnd').value = endTime.toISOString().slice(0, 16);
            
            openModal('maintenanceModeModal');
        }

        function toggleMaintenanceOption(toggle) {
            toggle.classList.toggle('active');
        }

        function activateMaintenanceMode() {
            const form = document.getElementById('maintenanceForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const maintenanceData = {
                startTime: document.getElementById('maintenanceStart').value,
                endTime: document.getElementById('maintenanceEnd').value,
                reason: document.getElementById('maintenanceReason').value,
                affectedSystems: [],
                allowCritical: document.getElementById('allowCriticalToggle').classList.contains('active')
            };

            // Collect affected systems
            if (document.getElementById('maintainDatabase').checked) maintenanceData.affectedSystems.push('database');
            if (document.getElementById('maintainApplication').checked) maintenanceData.affectedSystems.push('application');
            if (document.getElementById('maintainInfrastructure').checked) maintenanceData.affectedSystems.push('infrastructure');
            if (document.getElementById('maintainNetwork').checked) maintenanceData.affectedSystems.push('network');
            if (document.getElementById('maintainSecurity').checked) maintenanceData.affectedSystems.push('security');

            if (confirm('ì ê²€ ëª¨ë“œë¥¼ í™œì„±í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì„¤ì •ëœ ì‹œê°„ ë™ì•ˆ ì•Œë¦¼ì´ ì œí•œë©ë‹ˆë‹¤.')) {
                closeModal('maintenanceModeModal');
                showNotification('ì ê²€ ëª¨ë“œê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤', 'warning');
                
                // Update header to show maintenance mode
                const statusBadge = document.querySelector('.status-badge');
                statusBadge.className = 'status-badge';
                statusBadge.style.background = 'linear-gradient(135deg, #f59e0b, #d97706)';
                statusBadge.innerHTML = '<span>ğŸ”§</span> ì ê²€ ëª¨ë“œ í™œì„±';
            }
        }

        function openQuickResponse() {
            openModal('quickResponseModal');
        }

        function quickResolveAll() {
            const warningAlerts = alertsData.filter(a => a.severity === 'warning' && a.status === 'active');
            showNotification(`${warningAlerts.length}ê°œì˜ ê²½ê³  ì•Œë¦¼ì„ í•´ê²° ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤...`, 'info');
            
            setTimeout(() => {
                warningAlerts.forEach(alert => alert.status = 'resolved');
                populateAlertList();
                updateOverviewCards();
                showNotification(`${warningAlerts.length}ê°œì˜ ê²½ê³  ì•Œë¦¼ì´ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤`, 'success');
            }, 1500);
        }

        function quickEscalateAll() {
            const criticalAlerts = alertsData.filter(a => a.severity === 'critical' && a.status === 'active');
            showNotification(`${criticalAlerts.length}ê°œì˜ ìœ„í—˜ ì•Œë¦¼ì„ ì—ìŠ¤ì»¬ë ˆì´ì…˜í•˜ê³  ìˆìŠµë‹ˆë‹¤...`, 'warning');
            
            setTimeout(() => {
                criticalAlerts.forEach(alert => {
                    alert.escalationLevel = Math.min(alert.escalationLevel + 1, 3);
                    alert.assignee = 'admin';
                });
                populateAlertList();
                showNotification(`${criticalAlerts.length}ê°œì˜ ìœ„í—˜ ì•Œë¦¼ì´ ì—ìŠ¤ì»¬ë ˆì´ì…˜ë˜ì—ˆìŠµë‹ˆë‹¤`, 'warning');
            }, 1500);
        }

        function quickNotifyTeam() {
            const message = document.getElementById('quickMessage').value || 'ê¸´ê¸‰ ìƒí™©ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì¦‰ì‹œ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.';
            showNotification('ì „ì²´ íŒ€ì—ê²Œ ê¸´ê¸‰ ì•Œë¦¼ì„ ì „ì†¡í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');
            
            setTimeout(() => {
                showNotification('ì „ì²´ íŒ€ì—ê²Œ ê¸´ê¸‰ ì•Œë¦¼ì´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }, 2000);
        }

        function quickSilenceAll() {
            if (confirm('1ì‹œê°„ ë™ì•ˆ ëª¨ë“  ì•Œë¦¼ì„ ì¤‘ë‹¨í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                showNotification('1ì‹œê°„ ë™ì•ˆ ëª¨ë“  ì•Œë¦¼ì´ ì¤‘ë‹¨ë©ë‹ˆë‹¤', 'warning');
                
                // Update header to show silence mode
                setTimeout(() => {
                    const statusBadge = document.querySelector('.status-badge');
                    statusBadge.className = 'status-badge';
                    statusBadge.style.background = 'linear-gradient(135deg, #6b7280, #4b5563)';
                    statusBadge.innerHTML = '<span>ğŸ”‡</span> ì•Œë¦¼ ì¤‘ë‹¨ ëª¨ë“œ';
                }, 500);
            }
        }

        function executeQuickResponse() {
            const message = document.getElementById('quickMessage').value;
            if (message.trim()) {
                quickNotifyTeam();
            } else {
                showNotification('ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”', 'warning');
                return;
            }
            closeModal('quickResponseModal');
        }

        // Modal utility functions
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.add('show');
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.remove('show');
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300);
            document.body.style.overflow = 'auto';
        }

        // Download utility function
        function downloadJson(data, filename) {
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Close modals when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('show');
                setTimeout(() => {
                    e.target.style.display = 'none';
                }, 300);
                document.body.style.overflow = 'auto';
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const openModal = document.querySelector('.modal.show');
                if (openModal) {
                    openModal.classList.remove('show');
                    setTimeout(() => {
                        openModal.style.display = 'none';
                    }, 300);
                    document.body.style.overflow = 'auto';
                }
            }
        });

        // Enhanced notification system with action tracking
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const colors = {
                success: '#10b981',
                error: '#ef4444',
                warning: '#f59e0b',
                info: '#3b82f6'
            };

            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${colors[type] || colors.info};
                color: white;
                padding: 15px 25px;
                border-radius: 12px;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                z-index: 10001;
                font-size: 14px;
                font-weight: 600;
                max-width: 400px;
                animation: slideInRight 0.3s ease;
            `;

            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideInRight 0.3s ease reverse';
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }
        
        // Alert logging system
        let alertLogs = {}; // alertId -> array of log entries
        
        function addAlertLog(alertId, action, description, actor) {
            if (!alertLogs[alertId]) {
                alertLogs[alertId] = [];
            }
            
            const logEntry = {
                id: `log-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
                timestamp: new Date().toISOString(),
                action: action,
                description: description,
                actor: actor,
                metadata: {
                    userAgent: navigator.userAgent,
                    ip: 'xxx.xxx.xxx.xxx' // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì„œë²„ì—ì„œ ì²˜ë¦¬
                }
            };
            
            alertLogs[alertId].unshift(logEntry); // ìµœì‹  ë¡œê·¸ê°€ ë§¨ ìœ„ì—
            
            // ë¡œê·¸ë¥¼ ì„œë²„ì— ì „ì†¡ (ì„ íƒì )
            saveLogToServer(alertId, logEntry);
        }
        
        function saveLogToServer(alertId, logEntry) {
            fetch(`/api/alerts/${alertId}/logs`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(logEntry)
            })
            .catch(error => {
                console.error('Failed to save log to server:', error);
                // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ë°±ì—…
                const localLogs = JSON.parse(localStorage.getItem('alertLogs') || '{}');
                if (!localLogs[alertId]) localLogs[alertId] = [];
                localLogs[alertId].unshift(logEntry);
                localStorage.setItem('alertLogs', JSON.stringify(localLogs));
            });
        }
        
        function getAlertLogs(alertId) {
            return alertLogs[alertId] || [];
        }
        
        function showAlertHistory(alertId) {
            const alert = alertsData.find(a => a.id === alertId);
            const logs = getAlertLogs(alertId);
            
            if (!alert) return;
            
            const historyHTML = `
                <div style="margin-bottom: 20px;">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <h4 style="margin-bottom: 10px; color: #333;">ì•Œë¦¼ ì •ë³´</h4>
                        <div style="font-weight: 600; color: #${alert.severity === 'critical' ? 'dc2626' : alert.severity === 'warning' ? 'ea580c' : '2563eb'};">
                            ${getSeverityIcon(alert.severity)} ${alert.title}
                        </div>
                        <div style="font-size: 14px; color: #666; margin-top: 5px;">${alert.description}</div>
                        <div style="font-size: 12px; color: #999; margin-top: 5px;">
                            ìƒì„±ì‹œê°„: ${formatTime(alert.timestamp)} | ìƒíƒœ: ${alert.status} | ì—ìŠ¤ì»¬ë ˆì´ì…˜: ${alert.escalationLevel || 1}ë‹¨ê³„
                        </div>
                    </div>
                    
                    <h4 style="margin-bottom: 15px; color: #333;">ì‘ì—… íˆìŠ¤í† ë¦¬</h4>
                    <div style="max-height: 400px; overflow-y: auto;">
                        ${logs.length > 0 ? logs.map(log => `
                            <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 12px; margin-bottom: 10px;">
                                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
                                    <span style="font-weight: 600; color: #333;">${getActionIcon(log.action)} ${getActionName(log.action)}</span>
                                    <span style="font-size: 12px; color: #666;">${formatTime(log.timestamp)}</span>
                                </div>
                                <div style="font-size: 14px; color: #555; margin-bottom: 6px;">${log.description}</div>
                                <div style="font-size: 12px; color: #999;">ì‘ì—…ì: ${log.actor}</div>
                            </div>
                        `).join('') : `
                            <div style="text-align: center; padding: 40px; color: #999;">
                                ì•„ì§ ì‘ì—… íˆìŠ¤í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤.
                            </div>
                        `}
                    </div>
                </div>
            `;
            
            showModal('ì•Œë¦¼ íˆìŠ¤í† ë¦¬', historyHTML, null, false);
        }
        
        function getActionIcon(action) {
            const icons = {
                'created': 'ğŸ“…',
                'resolved': 'âœ…',
                'escalated': 'ğŸ“ˆ',
                'ignored': 'ğŸ™ˆ',
                'notification_sent': 'ğŸ“§',
                'assigned': 'ğŸ‘¤',
                'commented': 'ğŸ’¬',
                'updated': 'âœï¸'
            };
            return icons[action] || 'ğŸ“Œ';
        }
        
        function getActionName(action) {
            const names = {
                'created': 'ì•Œë¦¼ ìƒì„±',
                'resolved': 'í•´ê²° ì™„ë£Œ',
                'escalated': 'ì—ìŠ¤ì»¬ë ˆì´ì…˜',
                'ignored': 'ë¬´ì‹œ ì²˜ë¦¬',
                'notification_sent': 'ì•Œë¦¼ ì „ì†¡',
                'assigned': 'ë‹´ë‹¹ì ì§€ì •',
                'commented': 'ëŒ“ê¸€ ì‘ì„±',
                'updated': 'ì•Œë¦¼ ìˆ˜ì •'
            };
            return names[action] || 'ê¸°íƒ€ ì‘ì—…';
        }
        
        // Modal system for enhanced functionality
        function showModal(title, content, onConfirm = null, showCancel = true) {
            const existingModal = document.getElementById('alertModal');
            if (existingModal) {
                existingModal.remove();
            }
            
            const modal = document.createElement('div');
            modal.id = 'alertModal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.6);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: white;
                    border-radius: 16px;
                    padding: 30px;
                    max-width: 700px;
                    width: 90%;
                    max-height: 85vh;
                    overflow-y: auto;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                    animation: slideInUp 0.3s ease;
                ">
                    <h3 style="margin: 0 0 20px 0; color: #333; font-size: 24px; font-weight: 600;">${title}</h3>
                    <div style="margin-bottom: 25px;">${content}</div>
                    <div style="display: flex; gap: 15px; justify-content: flex-end;">
                        ${showCancel ? '<button class="btn btn-secondary" onclick="closeModal()">ì·¨ì†Œ</button>' : ''}
                        ${onConfirm ? '<button class="btn btn-primary" onclick="handleModalConfirm()">í™•ì¸</button>' : ''}
                        ${!onConfirm && !showCancel ? '<button class="btn btn-primary" onclick="closeModal()">ë‹«ê¸°</button>' : ''}
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Store confirm handler
            if (onConfirm) {
                window.currentModalConfirm = onConfirm;
            }
            
            // Close on background click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
        }
        
        function closeModal() {
            const modal = document.getElementById('alertModal');
            if (modal) {
                modal.style.animation = 'fadeIn 0.3s ease reverse';
                setTimeout(() => modal.remove(), 300);
            }
            window.currentModalConfirm = null;
        }
        
        function handleModalConfirm() {
            if (window.currentModalConfirm) {
                window.currentModalConfirm();
            }
        }

        // Add CSS for animations and modal styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            @keyframes slideInUp {
                from { transform: translateY(30px); opacity: 0; }
                to { transform: translateY(0); opacity: 1; }
            }
            .form-group {
                margin-bottom: 20px;
            }
            .form-label {
                display: block;
                margin-bottom: 8px;
                font-weight: 600;
                color: #374151;
                font-size: 14px;
            }
            .form-input, .form-select, .form-textarea {
                width: 100%;
                padding: 12px 16px;
                border: 2px solid #e5e7eb;
                border-radius: 10px;
                font-size: 14px;
                transition: all 0.3s ease;
                font-family: inherit;
            }
            .form-input:focus, .form-select:focus, .form-textarea:focus {
                outline: none;
                border-color: #3b82f6;
                box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            }
            .form-textarea {
                resize: vertical;
                min-height: 100px;
            }
            .btn-secondary {
                background: #f3f4f6;
                color: #4b5563;
                padding: 12px 24px;
                border: none;
                border-radius: 10px;
                font-size: 14px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
            }
            .btn-secondary:hover {
                background: #e5e7eb;
            }
            .btn-history {
                background: #6b7280 !important;
                color: white !important;
            }
            .btn-history:hover {
                background: #4b5563 !important;
            }
        `;
        document.head.appendChild(style);

        // Initialize on page load
        window.addEventListener('load', () => {
            initializeAlertManagement();
        });
    </script>
    </div>
</body>
</html>