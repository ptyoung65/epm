<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé¨ AIRIS-MON ÏÑ∏ÏÖò Î¶¨ÌîåÎ†àÏù¥ ÏãúÎÇòÎ¶¨Ïò§ ÌÖåÏä§Ìä∏</title>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .header p {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        .scenarios-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .scenario-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .scenario-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }
        
        .scenario-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .scenario-icon {
            font-size: 2.5rem;
            margin-right: 15px;
        }
        
        .scenario-title {
            font-size: 1.4rem;
            color: #2c3e50;
            font-weight: bold;
        }
        
        .scenario-description {
            color: #7f8c8d;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .test-interface {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px dashed #e9ecef;
            min-height: 200px;
            position: relative;
        }
        
        .interface-label {
            position: absolute;
            top: -10px;
            left: 15px;
            background: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            color: #6c757d;
            font-weight: bold;
        }
        
        .bug-interface {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .payment-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            margin-bottom: 5px;
            font-weight: bold;
            color: #495057;
        }
        
        .form-group input, .form-group select {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .payment-button {
            grid-column: 1 / -1;
            background: #28a745;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .payment-button:hover {
            background: #218838;
            transform: translateY(-2px);
        }
        
        .payment-button.broken {
            background: #dc3545;
            cursor: not-allowed;
        }
        
        .ux-interface {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .navigation-menu {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .nav-item {
            padding: 10px 15px;
            background: #6f42c1;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .nav-item:hover {
            background: #5a32a3;
            transform: scale(1.05);
        }
        
        .content-area {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
        }
        
        .security-interface {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .login-input {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .login-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .login-button:hover {
            background: #0056b3;
        }
        
        .attack-simulator {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .attack-button {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
        }
        
        .performance-interface {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }
        
        .dashboard-item {
            background: #17a2b8;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .dashboard-item:hover {
            background: #138496;
            transform: scale(1.05);
        }
        
        .load-simulator {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .load-button {
            background: #ffc107;
            color: #212529;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .control-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #007bff;
            color: white;
        }
        
        .btn-primary:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
        }
        
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        
        .btn-warning:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-info {
            background: #17a2b8;
            color: white;
        }
        
        .btn-info:hover {
            background: #138496;
            transform: translateY(-2px);
        }
        
        .status-display {
            background: #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .log-entry {
            margin-bottom: 5px;
            padding: 3px 0;
        }
        
        .log-success { color: #28a745; }
        .log-error { color: #dc3545; }
        .log-warning { color: #ffc107; }
        .log-info { color: #17a2b8; }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .metric-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .metric-label {
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .scenarios-grid {
                grid-template-columns: 1fr;
            }
            
            .payment-form {
                grid-template-columns: 1fr;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé¨ ÏÑ∏ÏÖò Î¶¨ÌîåÎ†àÏù¥ ÏãúÎÇòÎ¶¨Ïò§ ÌÖåÏä§Ìä∏</h1>
            <p>Ïã§Ï†ú ÏÇ¨Ïö©Ïûê ÏÉÅÌô©ÏùÑ ÏãúÎÆ¨Î†àÏù¥ÏÖòÌïòÏó¨ ÏÑ∏ÏÖò Î¶¨ÌîåÎ†àÏù¥ Í∏∞Îä•ÏùÑ ÌÖåÏä§Ìä∏Ìï©ÎãàÎã§</p>
        </div>

        <div class="scenarios-grid">
            <!-- 1. Î≤ÑÍ∑∏ Ïû¨ÌòÑ Î∞è ÎîîÎ≤ÑÍπÖ ÏãúÎÇòÎ¶¨Ïò§ -->
            <div class="scenario-card">
                <div class="scenario-header">
                    <span class="scenario-icon">üêõ</span>
                    <div>
                        <div class="scenario-title">Î≤ÑÍ∑∏ Ïû¨ÌòÑ Î∞è ÎîîÎ≤ÑÍπÖ</div>
                    </div>
                </div>
                <div class="scenario-description">
                    "Í≤∞Ï†ú Î≤ÑÌäºÏùÑ ÎàåÎ†ÄÎäîÎç∞ ÏïÑÎ¨¥ Î∞òÏùëÏù¥ ÏóÜÏñ¥Ïöî" - Ïù¥Îü∞ ÏÇ¨Ïö©Ïûê Ïã†Í≥† ÏÉÅÌô©ÏùÑ Ïû¨ÌòÑÌïòÍ≥† ÏÑ∏ÏÖò Î¶¨ÌîåÎ†àÏù¥Î°ú ÏõêÏù∏ÏùÑ Î∂ÑÏÑùÌï©ÎãàÎã§.
                </div>
                
                <div class="test-interface">
                    <div class="interface-label">üõí Í≤∞Ï†ú ÌéòÏù¥ÏßÄ ÏãúÎÆ¨Î†àÏù¥ÏÖò</div>
                    <div class="bug-interface">
                        <div class="payment-form">
                            <div class="form-group">
                                <label>Ïπ¥Îìú Î≤àÌò∏</label>
                                <input type="text" id="cardNumber" placeholder="1234-5678-9012-3456" maxlength="19">
                            </div>
                            <div class="form-group">
                                <label>ÎßåÎ£åÏùº</label>
                                <input type="text" id="expiry" placeholder="MM/YY" maxlength="5">
                            </div>
                            <div class="form-group">
                                <label>CVV</label>
                                <input type="text" id="cvv" placeholder="123" maxlength="3">
                            </div>
                            <div class="form-group">
                                <label>Ïπ¥Îìú ÌÉÄÏûÖ</label>
                                <select id="cardType">
                                    <option value="">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                                    <option value="visa">Visa</option>
                                    <option value="master">MasterCard</option>
                                    <option value="amex">American Express</option>
                                </select>
                            </div>
                            <button class="payment-button" id="paymentButton">üí≥ Í≤∞Ï†úÌïòÍ∏∞ (‚Ç©50,000)</button>
                        </div>
                    </div>
                </div>
                
                <div class="control-buttons">
                    <button class="btn btn-primary" onclick="startBugScenario()">üé¨ Î≤ÑÍ∑∏ ÏãúÎÇòÎ¶¨Ïò§ ÏãúÏûë</button>
                    <button class="btn btn-success" onclick="fixBugScenario()">üîß Î≤ÑÍ∑∏ ÏàòÏ†ï Ï†ÅÏö©</button>
                    <button class="btn btn-warning" onclick="viewBugReplay()">üì∫ ÏÑ∏ÏÖò Î¶¨ÌîåÎ†àÏù¥ Î≥¥Í∏∞</button>
                </div>
                
                <div class="status-display" id="bugStatus"></div>
            </div>

            <!-- 2. UX/UI Í∞úÏÑ† ÏãúÎÇòÎ¶¨Ïò§ -->
            <div class="scenario-card">
                <div class="scenario-header">
                    <span class="scenario-icon">üìä</span>
                    <div>
                        <div class="scenario-title">UX/UI Í∞úÏÑ† Î∂ÑÏÑù</div>
                    </div>
                </div>
                <div class="scenario-description">
                    ÏÇ¨Ïö©ÏûêÍ∞Ä ÌäπÏ†ï ÌéòÏù¥ÏßÄÏóêÏÑú Ìó§Îß§Îäî Ìå®ÌÑ¥ÏùÑ Î∞úÍ≤¨ÌïòÍ≥†, ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Í∞úÏÑ† Î∞©Ìñ•ÏùÑ Í≤∞Ï†ïÌïòÎäî ÏãúÎÇòÎ¶¨Ïò§ÏûÖÎãàÎã§.
                </div>
                
                <div class="test-interface">
                    <div class="interface-label">üß≠ Î≥µÏû°Ìïú ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò ÌéòÏù¥ÏßÄ</div>
                    <div class="ux-interface">
                        <div class="navigation-menu">
                            <button class="nav-item" onclick="navigateTo('home')">Ìôà</button>
                            <button class="nav-item" onclick="navigateTo('products')">ÏÉÅÌíà</button>
                            <button class="nav-item" onclick="navigateTo('categories')">Ïπ¥ÌÖåÍ≥†Î¶¨</button>
                            <button class="nav-item" onclick="navigateTo('brands')">Î∏åÎûúÎìú</button>
                            <button class="nav-item" onclick="navigateTo('deals')">ÌäπÍ∞Ä</button>
                            <button class="nav-item" onclick="navigateTo('support')">Í≥†Í∞ùÏßÄÏõê</button>
                            <button class="nav-item" onclick="navigateTo('account')">ÎÇ¥ Í≥ÑÏ†ï</button>
                            <button class="nav-item" onclick="navigateTo('cart')">Ïû•Î∞îÍµ¨Îãà</button>
                            <button class="nav-item" onclick="navigateTo('wishlist')">Ï∞úÎ™©Î°ù</button>
                            <button class="nav-item" onclick="navigateTo('orders')">Ï£ºÎ¨∏ÎÇ¥Ïó≠</button>
                        </div>
                        <div class="content-area" id="uxContent">
                            Ïó¨Í∏∞ÏóêÏÑú ÏÇ¨Ïö©ÏûêÍ∞Ä ÏõêÌïòÎäî Î©îÎâ¥Î•º Ï∞æÏïÑÎ≥¥ÏÑ∏Ïöî...
                        </div>
                    </div>
                </div>
                
                <div class="control-buttons">
                    <button class="btn btn-primary" onclick="startUXScenario()">üé¨ UX Î∂ÑÏÑù ÏãúÏûë</button>
                    <button class="btn btn-success" onclick="improveNavigation()">‚ú® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Í∞úÏÑ†</button>
                    <button class="btn btn-warning" onclick="viewUXReplay()">üì∫ ÏÑ∏ÏÖò Î¶¨ÌîåÎ†àÏù¥ Î≥¥Í∏∞</button>
                    <button class="btn btn-info" onclick="viewUXAnalytics()">üìà ÏÇ¨Ïö©Ïûê Î∂ÑÏÑù Î≥¥Í∏∞</button>
                </div>
                
                <div class="status-display" id="uxStatus"></div>
            </div>

            <!-- 3. Î≥¥Ïïà ÏÇ¨Í≥† Î∂ÑÏÑù ÏãúÎÇòÎ¶¨Ïò§ -->
            <div class="scenario-card">
                <div class="scenario-header">
                    <span class="scenario-icon">üö®</span>
                    <div>
                        <div class="scenario-title">Î≥¥Ïïà ÏÇ¨Í≥† Î∂ÑÏÑù</div>
                    </div>
                </div>
                <div class="scenario-description">
                    ÏùòÏã¨Ïä§Îü¨Ïö¥ Î°úÍ∑∏Ïù∏ ÏãúÎèÑÎ•º Í∞êÏßÄÌïòÍ≥†, ÏÑ∏ÏÖò Î¶¨ÌîåÎ†àÏù¥Î°ú Ïã§Ï†ú Í≥µÍ≤© Ìå®ÌÑ¥ÏùÑ Î∂ÑÏÑùÌïòÎäî ÏãúÎÇòÎ¶¨Ïò§ÏûÖÎãàÎã§.
                </div>
                
                <div class="test-interface">
                    <div class="interface-label">üîê Î°úÍ∑∏Ïù∏ ÌéòÏù¥ÏßÄ</div>
                    <div class="security-interface">
                        <div class="login-form">
                            <input type="text" class="login-input" id="username" placeholder="ÏÇ¨Ïö©ÏûêÎ™Ö">
                            <input type="password" class="login-input" id="password" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏">
                            <button class="login-button" onclick="attemptLogin()">üîì Î°úÍ∑∏Ïù∏</button>
                        </div>
                        <div class="attack-simulator">
                            <span>Í≥µÍ≤© ÏãúÎÆ¨Î†àÏù¥ÏÖò:</span>
                            <button class="attack-button" onclick="simulateBruteForce()">Î¨¥Ï∞®Î≥Ñ ÎåÄÏûÖ</button>
                            <button class="attack-button" onclick="simulateCredentialStuffing()">ÌÅ¨Î¶¨Îç¥ÏÖú Ïä§ÌÑ∞Ìïë</button>
                            <button class="attack-button" onclick="simulateBot()">Î¥á Í≥µÍ≤©</button>
                        </div>
                    </div>
                </div>
                
                <div class="control-buttons">
                    <button class="btn btn-primary" onclick="startSecurityScenario()">üé¨ Î≥¥Ïïà Î∂ÑÏÑù ÏãúÏûë</button>
                    <button class="btn btn-success" onclick="applySecurity()">üõ°Ô∏è Î≥¥Ïïà Í∞ïÌôî Ï†ÅÏö©</button>
                    <button class="btn btn-warning" onclick="viewSecurityReplay()">üì∫ ÏÑ∏ÏÖò Î¶¨ÌîåÎ†àÏù¥ Î≥¥Í∏∞</button>
                    <button class="btn btn-info" onclick="viewSecurityReport()">üìã Î≥¥Ïïà Î¶¨Ìè¨Ìä∏ Î≥¥Í∏∞</button>
                </div>
                
                <div class="status-display" id="securityStatus"></div>
            </div>

            <!-- 4. ÏÑ±Îä• Î¨∏Ï†ú ÏßÑÎã® ÏãúÎÇòÎ¶¨Ïò§ -->
            <div class="scenario-card">
                <div class="scenario-header">
                    <span class="scenario-icon">‚ö°</span>
                    <div>
                        <div class="scenario-title">ÏÑ±Îä• Î¨∏Ï†ú ÏßÑÎã®</div>
                    </div>
                </div>
                <div class="scenario-description">
                    "ÎåÄÏãúÎ≥¥Îìú ÌéòÏù¥ÏßÄÍ∞Ä ÎÑàÎ¨¥ ÎäêÎ†§Ïöî" - ÏÑ±Îä• Î¨∏Ï†úÎ•º Ïû¨ÌòÑÌïòÍ≥† ÏÑ∏ÏÖò Î¶¨ÌîåÎ†àÏù¥Î°ú Î≥ëÎ™© ÏßÄÏ†êÏùÑ Ï∞æÎäî ÏãúÎÇòÎ¶¨Ïò§ÏûÖÎãàÎã§.
                </div>
                
                <div class="test-interface">
                    <div class="interface-label">üìä ÎäêÎ¶∞ ÎåÄÏãúÎ≥¥Îìú ÌéòÏù¥ÏßÄ</div>
                    <div class="performance-interface">
                        <div class="dashboard-grid">
                            <div class="dashboard-item" onclick="loadChart('sales')">üí∞ Îß§Ï∂ú Ï∞®Ìä∏</div>
                            <div class="dashboard-item" onclick="loadChart('users')">üë• ÏÇ¨Ïö©Ïûê ÌÜµÍ≥Ñ</div>
                            <div class="dashboard-item" onclick="loadChart('performance')">‚ö° ÏÑ±Îä• ÏßÄÌëú</div>
                            <div class="dashboard-item" onclick="loadChart('traffic')">üåê Ìä∏ÎûòÌîΩ Î∂ÑÏÑù</div>
                            <div class="dashboard-item" onclick="loadChart('errors')">üö® Ïò§Î•ò ÌòÑÌô©</div>
                            <div class="dashboard-item" onclick="loadChart('system')">üñ•Ô∏è ÏãúÏä§ÌÖú ÏÉÅÌÉú</div>
                        </div>
                        <div class="load-simulator">
                            <span>Î∂ÄÌïò ÏãúÎÆ¨Î†àÏù¥ÏÖò:</span>
                            <button class="load-button" onclick="simulateHighLoad()">ÎÜíÏùÄ Î∂ÄÌïò</button>
                            <button class="load-button" onclick="simulateSlowQuery()">ÎäêÎ¶∞ ÏøºÎ¶¨</button>
                            <button class="load-button" onclick="simulateMemoryLeak()">Î©îÎ™®Î¶¨ ÎàÑÏàò</button>
                        </div>
                    </div>
                </div>
                
                <div class="control-buttons">
                    <button class="btn btn-primary" onclick="startPerformanceScenario()">üé¨ ÏÑ±Îä• Î∂ÑÏÑù ÏãúÏûë</button>
                    <button class="btn btn-success" onclick="optimizePerformance()">üöÄ ÏÑ±Îä• ÏµúÏ†ÅÌôî</button>
                    <button class="btn btn-warning" onclick="viewPerformanceReplay()">üì∫ ÏÑ∏ÏÖò Î¶¨ÌîåÎ†àÏù¥ Î≥¥Í∏∞</button>
                    <button class="btn btn-info" onclick="viewPerformanceReport()">üìä ÏÑ±Îä• Î¶¨Ìè¨Ìä∏ Î≥¥Í∏∞</button>
                </div>
                
                <div class="status-display" id="performanceStatus"></div>
            </div>
        </div>

        <!-- ÏÑ∏ÏÖò ÏÉÅÌÉú ÌëúÏãú -->
        <div class="session-status-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px;">
            <div class="session-status-card" style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                <h3 style="color: #2c3e50; margin-bottom: 15px;">üé¨ ÌôúÏÑ± ÏÑ∏ÏÖò ÏÉÅÌÉú</h3>
                <div id="sessionStatusList" style="font-family: 'Courier New', monospace; font-size: 0.9rem;">
                    <div style="color: #666;">ÏÑ∏ÏÖòÏù¥ ÏãúÏûëÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§</div>
                </div>
            </div>
        </div>

        <!-- Ïã§ÏãúÍ∞Ñ Î©îÌä∏Î¶≠ ÌëúÏãú -->
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-value" id="sessionCount">0</div>
                <div class="metric-label">ÏÉùÏÑ±Îêú ÏÑ∏ÏÖò Ïàò</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="eventCount">0</div>
                <div class="metric-label">Í∏∞Î°ùÎêú Ïù¥Î≤§Ìä∏ Ïàò</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="errorCount">0</div>
                <div class="metric-label">Î∞úÍ≤¨Îêú Ïù¥Ïäà Ïàò</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="insightCount">0</div>
                <div class="metric-label">ÎèÑÏ∂úÎêú Ïù∏ÏÇ¨Ïù¥Ìä∏</div>
            </div>
        </div>
    </div>

    <script>
        // Ï†ÑÏó≠ Î≥ÄÏàò
        let currentScenario = null;
        let sessionData = {
            sessions: 0,
            events: 0,
            errors: 0,
            insights: 0
        };
        
        // ÏÑ∏ÏÖò ÎÖπÌôî Ï†ÑÏó≠ Î≥ÄÏàò - ÏãúÎÇòÎ¶¨Ïò§Î≥Ñ ÌÜµÌï© Í¥ÄÎ¶¨
        let scenarioSessions = {
            bug_payment: null,
            ux_navigation: null,
            security_attack: null,
            performance_slow: null
        };
        let activeScenario = null;

        // ÏÑ∏ÏÖò ÎÖπÌôî Í¥ÄÎ†® Ìï®ÏàòÎì§ - ÌÜµÌï© Í¥ÄÎ¶¨ Î≤ÑÏ†Ñ
        async function startSessionRecording(scenario) {
            try {
                // Í∏∞Ï°¥ ÏÑ∏ÏÖòÏù¥ ÏûàÏúºÎ©¥ Ï¢ÖÎ£å
                if (scenarioSessions[scenario]) {
                    await endSessionRecording(scenarioSessions[scenario], 'scenario_restart');
                }
                
                const response = await fetch('/api/session-replay/start-session', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        scenario: scenario,
                        userAgent: navigator.userAgent,
                        ipAddress: 'unified_test_session'
                    })
                });
                
                const data = await response.json();
                if (data.success) {
                    scenarioSessions[scenario] = data.sessionId;
                    activeScenario = scenario;
                    updateSessionStatus(); // ÏÑ∏ÏÖò ÏÉÅÌÉú UI ÏóÖÎç∞Ïù¥Ìä∏
                    console.log(`üé¨ ÌÜµÌï© ÏÑ∏ÏÖò ÏãúÏûë [${scenario}]:`, data.sessionId);
                    return data.sessionId;
                }
                throw new Error(data.error || 'ÏÑ∏ÏÖò ÏãúÏûë Ïã§Ìå®');
            } catch (error) {
                console.error('ÏÑ∏ÏÖò ÎÖπÌôî ÏãúÏûë Ïã§Ìå®:', error);
                return null;
            }
        }

        async function recordEvent(sessionId, eventData) {
            if (!sessionId) return false;
            
            try {
                const response = await fetch('/api/session-replay/add-event', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        sessionId: sessionId,
                        eventData: eventData
                    })
                });
                
                const data = await response.json();
                return data.success;
            } catch (error) {
                console.error('Ïù¥Î≤§Ìä∏ Í∏∞Î°ù Ïã§Ìå®:', error);
                return false;
            }
        }

        async function endSessionRecording(sessionId, reason = 'test_completed') {
            if (!sessionId) return false;
            
            try {
                const response = await fetch('/api/session-replay/end-session', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        sessionId: sessionId,
                        reason: reason
                    })
                });
                
                const data = await response.json();
                if (data.success) {
                    // Ï¢ÖÎ£åÎêú ÏÑ∏ÏÖòÏùÑ ÏãúÎÇòÎ¶¨Ïò§ Î™©Î°ùÏóêÏÑú Ï†úÍ±∞
                    for (let scenario in scenarioSessions) {
                        if (scenarioSessions[scenario] === sessionId) {
                            scenarioSessions[scenario] = null;
                            break;
                        }
                    }
                    updateSessionStatus(); // ÏÑ∏ÏÖò ÏÉÅÌÉú UI ÏóÖÎç∞Ïù¥Ìä∏
                    console.log(`‚èπÔ∏è ÌÜµÌï© ÏÑ∏ÏÖò Ï¢ÖÎ£å: ${sessionId} (${reason})`);
                    return data.session;
                }
                return false;
            } catch (error) {
                console.error('ÏÑ∏ÏÖò Ï¢ÖÎ£å Ïã§Ìå®:', error);
                return false;
            }
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // ÏÑ∏ÏÖò ÏÉÅÌÉú ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
        function updateSessionStatus() {
            const statusList = document.getElementById('sessionStatusList');
            statusList.innerHTML = '';
            
            let hasActiveSessions = false;
            
            for (let [scenario, sessionId] of Object.entries(scenarioSessions)) {
                if (sessionId) {
                    hasActiveSessions = true;
                    const statusItem = document.createElement('div');
                    statusItem.style.cssText = 'margin-bottom: 8px; padding: 8px; background: #e3f2fd; border-radius: 4px; border-left: 4px solid #2196f3;';
                    
                    const scenarioNames = {
                        bug_payment: 'üêõ Î≤ÑÍ∑∏ Ïû¨ÌòÑ',
                        ux_navigation: 'üìä UX Î∂ÑÏÑù',
                        security_attack: 'üö® Î≥¥Ïïà Î∂ÑÏÑù',
                        performance_slow: '‚ö° ÏÑ±Îä• ÏßÑÎã®'
                    };
                    
                    statusItem.innerHTML = `
                        <div style="font-weight: bold; color: #1976d2;">${scenarioNames[scenario] || scenario}</div>
                        <div style="font-size: 0.8em; color: #666;">ÏÑ∏ÏÖò ID: ${sessionId.substring(0, 8)}...</div>
                        <div style="font-size: 0.8em; color: #4caf50;">‚óè ÌôúÏÑ± ÏÉÅÌÉú</div>
                    `;
                    
                    statusList.appendChild(statusItem);
                }
            }
            
            if (!hasActiveSessions) {
                const noSessionDiv = document.createElement('div');
                noSessionDiv.style.color = '#666';
                noSessionDiv.textContent = 'ÌôúÏÑ± ÏÑ∏ÏÖòÏù¥ ÏóÜÏäµÎãàÎã§';
                statusList.appendChild(noSessionDiv);
            }
        }
        
        // ÏõπÏÜåÏºì Ïó∞Í≤∞
        const ws = new WebSocket(`ws://${window.location.host}`);
        
        ws.onmessage = function(event) {
            const data = JSON.parse(event.data);
            updateMetrics(data);
        };

        // Î©îÌä∏Î¶≠ ÏóÖÎç∞Ïù¥Ìä∏
        function updateMetrics(data) {
            if (data.sessionCount !== undefined) {
                document.getElementById('sessionCount').textContent = data.sessionCount;
            }
            if (data.eventCount !== undefined) {
                document.getElementById('eventCount').textContent = data.eventCount;
            }
            if (data.errorCount !== undefined) {
                document.getElementById('errorCount').textContent = data.errorCount;
            }
            if (data.insightCount !== undefined) {
                document.getElementById('insightCount').textContent = data.insightCount;
            }
        }

        // Î°úÍ∑∏ Ï∂îÍ∞Ä Ìï®Ïàò
        function addLog(containerId, message, type = 'info') {
            const container = document.getElementById(containerId);
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`;
            container.appendChild(logEntry);
            container.scrollTop = container.scrollHeight;
        }

        // 1. Î≤ÑÍ∑∏ Ïû¨ÌòÑ ÏãúÎÇòÎ¶¨Ïò§ - ÌÜµÌï© ÏÑ∏ÏÖò Î≤ÑÏ†Ñ
        async function startBugScenario() {
            currentScenario = 'bug';
            const sessionId = await startSessionRecording('bug_payment');
            
            addLog('bugStatus', 'üé¨ ÌÜµÌï© Î≤ÑÍ∑∏ ÏãúÎÇòÎ¶¨Ïò§ ÏãúÏûë (Îã®Ïùº ÏÑ∏ÏÖòÏúºÎ°ú Í¥ÄÎ¶¨)', 'info');
            addLog('bugStatus', 'üí≥ Í≤∞Ï†ú ÌéòÏù¥ÏßÄ Î°úÎî©...', 'info');
            
            if (!sessionId) {
                addLog('bugStatus', '‚ùå ÏÑ∏ÏÖò ÎÖπÌôî ÏãúÏûë Ïã§Ìå®', 'error');
                return;
            }
            
            addLog('bugStatus', `üìã ÏÑ∏ÏÖò ID: ${sessionId.substring(0, 8)}...`, 'info');

            // Ïã§Ï†ú ÏÇ¨Ïö©Ïûê Ïù¥Î≤§Ìä∏Îì§ÏùÑ ÏàúÏ∞®Ï†ÅÏúºÎ°ú Í∏∞Î°ù
            await recordEvent(sessionId, {
                type: 'page_load',
                page_url: '/checkout',
                page_title: 'Í≤∞Ï†ú ÌéòÏù¥ÏßÄ',
                load_time: 2300
            });
            
            await sleep(1500);
            await recordEvent(sessionId, {
                type: 'form_input',
                element_id: 'cardNumber',
                element_type: 'input',
                value_masked: '****-****-****-1234',
                x: 450, y: 320
            });
            addLog('bugStatus', 'üìù Ïã†Ïö©Ïπ¥Îìú Î≤àÌò∏ ÏûÖÎ†• ÏôÑÎ£å', 'info');

            await sleep(800);
            await recordEvent(sessionId, {
                type: 'form_input',
                element_id: 'expiry',
                element_type: 'input',
                value_masked: '12/25',
                x: 600, y: 320
            });
            addLog('bugStatus', 'üìÖ Ïú†Ìö®Í∏∞Í∞Ñ ÏûÖÎ†• ÏôÑÎ£å', 'info');

            await sleep(800);
            await recordEvent(sessionId, {
                type: 'form_input',
                element_id: 'cvv',
                element_type: 'input',
                value_masked: '***',
                x: 750, y: 320
            });
            addLog('bugStatus', 'üîê CVV ÏûÖÎ†• ÏôÑÎ£å', 'info');

            await sleep(1000);
            await recordEvent(sessionId, {
                type: 'click',
                element_id: 'paymentButton',
                element_type: 'button',
                element_text: 'Í≤∞Ï†úÌïòÍ∏∞',
                x: 550, y: 420
            });
            addLog('bugStatus', 'üëÜ Í≤∞Ï†ú Î≤ÑÌäº ÌÅ¥Î¶≠', 'info');

            // Î≤ÑÍ∑∏ ÏÉÅÌô© ÏãúÎÆ¨Î†àÏù¥ÏÖò
            setTimeout(async () => {
                const button = document.getElementById('paymentButton');
                button.classList.add('broken');
                button.textContent = '‚ùå Í≤∞Ï†ú Ï≤òÎ¶¨ Ï§ë... (ÏùëÎãµÏóÜÏùå)';
                button.disabled = true;
                
                await recordEvent(sessionId, {
                    type: 'javascript_error',
                    error_message: 'Cannot read property validate of undefined',
                    error_stack: 'at PaymentValidator.validate (payment.js:245:12)',
                    error_line: 245,
                    error_file: '/static/js/payment.js'
                });
                
                addLog('bugStatus', 'üêõ Î≤ÑÍ∑∏ Î∞úÏÉù: JavaScript Ïò§Î•ò - payment.validate() Ìï®Ïàò Ïã§Ìå®', 'error');
                
                // ÏÇ¨Ïö©Ïûê Ïû¨ÏãúÎèÑ ÏãúÎÆ¨Î†àÏù¥ÏÖò
                await sleep(2000);
                await recordEvent(sessionId, {
                    type: 'click',
                    element_id: 'paymentButton',
                    element_type: 'button',
                    element_text: 'Í≤∞Ï†úÌïòÍ∏∞',
                    x: 550, y: 420,
                    notes: 'Îëê Î≤àÏß∏ ÌÅ¥Î¶≠ ÏãúÎèÑ'
                });
                addLog('bugStatus', 'üîÑ ÏÇ¨Ïö©Ïûê Ïû¨ÏãúÎèÑ: Î≤ÑÌäº Îëê Î≤àÏß∏ ÌÅ¥Î¶≠', 'warning');

                await sleep(3000);
                await recordEvent(sessionId, {
                    type: 'page_unload',
                    page_url: '/checkout',
                    reason: 'user_frustration'
                });
                
                await endSessionRecording(sessionId, 'payment_error');
                addLog('bugStatus', 'üìä ÏÑ∏ÏÖò ÏôÑÎ£å: Í≤∞Ï†ú Ïã§Ìå®Î°ú Ïù∏Ìïú ÏÇ¨Ïö©Ïûê Ïù¥ÌÉà', 'error');
                addLog('bugStatus', `‚úÖ ÏÑ∏ÏÖò Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû• ÏôÑÎ£å (ID: ${sessionId})`, 'success');
                
                sessionData.sessions++;
                sessionData.events += 7;
                sessionData.errors++;
                updateMetrics(sessionData);
            }, 2000);
        }

        function fixBugScenario() {
            addLog('bugStatus', 'üîß Î≤ÑÍ∑∏ ÏàòÏ†ï Ï†ÅÏö© Ï§ë...', 'warning');
            
            setTimeout(() => {
                const button = document.getElementById('paymentButton');
                button.classList.remove('broken');
                button.textContent = '‚úÖ Í≤∞Ï†ú ÏôÑÎ£å!';
                button.disabled = false;
                button.style.background = '#28a745';
                addLog('bugStatus', '‚úÖ Î≤ÑÍ∑∏ ÏàòÏ†ï ÏôÑÎ£å: Í≤∞Ï†ú Í∏∞Îä• Ï†ïÏÉÅÌôî', 'success');
                
                // ÏàòÏ†ï ÌõÑ ÏÑ∏ÏÖò Îç∞Ïù¥ÌÑ∞
                sendSessionData('bug_fixed', {
                    event_type: 'payment_success',
                    user_action: 'click_payment_button',
                    fix_applied: true,
                    response_time: '250ms'
                });
                
                sessionData.insights++;
                updateMetrics(sessionData);
            }, 1500);
        }

        function viewBugReplay() {
            addLog('bugStatus', 'üì∫ ÏÑ∏ÏÖò Î¶¨ÌîåÎ†àÏù¥ ÌîåÎ†àÏù¥Ïñ¥Î°ú Ïù¥ÎèôÌï©ÎãàÎã§...', 'info');
            setTimeout(() => {
                window.open('/session-replay-player', '_blank');
            }, 1000);
        }

        // 2. UX/UI Í∞úÏÑ† ÏãúÎÇòÎ¶¨Ïò§
        function navigateTo(page) {
            const content = document.getElementById('uxContent');
            const pages = {
                'home': 'üè† ÌôàÌéòÏù¥ÏßÄ - Î©îÏù∏ ÏΩòÌÖêÏ∏†',
                'products': 'üì¶ ÏÉÅÌíà Î™©Î°ù - Ï†ÑÏ≤¥ ÏÉÅÌíà',
                'categories': 'üìÇ Ïπ¥ÌÖåÍ≥†Î¶¨ - ÏÉÅÌíà Î∂ÑÎ•ò',
                'brands': 'üè∑Ô∏è Î∏åÎûúÎìú - Ï†úÏ°∞ÏÇ¨Î≥Ñ',
                'deals': 'üéâ ÌäπÍ∞Ä ÏÉÅÌíà - Ìï†Ïù∏ Ï§ë',
                'support': 'üéß Í≥†Í∞ùÏßÄÏõê - Î¨∏ÏùòÌïòÍ∏∞',
                'account': 'üë§ ÎÇ¥ Í≥ÑÏ†ï - ÌîÑÎ°úÌïÑ',
                'cart': 'üõí Ïû•Î∞îÍµ¨Îãà - Îã¥ÏùÄ ÏÉÅÌíà',
                'wishlist': '‚ù§Ô∏è Ï∞úÎ™©Î°ù - Í¥ÄÏã¨ ÏÉÅÌíà',
                'orders': 'üìã Ï£ºÎ¨∏ÎÇ¥Ïó≠ - Íµ¨Îß§ Í∏∞Î°ù'
            };
            
            content.textContent = pages[page] || 'ÌéòÏù¥ÏßÄÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§';
            
            // Ïã§Ï†ú ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏Î•º ÏÑ∏ÏÖòÏóê Í∏∞Î°ù (UX ÏãúÎÇòÎ¶¨Ïò§Ïö©)
            if (scenarioSessions['ux_navigation']) {
                const button = event.target;
                const rect = button.getBoundingClientRect();
                recordEvent(scenarioSessions['ux_navigation'], {
                    type: 'click',
                    element_id: button.id || 'nav-' + page,
                    element_type: 'button',
                    element_text: button.textContent,
                    x: Math.round(rect.left + rect.width / 2),
                    y: Math.round(rect.top + rect.height / 2),
                    page_url: '/products',
                    timestamp: Date.now()
                });
            }
            
            // ÏÇ¨Ïö©Ïûê ÌñâÎèô Í∏∞Î°ù
            sendSessionData('navigation', {
                event_type: 'page_view',
                page: page,
                user_action: 'click_navigation',
                timestamp: new Date().toISOString()
            });
            
            sessionData.events++;
            updateMetrics(sessionData);
        }

        async function startUXScenario() {
            currentScenario = 'ux';
            const sessionId = await startSessionRecording('ux_navigation');
            
            addLog('uxStatus', 'üé¨ ÌÜµÌï© UX Î∂ÑÏÑù ÏãúÎÇòÎ¶¨Ïò§ ÏãúÏûë', 'info');
            addLog('uxStatus', 'üìä ÏÇ¨Ïö©Ïûê ÌñâÎèô Ìå®ÌÑ¥ ÏàòÏßë Ï§ë...', 'info');
            
            if (!sessionId) {
                addLog('uxStatus', '‚ùå ÏÑ∏ÏÖò ÎÖπÌôî ÏãúÏûë Ïã§Ìå®', 'error');
                return;
            }
            
            addLog('uxStatus', `üìã ÏÑ∏ÏÖò ID: ${sessionId.substring(0, 8)}...`, 'info');
            
            // ÌéòÏù¥ÏßÄ Î°úÎìú Ïù¥Î≤§Ìä∏ Í∏∞Î°ù
            await recordEvent(sessionId, {
                type: 'page_load',
                page_url: '/products',
                page_title: 'ÏÉÅÌíà Î™©Î°ù ÌéòÏù¥ÏßÄ',
                load_time: 1800
            });
            
            // ÏÇ¨Ïö©Ïûê Ìó§Îß§Îäî Ìå®ÌÑ¥ ÏãúÎÆ¨Î†àÏù¥ÏÖò
            setTimeout(async () => {
                // Ïó¨Îü¨ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò ÌÅ¥Î¶≠ ÏãúÎÆ¨Î†àÏù¥ÏÖò
                const navItems = ['categories', 'brands', 'deals', 'products', 'support', 'account', 'cart'];
                for (let i = 0; i < navItems.length; i++) {
                    await sleep(500);
                    await recordEvent(sessionId, {
                        type: 'click',
                        element_id: 'nav-' + navItems[i],
                        element_type: 'button',
                        element_text: navItems[i],
                        x: 200 + i * 50, y: 100,
                        notes: 'navigation_confusion'
                    });
                }
                
                addLog('uxStatus', '‚ö†Ô∏è Ìå®ÌÑ¥ Î∞úÍ≤¨: ÏÇ¨Ïö©ÏûêÍ∞Ä Î©îÎâ¥ÏóêÏÑú 7Ìöå ÌÅ¥Î¶≠ ÌõÑ Ïù¥ÌÉà', 'warning');
                addLog('uxStatus', 'üìà Î∂ÑÏÑù: Ï∞æÎäî Î©îÎâ¥Î•º Ï∞æÏßÄ Î™ªÌï¥ ÌòºÎûÄ', 'warning');
                
                // Ïù¥ÌÉà Ïù¥Î≤§Ìä∏ Í∏∞Î°ù
                await recordEvent(sessionId, {
                    type: 'page_unload',
                    page_url: '/products',
                    reason: 'user_confusion'
                });
                
                sessionData.sessions++;
                sessionData.events += 8;
                sessionData.errors++;
                updateMetrics(sessionData);
                
                // ÏÑ∏ÏÖò ÏùºÏãú Ï¢ÖÎ£å (Í∞úÏÑ† ÌÖåÏä§Ìä∏Î•º ÏúÑÌï¥)
                await endSessionRecording(sessionId, 'ux_analysis_complete');
                addLog('uxStatus', '‚úÖ UX Î∂ÑÏÑù ÏôÑÎ£å - ÏÑ∏ÏÖò Ï¢ÖÎ£å', 'success');
            }, 2000);
        }

        function improveNavigation() {
            addLog('uxStatus', '‚ú® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Í∞úÏÑ† Ï†ÅÏö© Ï§ë...', 'warning');
            
            // Î©îÎâ¥ Ìï≠Î™©Îì§ÏùÑ Îçî ÎÖºÎ¶¨Ï†ÅÏúºÎ°ú Í∑∏Î£πÌôî
            setTimeout(() => {
                addLog('uxStatus', '‚úÖ Í∞úÏÑ† ÏôÑÎ£å: Î©îÎâ¥Î•º 3Í∞ú Í∑∏Î£πÏúºÎ°ú Ïû¨Ï†ïÎ†¨', 'success');
                addLog('uxStatus', 'üìä ÏòàÏÉÅ Ìö®Í≥º: ÌÅ¥Î¶≠ Ïàò 50% Í∞êÏÜå, Ïù¥ÌÉàÎ•† 30% Í∞úÏÑ†', 'success');
                
                sessionData.insights++;
                updateMetrics(sessionData);
            }, 2000);
        }

        function viewUXReplay() {
            const sessionId = scenarioSessions['ux_navigation'];
            if (sessionId) {
                addLog('uxStatus', 'üì∫ UX Î∂ÑÏÑù ÏÑ∏ÏÖò Î¶¨ÌîåÎ†àÏù¥Î°ú Ïù¥ÎèôÌï©ÎãàÎã§...', 'info');
                addLog('uxStatus', `üìã ÏÑ∏ÏÖò ID: ${sessionId.substring(0, 8)}...`, 'info');
                setTimeout(() => {
                    const url = `/session-replay-player?scenario=ux_navigation&session=${sessionId}`;
                    window.open(url, '_blank');
                }, 1000);
            } else {
                addLog('uxStatus', '‚ö†Ô∏è Î®ºÏ†Ä UX Î∂ÑÏÑù ÏãúÎÇòÎ¶¨Ïò§Î•º Ïã§ÌñâÌïòÏÑ∏Ïöî', 'warning');
            }
        }

        function viewUXAnalytics() {
            addLog('uxStatus', 'üìà ÏÇ¨Ïö©Ïûê Î∂ÑÏÑù Í≤∞Í≥º ÌëúÏãú', 'info');
            addLog('uxStatus', '‚îå‚îÄ ÌèâÍ∑† ÌÅ¥Î¶≠ Ïàò: 7.2Ìöå ‚Üí 3.4Ìöå', 'info');
            addLog('uxStatus', '‚îú‚îÄ Ïù¥ÌÉàÎ•†: 45% ‚Üí 28%', 'info');
            addLog('uxStatus', '‚îú‚îÄ ÎßåÏ°±ÎèÑ: 6.2/10 ‚Üí 8.7/10', 'info');
            addLog('uxStatus', '‚îî‚îÄ Ï†ÑÌôòÏú®: 12% ‚Üí 18%', 'info');
        }

        // 3. Î≥¥Ïïà Î∂ÑÏÑù ÏãúÎÇòÎ¶¨Ïò§
        function attemptLogin() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // Ïã§Ï†ú Î°úÍ∑∏Ïù∏ ÏãúÎèÑ Ïù¥Î≤§Ìä∏Î•º ÏÑ∏ÏÖòÏóê Í∏∞Î°ù
            if (scenarioSessions['security_attack']) {
                recordEvent(scenarioSessions['security_attack'], {
                    type: 'login_attempt',
                    username: username,
                    password_masked: password ? '***' + password.slice(-1) : '',
                    ip_address: '192.168.1.100',
                    user_agent: navigator.userAgent,
                    page_url: '/login',
                    x: 400, y: 300,
                    success: username && password ? true : false,
                    timestamp: Date.now()
                });
            }
            
            if (username && password) {
                addLog('securityStatus', `üîì Î°úÍ∑∏Ïù∏ ÏãúÎèÑ: ${username}`, 'info');
                
                // Ï†ïÏÉÅ Î°úÍ∑∏Ïù∏ ÏãúÎÆ¨Î†àÏù¥ÏÖò
                setTimeout(() => {
                    addLog('securityStatus', '‚úÖ Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ', 'success');
                }, 1000);
            } else {
                addLog('securityStatus', '‚ùå ÏÇ¨Ïö©ÏûêÎ™ÖÍ≥º ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî', 'error');
            }
        }

        function simulateBruteForce() {
            if (scenarioSessions['security_attack']) {
                simulateBruteForceWithSession(scenarioSessions['security_attack']);
            } else {
                addLog('securityStatus', '‚ö†Ô∏è Î≥¥Ïïà ÏãúÎÇòÎ¶¨Ïò§Î•º Î®ºÏ†Ä ÏãúÏûëÌïòÏÑ∏Ïöî', 'warning');
            }
        }
        
        async function simulateBruteForceWithSession(sessionId) {
            addLog('securityStatus', 'üö® Î¨¥Ï∞®Î≥Ñ ÎåÄÏûÖ Í≥µÍ≤© ÏãúÎÆ¨Î†àÏù¥ÏÖò ÏãúÏûë', 'error');
            
            const commonPasswords = ['123456', 'password', 'admin', '123456789', 'qwerty'];
            let attemptCount = 0;
            
            const interval = setInterval(async () => {
                attemptCount++;
                addLog('securityStatus', `üî¥ ÏãúÎèÑ ${attemptCount}: admin/${commonPasswords[attemptCount % 5]} - Ïã§Ìå®`, 'error');
                
                // ÏÑ∏ÏÖòÏóê Î°úÍ∑∏Ïù∏ ÏãúÎèÑ Ïù¥Î≤§Ìä∏ Í∏∞Î°ù
                await recordEvent(sessionId, {
                    type: 'login_attempt',
                    username: 'admin',
                    password_masked: commonPasswords[attemptCount % 5],
                    attempt_count: attemptCount,
                    ip_address: '192.168.1.100',
                    user_agent: 'automated_bot',
                    success: false,
                    x: 400, y: 300
                });
                
                sessionData.events++;
                sessionData.errors++;
                updateMetrics(sessionData);
                
                if (attemptCount >= 10) {
                    clearInterval(interval);
                    addLog('securityStatus', 'üõ°Ô∏è Í≥ÑÏ†ï Ïû†Í∏à: 10Ìöå Ïã§Ìå®Î°ú Ïù∏Ìïú ÏûêÎèô Ï∞®Îã®', 'warning');
                    
                    // Í≥ÑÏ†ï Ïû†Í∏à Ïù¥Î≤§Ìä∏ Í∏∞Î°ù
                    await recordEvent(sessionId, {
                        type: 'account_lockout',
                        reason: 'excessive_failed_attempts',
                        attempts: attemptCount,
                        lockout_duration: '1 hour'
                    });
                    
                    // Í≥µÍ≤© ÏãúÎÇòÎ¶¨Ïò§ Ï¢ÖÎ£å
                    setTimeout(async () => {
                        await endSessionRecording(sessionId, 'security_attack_blocked');
                        addLog('securityStatus', '‚úÖ Î≥¥Ïïà Î∂ÑÏÑù ÏôÑÎ£å - ÏÑ∏ÏÖò Ï¢ÖÎ£å', 'success');
                    }, 2000);
                }
            }, 500);
        }

        function simulateCredentialStuffing() {
            addLog('securityStatus', 'üö® ÌÅ¨Î¶¨Îç¥ÏÖú Ïä§ÌÑ∞Ìïë Í≥µÍ≤© ÏãúÎÆ¨Î†àÏù¥ÏÖò', 'error');
            addLog('securityStatus', 'üìä Ïú†Ï∂úÎêú Í≥ÑÏ†ï Ï†ïÎ≥¥Î°ú ÎåÄÎüâ Î°úÍ∑∏Ïù∏ ÏãúÎèÑ Í∞êÏßÄ', 'error');
            
            sessionData.sessions++;
            sessionData.events += 50;
            sessionData.errors += 5;
            updateMetrics(sessionData);
        }

        function simulateBot() {
            addLog('securityStatus', 'ü§ñ Î¥á Í≥µÍ≤© ÏãúÎÆ¨Î†àÏù¥ÏÖò', 'error');
            addLog('securityStatus', 'üîç ÎπÑÏ†ïÏÉÅÏ†ÅÏù∏ ÌñâÎèô Ìå®ÌÑ¥ Í∞êÏßÄ: Ï¥àÎãπ 10Ìöå ÏöîÏ≤≠', 'error');
            
            sessionData.events += 20;
            sessionData.errors += 2;
            updateMetrics(sessionData);
        }

        async function startSecurityScenario() {
            currentScenario = 'security';
            const sessionId = await startSessionRecording('security_attack');
            
            addLog('securityStatus', 'üé¨ ÌÜµÌï© Î≥¥Ïïà Î∂ÑÏÑù ÏãúÎÇòÎ¶¨Ïò§ ÏãúÏûë', 'info');
            addLog('securityStatus', 'üîç ÏùòÏã¨Ïä§Îü¨Ïö¥ ÌôúÎèô Î™®ÎãàÌÑ∞ÎßÅ ÌôúÏÑ±Ìôî', 'info');
            
            if (!sessionId) {
                addLog('securityStatus', '‚ùå ÏÑ∏ÏÖò ÎÖπÌôî ÏãúÏûë Ïã§Ìå®', 'error');
                return;
            }
            
            addLog('securityStatus', `üìã ÏÑ∏ÏÖò ID: ${sessionId.substring(0, 8)}...`, 'info');
            
            // ÌéòÏù¥ÏßÄ Î°úÎìú Ïù¥Î≤§Ìä∏ Í∏∞Î°ù
            await recordEvent(sessionId, {
                type: 'page_load',
                page_url: '/login',
                page_title: 'Î°úÍ∑∏Ïù∏ ÌéòÏù¥ÏßÄ',
                load_time: 1200
            });
            
            // Î¨¥Ï∞®Î≥Ñ ÎåÄÏûÖ Í≥µÍ≤© ÏãúÎÆ¨Î†àÏù¥ÏÖòÏùÑ ÏûêÎèôÏúºÎ°ú ÏãúÏûë
            setTimeout(() => {
                simulateBruteForceWithSession(sessionId);
            }, 1000);
            
            sessionData.sessions++;
            updateMetrics(sessionData);
        }

        function applySecurity() {
            addLog('securityStatus', 'üõ°Ô∏è Î≥¥Ïïà Í∞ïÌôî Ï°∞Ïπò Ï†ÅÏö©', 'warning');
            addLog('securityStatus', '‚úÖ CAPTCHA ÌôúÏÑ±Ìôî', 'success');
            addLog('securityStatus', '‚úÖ Î°úÍ∑∏Ïù∏ ÏãúÎèÑ Ï†úÌïú (5Ìöå/ÏãúÍ∞Ñ)', 'success');
            addLog('securityStatus', '‚úÖ ÏùòÏã¨ IP ÏûêÎèô Ï∞®Îã®', 'success');
            
            sessionData.insights++;
            updateMetrics(sessionData);
        }

        function viewSecurityReplay() {
            const sessionId = scenarioSessions['security_attack'];
            if (sessionId) {
                addLog('securityStatus', 'üì∫ Î≥¥Ïïà ÏÇ¨Í≥† Î∂ÑÏÑù ÏÑ∏ÏÖò Î¶¨ÌîåÎ†àÏù¥Î°ú Ïù¥ÎèôÌï©ÎãàÎã§...', 'info');
                addLog('securityStatus', `üìã ÏÑ∏ÏÖò ID: ${sessionId.substring(0, 8)}...`, 'info');
                setTimeout(() => {
                    const url = `/session-replay-player?scenario=security_attack&session=${sessionId}`;
                    window.open(url, '_blank');
                }, 1000);
            } else {
                addLog('securityStatus', '‚ö†Ô∏è Î®ºÏ†Ä Î≥¥Ïïà Î∂ÑÏÑù ÏãúÎÇòÎ¶¨Ïò§Î•º Ïã§ÌñâÌïòÏÑ∏Ïöî', 'warning');
            }
        }

        function viewSecurityReport() {
            addLog('securityStatus', 'üìã Î≥¥Ïïà Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏', 'info');
            addLog('securityStatus', '‚îå‚îÄ ÌÉêÏßÄÎêú Í≥µÍ≤©: Î¨¥Ï∞®Î≥Ñ ÎåÄÏûÖ Í≥µÍ≤©', 'info');
            addLog('securityStatus', '‚îú‚îÄ Í≥µÍ≤© ÌöüÏàò: 247Ìöå', 'info');
            addLog('securityStatus', '‚îú‚îÄ Ï∞®Îã®Îêú IP: 15Í∞ú', 'info');
            addLog('securityStatus', '‚îî‚îÄ Î≥¥Ïïà Í∞ïÌôî ÌõÑ Í≥µÍ≤© Í∞êÏÜå: 95%', 'info');
        }

        // 4. ÏÑ±Îä• ÏßÑÎã® ÏãúÎÇòÎ¶¨Ïò§
        function loadChart(type) {
            // Ïã§Ï†ú ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏Î•º ÏÑ∏ÏÖòÏóê Í∏∞Î°ù (ÏÑ±Îä• ÏãúÎÇòÎ¶¨Ïò§Ïö©)
            if (scenarioSessions['performance_slow']) {
                const button = event.target;
                const rect = button.getBoundingClientRect();
                recordEvent(scenarioSessions['performance_slow'], {
                    type: 'click',
                    element_id: 'chart-' + type,
                    element_type: 'dashboard_item',
                    element_text: button.textContent,
                    x: Math.round(rect.left + rect.width / 2),
                    y: Math.round(rect.top + rect.height / 2),
                    page_url: '/dashboard',
                    timestamp: Date.now()
                });
                
                loadChartWithSession(scenarioSessions['performance_slow'], type);
            } else {
                addLog('performanceStatus', '‚ö†Ô∏è ÏÑ±Îä• ÏãúÎÇòÎ¶¨Ïò§Î•º Î®ºÏ†Ä ÏãúÏûëÌïòÏÑ∏Ïöî', 'warning');
            }
        }
        
        async function loadChartWithSession(sessionId, type) {
            const chartTypes = {
                'sales': 'üí∞ Îß§Ï∂ú Ï∞®Ìä∏ Î°úÎî©',
                'users': 'üë• ÏÇ¨Ïö©Ïûê ÌÜµÍ≥Ñ Î°úÎî©',
                'performance': '‚ö° ÏÑ±Îä• ÏßÄÌëú Î°úÎî©',
                'traffic': 'üåê Ìä∏ÎûòÌîΩ Î∂ÑÏÑù Î°úÎî©',
                'errors': 'üö® Ïò§Î•ò ÌòÑÌô© Î°úÎî©',
                'system': 'üñ•Ô∏è ÏãúÏä§ÌÖú ÏÉÅÌÉú Î°úÎî©'
            };
            
            addLog('performanceStatus', chartTypes[type] || 'Ï∞®Ìä∏ Î°úÎî©', 'info');
            
            // Ï∞®Ìä∏ ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ Í∏∞Î°ù
            await recordEvent(sessionId, {
                type: 'click',
                element_id: 'chart-' + type,
                element_type: 'dashboard_item',
                element_text: chartTypes[type],
                x: 300 + Math.random() * 200, 
                y: 200 + Math.random() * 100
            });
            
            // API ÏöîÏ≤≠ ÏãúÏûë Ïù¥Î≤§Ìä∏ Í∏∞Î°ù
            await recordEvent(sessionId, {
                type: 'api_request',
                endpoint: `/api/charts/${type}`,
                method: 'GET',
                status: 'started'
            });
            
            // ÎäêÎ¶∞ Î°úÎî© ÏãúÎÆ¨Î†àÏù¥ÏÖò
            setTimeout(async () => {
                const loadTime = 7500 + Math.random() * 2000; // 7.5~9.5Ï¥à
                
                addLog('performanceStatus', `‚è±Ô∏è ${type} Ï∞®Ìä∏ Î°úÎî© ÏôÑÎ£å (${(loadTime/1000).toFixed(1)}Ï¥à ÏÜåÏöî)`, 'warning');
                
                // API ÏöîÏ≤≠ ÏôÑÎ£å Ïù¥Î≤§Ìä∏ Í∏∞Î°ù
                await recordEvent(sessionId, {
                    type: 'api_request',
                    endpoint: `/api/charts/${type}`,
                    method: 'GET',
                    status: 'completed',
                    duration: loadTime,
                    performance_issue: true
                });
                
                // Ï∞®Ìä∏ Î†åÎçîÎßÅ Ïù¥Î≤§Ìä∏ Í∏∞Î°ù
                await recordEvent(sessionId, {
                    type: 'chart_render_complete',
                    chart_type: type,
                    render_time: loadTime,
                    chart_id: 'chart-' + type
                });
                
                sessionData.events++;
                if (loadTime > 8000) {
                    sessionData.errors++;
                }
                updateMetrics(sessionData);
                
                // Ïó¨Îü¨ Ï∞®Ìä∏Î•º Î°úÎî©Ìïú ÌõÑ ÏÑ∏ÏÖò Ï¢ÖÎ£å
                if (type === 'sales') {
                    setTimeout(async () => {
                        await endSessionRecording(sessionId, 'performance_test_complete');
                        addLog('performanceStatus', '‚úÖ ÏÑ±Îä• Î∂ÑÏÑù ÏôÑÎ£å - ÏÑ∏ÏÖò Ï¢ÖÎ£å', 'success');
                    }, 2000);
                }
            }, 3000);
        }

        function simulateHighLoad() {
            addLog('performanceStatus', 'üî• ÎÜíÏùÄ Î∂ÄÌïò ÏãúÎÆ¨Î†àÏù¥ÏÖò', 'warning');
            addLog('performanceStatus', 'üìä CPU ÏÇ¨Ïö©Î•†: 95%, Î©îÎ™®Î¶¨: 88%', 'error');
            
            sessionData.events += 10;
            sessionData.errors += 2;
            updateMetrics(sessionData);
        }

        function simulateSlowQuery() {
            addLog('performanceStatus', 'üêå ÎäêÎ¶∞ Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ ÏøºÎ¶¨ ÏãúÎÆ¨Î†àÏù¥ÏÖò', 'warning');
            addLog('performanceStatus', '‚è±Ô∏è ÏøºÎ¶¨ Ïã§Ìñâ ÏãúÍ∞Ñ: 15.7Ï¥à', 'error');
            
            sessionData.events += 5;
            sessionData.errors++;
            updateMetrics(sessionData);
        }

        function simulateMemoryLeak() {
            addLog('performanceStatus', 'üï≥Ô∏è Î©îÎ™®Î¶¨ ÎàÑÏàò ÏãúÎÆ¨Î†àÏù¥ÏÖò', 'warning');
            addLog('performanceStatus', 'üìà Î©îÎ™®Î¶¨ ÏÇ¨Ïö©ÎüâÏù¥ ÏßÄÏÜçÏ†ÅÏúºÎ°ú Ï¶ùÍ∞Ä Ï§ë', 'error');
            
            sessionData.events += 3;
            sessionData.errors++;
            updateMetrics(sessionData);
        }

        async function startPerformanceScenario() {
            currentScenario = 'performance';
            const sessionId = await startSessionRecording('performance_slow');
            
            addLog('performanceStatus', 'üé¨ ÌÜµÌï© ÏÑ±Îä• Î∂ÑÏÑù ÏãúÎÇòÎ¶¨Ïò§ ÏãúÏûë', 'info');
            addLog('performanceStatus', 'üìä ÎåÄÏãúÎ≥¥Îìú ÏÑ±Îä• Î™®ÎãàÌÑ∞ÎßÅ ÌôúÏÑ±Ìôî', 'info');
            
            if (!sessionId) {
                addLog('performanceStatus', '‚ùå ÏÑ∏ÏÖò ÎÖπÌôî ÏãúÏûë Ïã§Ìå®', 'error');
                return;
            }
            
            addLog('performanceStatus', `üìã ÏÑ∏ÏÖò ID: ${sessionId.substring(0, 8)}...`, 'info');
            
            // ÌéòÏù¥ÏßÄ Î°úÎìú Ïù¥Î≤§Ìä∏ Í∏∞Î°ù (ÎäêÎ¶∞ Î°úÎî©)
            await recordEvent(sessionId, {
                type: 'page_load',
                page_url: '/dashboard',
                page_title: 'ÎåÄÏãúÎ≥¥Îìú',
                load_time: 7500
            });
            
            // ÏûêÎèôÏúºÎ°ú Ï∞®Ìä∏ Î°úÎî© ÏãúÎÆ¨Î†àÏù¥ÏÖò ÏãúÏûë
            setTimeout(() => {
                loadChartWithSession(sessionId, 'sales');
            }, 1000);
            
            sessionData.sessions++;
            updateMetrics(sessionData);
        }

        function optimizePerformance() {
            addLog('performanceStatus', 'üöÄ ÏÑ±Îä• ÏµúÏ†ÅÌôî Ï†ÅÏö©', 'warning');
            addLog('performanceStatus', '‚úÖ Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ Ïù∏Îç±Ïä§ ÏµúÏ†ÅÌôî', 'success');
            addLog('performanceStatus', '‚úÖ Ï∫êÏã± Î†àÏù¥Ïñ¥ Ï∂îÍ∞Ä', 'success');
            addLog('performanceStatus', '‚úÖ Î†àÏù¥ÏßÄ Î°úÎî© Íµ¨ÌòÑ', 'success');
            addLog('performanceStatus', 'üìà Î°úÎî© ÏãúÍ∞Ñ: 8.5Ï¥à ‚Üí 2.1Ï¥à (75% Í∞úÏÑ†)', 'success');
            
            sessionData.insights++;
            updateMetrics(sessionData);
        }

        function viewPerformanceReplay() {
            const sessionId = scenarioSessions['performance_slow'];
            if (sessionId) {
                addLog('performanceStatus', 'üì∫ ÏÑ±Îä• Î¨∏Ï†ú ÏßÑÎã® ÏÑ∏ÏÖò Î¶¨ÌîåÎ†àÏù¥Î°ú Ïù¥ÎèôÌï©ÎãàÎã§...', 'info');
                addLog('performanceStatus', `üìã ÏÑ∏ÏÖò ID: ${sessionId.substring(0, 8)}...`, 'info');
                setTimeout(() => {
                    const url = `/session-replay-player?scenario=performance_slow&session=${sessionId}`;
                    window.open(url, '_blank');
                }, 1000);
            } else {
                addLog('performanceStatus', '‚ö†Ô∏è Î®ºÏ†Ä ÏÑ±Îä• Î∂ÑÏÑù ÏãúÎÇòÎ¶¨Ïò§Î•º Ïã§ÌñâÌïòÏÑ∏Ïöî', 'warning');
            }
        }

        function viewPerformanceReport() {
            addLog('performanceStatus', 'üìä ÏÑ±Îä• Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏', 'info');
            addLog('performanceStatus', '‚îå‚îÄ ÌèâÍ∑† Î°úÎî© ÏãúÍ∞Ñ: 8.5Ï¥à ‚Üí 2.1Ï¥à', 'info');
            addLog('performanceStatus', '‚îú‚îÄ CPU ÏÇ¨Ïö©Î•†: 95% ‚Üí 45%', 'info');
            addLog('performanceStatus', '‚îú‚îÄ Î©îÎ™®Î¶¨ ÏÇ¨Ïö©Î•†: 88% ‚Üí 52%', 'info');
            addLog('performanceStatus', '‚îî‚îÄ ÏÇ¨Ïö©Ïûê ÎßåÏ°±ÎèÑ: +40% Ìñ•ÏÉÅ', 'info');
        }

        // Í≥µÌÜµ Ìï®ÏàòÎì§
        function getPaymentFormData() {
            return {
                cardNumber: document.getElementById('cardNumber').value,
                expiry: document.getElementById('expiry').value,
                cvv: document.getElementById('cvv').value,
                cardType: document.getElementById('cardType').value
            };
        }

        function sendSessionData(eventType, data) {
            // APIÎ°ú ÏÑ∏ÏÖò Îç∞Ïù¥ÌÑ∞ Ï†ÑÏÜ°
            fetch('/api/session-replay/record', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    session_id: 'session_' + Date.now(),
                    event_type: eventType,
                    timestamp: new Date().toISOString(),
                    data: data,
                    scenario: currentScenario
                })
            }).catch(err => console.log('Session data sent (simulated)'));
        }

        // Ïπ¥Îìú Î≤àÌò∏ ÏûêÎèô Ìè¨Îß∑ÌåÖ
        document.getElementById('cardNumber').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
            let matches = value.match(/\d{4,16}/g);
            let match = matches && matches[0] || '';
            let parts = [];
            
            for (let i = 0, len = match.length; i < len; i += 4) {
                parts.push(match.substring(i, i + 4));
            }
            
            if (parts.length) {
                e.target.value = parts.join('-');
            } else {
                e.target.value = value;
            }
        });

        // ÎßåÎ£åÏùº ÏûêÎèô Ìè¨Îß∑ÌåÖ
        document.getElementById('expiry').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            e.target.value = value;
        });

        // Ïã§Ï†ú ÎßàÏö∞Ïä§ Î∞è ÌÇ§Î≥¥Îìú Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
        function setupEventListeners() {
            // UX ÏãúÎÇòÎ¶¨Ïò§ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Î≤ÑÌäºÎì§Ïóê Ïã§Ï†ú ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
            document.querySelectorAll('.nav-item').forEach(button => {
                button.addEventListener('click', function(e) {
                    if (scenarioSessions['ux_navigation']) {
                        const rect = button.getBoundingClientRect();
                        recordEvent(scenarioSessions['ux_navigation'], {
                            type: 'click',
                            element_id: button.id || button.textContent.trim(),
                            element_type: 'navigation_button',
                            element_text: button.textContent,
                            x: Math.round(rect.left + rect.width / 2),
                            y: Math.round(rect.top + rect.height / 2),
                            page_url: '/products',
                            timestamp: Date.now()
                        });
                    }
                });
            });

            // Î≥¥Ïïà ÏãúÎÇòÎ¶¨Ïò§ ÏûÖÎ†• ÌïÑÎìúÎì§Ïóê ÌÇ§Î≥¥Îìú Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
            const securityInputs = ['username', 'password'];
            securityInputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                if (input) {
                    input.addEventListener('input', function(e) {
                        if (scenarioSessions['security_attack']) {
                            const rect = input.getBoundingClientRect();
                            recordEvent(scenarioSessions['security_attack'], {
                                type: 'form_input',
                                element_id: inputId,
                                element_type: 'input',
                                value_masked: inputId === 'password' ? '*'.repeat(e.target.value.length) : e.target.value,
                                x: Math.round(rect.left + rect.width / 2),
                                y: Math.round(rect.top + rect.height / 2),
                                page_url: '/login',
                                timestamp: Date.now()
                            });
                        }
                    });
                }
            });

            // ÏÑ±Îä• ÏãúÎÇòÎ¶¨Ïò§ Ï∞®Ìä∏ Î≤ÑÌäºÎì§Ïóê ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
            document.querySelectorAll('.dashboard-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    if (scenarioSessions['performance_slow']) {
                        const rect = item.getBoundingClientRect();
                        recordEvent(scenarioSessions['performance_slow'], {
                            type: 'click',
                            element_id: item.id || item.textContent.trim(),
                            element_type: 'dashboard_item',
                            element_text: item.textContent,
                            x: Math.round(rect.left + rect.width / 2),
                            y: Math.round(rect.top + rect.height / 2),
                            page_url: '/dashboard',
                            timestamp: Date.now()
                        });
                    }
                });
            });

            // Î≤ÑÍ∑∏ ÏãúÎÇòÎ¶¨Ïò§ Í≤∞Ï†ú Ìèº ÏûÖÎ†• ÌïÑÎìúÎì§Ïóê Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä (Ïù¥ÎØ∏ ÏûàÏßÄÎßå Î≥¥Í∞ï)
            const paymentInputs = ['cardNumber', 'expiry', 'cvv', 'cardType'];
            paymentInputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                if (input) {
                    input.addEventListener('input', function(e) {
                        if (scenarioSessions['bug_payment']) {
                            const rect = input.getBoundingClientRect();
                            recordEvent(scenarioSessions['bug_payment'], {
                                type: 'form_input',
                                element_id: inputId,
                                element_type: input.type === 'select-one' ? 'select' : 'input',
                                value_masked: inputId === 'cardNumber' ? 
                                    e.target.value.replace(/\d(?=\d{4})/g, '*') : 
                                    e.target.value,
                                x: Math.round(rect.left + rect.width / 2),
                                y: Math.round(rect.top + rect.height / 2),
                                page_url: '/checkout',
                                timestamp: Date.now()
                            });
                        }
                    });
                }
            });
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà ÏÑ§Ï†ï
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
        });

        // Ï¥àÍ∏∞ Î©îÌä∏Î¶≠ Î°úÎìú
        updateMetrics(sessionData);
        
        // Ï¥àÍ∏∞ ÏÑ∏ÏÖò ÏÉÅÌÉú ÌëúÏãú
        updateSessionStatus();
        
        // ÌéòÏù¥ÏßÄÍ∞Ä Ïù¥ÎØ∏ Î°úÎìúÎêú Í≤ΩÏö∞Î•º ÏúÑÌï¥ Ï¶âÏãú Ïã§Ìñâ
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', setupEventListeners);
        } else {
            setupEventListeners();
        }
    </script>
</body>
</html>