<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenTelemetry API 엔드포인트 테스트</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #64748b;
            --success-color: #059669;
            --warning-color: #d97706;
            --error-color: #dc2626;
            --background-color: #f8fafc;
            --card-background: #ffffff;
            --border-color: #e2e8f0;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --code-background: #1e293b;
            --code-text: #e2e8f0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--background-color);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .header {
            background: var(--card-background);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .api-section {
            background: var(--card-background);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .api-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .api-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .method-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .method-get { background: #dcfce7; color: #059669; }
        .method-post { background: #dbeafe; color: #2563eb; }
        .method-put { background: #fef3c7; color: #d97706; }
        .method-delete { background: #fef2f2; color: #dc2626; }

        .endpoint-url {
            font-family: 'Monaco', 'Menlo', monospace;
            background: var(--code-background);
            color: var(--code-text);
            padding: 0.75rem;
            border-radius: 0.375rem;
            margin-bottom: 1rem;
            font-size: 0.875rem;
            word-break: break-all;
        }

        .test-form {
            display: grid;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .form-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-input, .form-textarea, .form-select {
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            font-size: 0.875rem;
            background: var(--card-background);
            color: var(--text-primary);
        }

        .form-textarea {
            min-height: 100px;
            font-family: 'Monaco', 'Menlo', monospace;
            resize: vertical;
        }

        .test-button {
            padding: 0.5rem 1rem;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.875rem;
            transition: background-color 0.2s;
        }

        .test-button:hover {
            background: #1d4ed8;
        }

        .test-button:disabled {
            background: var(--secondary-color);
            cursor: not-allowed;
        }

        .response-section {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .response-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .response-status {
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .status-200 { background: #dcfce7; color: #059669; }
        .status-400 { background: #fef3c7; color: #d97706; }
        .status-500 { background: #fef2f2; color: #dc2626; }

        .response-body {
            background: var(--code-background);
            color: var(--code-text);
            padding: 1rem;
            border-radius: 0.375rem;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.75rem;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #374151;
        }

        .example-requests {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .example-card {
            background: #f8fafc;
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            padding: 1rem;
        }

        .example-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .example-code {
            background: var(--code-background);
            color: var(--code-text);
            padding: 0.75rem;
            border-radius: 0.375rem;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.75rem;
            overflow-x: auto;
        }

        .loading {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid #e5e7eb;
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 1rem;
            }
            
            .example-requests {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>OpenTelemetry 추적 API 엔드포인트</h1>
    </div>

    <div class="main-content">
        <!-- Traces API -->
        <div class="api-section">
            <div class="api-header">
                <h2 class="api-title">추적 데이터 조회</h2>
                <span class="method-badge method-get">GET</span>
            </div>
            
            <div class="endpoint-url">/api/traces</div>
            
            <div class="test-form">
                <div class="form-group">
                    <label class="form-label">서비스 이름</label>
                    <input type="text" class="form-input" id="tracesServiceName" placeholder="user-service">
                </div>
                
                <div class="form-group">
                    <label class="form-label">시간 범위 (시간)</label>
                    <select class="form-select" id="tracesTimeRange">
                        <option value="1">최근 1시간</option>
                        <option value="6">최근 6시간</option>
                        <option value="24">최근 24시간</option>
                        <option value="168">최근 7일</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">최소 지속 시간 (ms)</label>
                    <input type="number" class="form-input" id="tracesMinDuration" placeholder="100">
                </div>
                
                <div class="form-group">
                    <label class="form-label">상태</label>
                    <select class="form-select" id="tracesStatus">
                        <option value="">전체</option>
                        <option value="ok">성공</option>
                        <option value="error">오류</option>
                    </select>
                </div>
                
                <button class="test-button" onclick="testGetTraces()" id="tracesBtn">
                    요청 실행
                </button>
            </div>
            
            <div class="response-section" id="tracesResponse" style="display: none;">
                <div class="response-header">
                    <h3>응답</h3>
                    <span class="response-status" id="tracesStatus"></span>
                </div>
                <div class="response-body" id="tracesBody"></div>
            </div>
        </div>

        <!-- Trace Detail API -->
        <div class="api-section">
            <div class="api-header">
                <h2 class="api-title">추적 상세 정보</h2>
                <span class="method-badge method-get">GET</span>
            </div>
            
            <div class="endpoint-url">/api/traces/{traceId}</div>
            
            <div class="test-form">
                <div class="form-group">
                    <label class="form-label">추적 ID</label>
                    <input type="text" class="form-input" id="traceId" placeholder="trace-12345">
                </div>
                
                <button class="test-button" onclick="testGetTraceDetail()" id="traceDetailBtn">
                    요청 실행
                </button>
            </div>
            
            <div class="response-section" id="traceDetailResponse" style="display: none;">
                <div class="response-header">
                    <h3>응답</h3>
                    <span class="response-status" id="traceDetailStatus"></span>
                </div>
                <div class="response-body" id="traceDetailBody"></div>
            </div>
        </div>

        <!-- Spans API -->
        <div class="api-section">
            <div class="api-header">
                <h2 class="api-title">스팬 데이터 조회</h2>
                <span class="method-badge method-get">GET</span>
            </div>
            
            <div class="endpoint-url">/api/spans</div>
            
            <div class="test-form">
                <div class="form-group">
                    <label class="form-label">추적 ID</label>
                    <input type="text" class="form-input" id="spansTraceId" placeholder="trace-12345">
                </div>
                
                <div class="form-group">
                    <label class="form-label">작업 이름</label>
                    <input type="text" class="form-input" id="spansOperationName" placeholder="GET /api/users">
                </div>
                
                <button class="test-button" onclick="testGetSpans()" id="spansBtn">
                    요청 실행
                </button>
            </div>
            
            <div class="response-section" id="spansResponse" style="display: none;">
                <div class="response-header">
                    <h3>응답</h3>
                    <span class="response-status" id="spansStatus"></span>
                </div>
                <div class="response-body" id="spansBody"></div>
            </div>
        </div>

        <!-- Create Trace API -->
        <div class="api-section">
            <div class="api-header">
                <h2 class="api-title">추적 데이터 생성</h2>
                <span class="method-badge method-post">POST</span>
            </div>
            
            <div class="endpoint-url">/api/traces</div>
            
            <div class="test-form">
                <div class="form-group">
                    <label class="form-label">요청 본문 (JSON)</label>
                    <textarea class="form-textarea" id="createTraceBody" placeholder='{"traceId": "trace-12345", "serviceName": "user-service", ...}'></textarea>
                </div>
                
                <button class="test-button" onclick="testCreateTrace()" id="createTraceBtn">
                    요청 실행
                </button>
            </div>
            
            <div class="response-section" id="createTraceResponse" style="display: none;">
                <div class="response-header">
                    <h3>응답</h3>
                    <span class="response-status" id="createTraceStatus"></span>
                </div>
                <div class="response-body" id="createTraceResponseBody"></div>
            </div>
        </div>

        <!-- Metrics API -->
        <div class="api-section">
            <div class="api-header">
                <h2 class="api-title">메트릭 데이터 조회</h2>
                <span class="method-badge method-get">GET</span>
            </div>
            
            <div class="endpoint-url">/api/metrics</div>
            
            <div class="test-form">
                <div class="form-group">
                    <label class="form-label">메트릭 유형</label>
                    <select class="form-select" id="metricsType">
                        <option value="latency">지연 시간</option>
                        <option value="throughput">처리량</option>
                        <option value="error_rate">오류율</option>
                        <option value="cpu_usage">CPU 사용률</option>
                        <option value="memory_usage">메모리 사용률</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">집계 방식</label>
                    <select class="form-select" id="metricsAggregation">
                        <option value="avg">평균</option>
                        <option value="min">최소</option>
                        <option value="max">최대</option>
                        <option value="p50">P50</option>
                        <option value="p95">P95</option>
                        <option value="p99">P99</option>
                    </select>
                </div>
                
                <button class="test-button" onclick="testGetMetrics()" id="metricsBtn">
                    요청 실행
                </button>
            </div>
            
            <div class="response-section" id="metricsResponse" style="display: none;">
                <div class="response-header">
                    <h3>응답</h3>
                    <span class="response-status" id="metricsStatus"></span>
                </div>
                <div class="response-body" id="metricsResponseBody"></div>
            </div>
        </div>

        <!-- Anomalies API -->
        <div class="api-section">
            <div class="api-header">
                <h2 class="api-title">이상 징후 조회</h2>
                <span class="method-badge method-get">GET</span>
            </div>
            
            <div class="endpoint-url">/api/anomalies</div>
            
            <div class="test-form">
                <div class="form-group">
                    <label class="form-label">심각도</label>
                    <select class="form-select" id="anomaliesSeverity">
                        <option value="">전체</option>
                        <option value="low">낮음</option>
                        <option value="medium">보통</option>
                        <option value="high">높음</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">해결 여부</label>
                    <select class="form-select" id="anomaliesResolved">
                        <option value="">전체</option>
                        <option value="true">해결됨</option>
                        <option value="false">미해결</option>
                    </select>
                </div>
                
                <button class="test-button" onclick="testGetAnomalies()" id="anomaliesBtn">
                    요청 실행
                </button>
            </div>
            
            <div class="response-section" id="anomaliesResponse" style="display: none;">
                <div class="response-header">
                    <h3>응답</h3>
                    <span class="response-status" id="anomaliesStatus"></span>
                </div>
                <div class="response-body" id="anomaliesResponseBody"></div>
            </div>
        </div>

        <!-- Example Requests -->
        <div class="api-section">
            <div class="api-header">
                <h2 class="api-title">요청 예제</h2>
            </div>
            
            <div class="example-requests">
                <div class="example-card">
                    <div class="example-title">cURL 예제</div>
                    <div class="example-code">curl -X GET "http://localhost:3000/api/traces?serviceName=user-service&timeRange=24" \
  -H "Content-Type: application/json"</div>
                </div>
                
                <div class="example-card">
                    <div class="example-title">JavaScript 예제</div>
                    <div class="example-code">fetch('/api/traces?serviceName=user-service&timeRange=24')
  .then(response => response.json())
  .then(data => console.log(data));</div>
                </div>
                
                <div class="example-card">
                    <div class="example-title">Python 예제</div>
                    <div class="example-code">import requests

response = requests.get(
    'http://localhost:3000/api/traces',
    params={
        'serviceName': 'user-service',
        'timeRange': 24
    }
)
data = response.json()</div>
                </div>
                
                <div class="example-card">
                    <div class="example-title">추적 데이터 생성 예제</div>
                    <div class="example-code">{
  "traceId": "trace-12345",
  "serviceName": "user-service",
  "operationName": "GET /api/users",
  "startTime": "2024-01-15T10:30:00Z",
  "duration": 250,
  "status": "ok",
  "spans": [...]
}</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // API 기본 URL
        const API_BASE_URL = '/api';

        // 모의 API 응답 생성기
        function generateMockTraces(params = {}) {
            const traces = [];
            const services = ['user-service', 'payment-service', 'inventory-service', 'notification-service'];
            const operations = ['GET /api/users', 'POST /api/payment', 'GET /api/inventory', 'POST /api/notify'];
            
            for (let i = 1; i <= 10; i++) {
                const serviceIndex = Math.floor(Math.random() * services.length);
                traces.push({
                    traceId: `trace-${Date.now()}-${i}`,
                    serviceName: services[serviceIndex],
                    operationName: operations[serviceIndex],
                    startTime: new Date(Date.now() - Math.random() * 24 * 60 * 60 * 1000).toISOString(),
                    duration: Math.floor(Math.random() * 1000) + 50,
                    status: Math.random() > 0.8 ? 'error' : 'ok',
                    spanCount: Math.floor(Math.random() * 10) + 1,
                    tags: {
                        'http.method': 'GET',
                        'http.status_code': Math.random() > 0.8 ? 500 : 200,
                        'user.id': `user-${Math.floor(Math.random() * 1000)}`
                    }
                });
            }
            
            return {
                data: traces,
                total: traces.length,
                page: 1,
                pageSize: 10
            };
        }

        function generateMockTraceDetail(traceId) {
            return {
                traceId: traceId,
                serviceName: 'user-service',
                operationName: 'GET /api/users',
                startTime: new Date().toISOString(),
                duration: 245,
                status: 'ok',
                spans: [
                    {
                        spanId: 'span-1',
                        parentSpanId: null,
                        operationName: 'HTTP GET',
                        startTime: new Date().toISOString(),
                        duration: 245,
                        status: 'ok',
                        tags: {
                            'http.method': 'GET',
                            'http.url': '/api/users',
                            'http.status_code': 200
                        },
                        events: [
                            {
                                timestamp: new Date().toISOString(),
                                name: 'request.start',
                                attributes: {}
                            }
                        ]
                    }
                ],
                dependencies: [
                    { service: 'database', operation: 'SELECT users', duration: 50 },
                    { service: 'cache', operation: 'GET user_cache', duration: 15 }
                ]
            };
        }

        function generateMockSpans(params = {}) {
            return {
                data: [
                    {
                        spanId: 'span-1',
                        traceId: params.traceId || 'trace-12345',
                        parentSpanId: null,
                        operationName: params.operationName || 'HTTP GET',
                        serviceName: 'user-service',
                        startTime: new Date().toISOString(),
                        duration: 245,
                        status: 'ok'
                    }
                ]
            };
        }

        function generateMockMetrics(type, aggregation) {
            const data = [];
            for (let i = 0; i < 24; i++) {
                data.push({
                    timestamp: new Date(Date.now() - (23 - i) * 60 * 60 * 1000).toISOString(),
                    value: Math.random() * 1000 + 100
                });
            }
            
            return {
                metric: type,
                aggregation: aggregation,
                data: data,
                summary: {
                    avg: 350.5,
                    min: 120.2,
                    max: 980.7
                }
            };
        }

        function generateMockAnomalies(params = {}) {
            const anomalies = [];
            const services = ['user-service', 'payment-service', 'inventory-service'];
            const severities = ['low', 'medium', 'high'];
            
            for (let i = 1; i <= 5; i++) {
                anomalies.push({
                    id: i,
                    traceId: `trace-${Date.now()}-${i}`,
                    serviceName: services[Math.floor(Math.random() * services.length)],
                    severity: severities[Math.floor(Math.random() * severities.length)],
                    score: Math.random() * 10,
                    description: '응답 시간이 비정상적으로 증가했습니다.',
                    timestamp: new Date().toISOString(),
                    resolved: Math.random() > 0.5
                });
            }
            
            return {
                data: anomalies.filter(a => {
                    if (params.severity && a.severity !== params.severity) return false;
                    if (params.resolved !== undefined && a.resolved.toString() !== params.resolved) return false;
                    return true;
                }),
                total: anomalies.length
            };
        }

        // API 테스트 함수들
        async function testGetTraces() {
            const btn = document.getElementById('tracesBtn');
            const responseDiv = document.getElementById('tracesResponse');
            const statusSpan = document.getElementById('tracesStatus');
            const bodyDiv = document.getElementById('tracesBody');
            
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"><span class="spinner"></span>요청 중...</span>';
            
            const params = {
                serviceName: document.getElementById('tracesServiceName').value,
                timeRange: document.getElementById('tracesTimeRange').value,
                minDuration: document.getElementById('tracesMinDuration').value,
                status: document.getElementById('tracesStatus').value
            };
            
            try {
                // 실제 API 호출 시뮬레이션
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                const mockResponse = generateMockTraces(params);
                
                statusSpan.textContent = '200 OK';
                statusSpan.className = 'response-status status-200';
                bodyDiv.textContent = JSON.stringify(mockResponse, null, 2);
                responseDiv.style.display = 'block';
                
            } catch (error) {
                statusSpan.textContent = '500 Server Error';
                statusSpan.className = 'response-status status-500';
                bodyDiv.textContent = JSON.stringify({ error: error.message }, null, 2);
                responseDiv.style.display = 'block';
            } finally {
                btn.disabled = false;
                btn.textContent = '요청 실행';
            }
        }

        async function testGetTraceDetail() {
            const btn = document.getElementById('traceDetailBtn');
            const responseDiv = document.getElementById('traceDetailResponse');
            const statusSpan = document.getElementById('traceDetailStatus');
            const bodyDiv = document.getElementById('traceDetailBody');
            
            const traceId = document.getElementById('traceId').value;
            
            if (!traceId) {
                alert('추적 ID를 입력해주세요.');
                return;
            }
            
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"><span class="spinner"></span>요청 중...</span>';
            
            try {
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                const mockResponse = generateMockTraceDetail(traceId);
                
                statusSpan.textContent = '200 OK';
                statusSpan.className = 'response-status status-200';
                bodyDiv.textContent = JSON.stringify(mockResponse, null, 2);
                responseDiv.style.display = 'block';
                
            } catch (error) {
                statusSpan.textContent = '404 Not Found';
                statusSpan.className = 'response-status status-400';
                bodyDiv.textContent = JSON.stringify({ error: 'Trace not found' }, null, 2);
                responseDiv.style.display = 'block';
            } finally {
                btn.disabled = false;
                btn.textContent = '요청 실행';
            }
        }

        async function testGetSpans() {
            const btn = document.getElementById('spansBtn');
            const responseDiv = document.getElementById('spansResponse');
            const statusSpan = document.getElementById('spansStatus');
            const bodyDiv = document.getElementById('spansBody');
            
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"><span class="spinner"></span>요청 중...</span>';
            
            const params = {
                traceId: document.getElementById('spansTraceId').value,
                operationName: document.getElementById('spansOperationName').value
            };
            
            try {
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                const mockResponse = generateMockSpans(params);
                
                statusSpan.textContent = '200 OK';
                statusSpan.className = 'response-status status-200';
                bodyDiv.textContent = JSON.stringify(mockResponse, null, 2);
                responseDiv.style.display = 'block';
                
            } finally {
                btn.disabled = false;
                btn.textContent = '요청 실행';
            }
        }

        async function testCreateTrace() {
            const btn = document.getElementById('createTraceBtn');
            const responseDiv = document.getElementById('createTraceResponse');
            const statusSpan = document.getElementById('createTraceStatus');
            const bodyDiv = document.getElementById('createTraceResponseBody');
            
            const requestBody = document.getElementById('createTraceBody').value;
            
            if (!requestBody.trim()) {
                alert('요청 본문을 입력해주세요.');
                return;
            }
            
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"><span class="spinner"></span>요청 중...</span>';
            
            try {
                // JSON 형식 검증
                JSON.parse(requestBody);
                
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                const mockResponse = {
                    success: true,
                    message: '추적 데이터가 성공적으로 생성되었습니다.',
                    traceId: 'trace-' + Date.now()
                };
                
                statusSpan.textContent = '201 Created';
                statusSpan.className = 'response-status status-200';
                bodyDiv.textContent = JSON.stringify(mockResponse, null, 2);
                responseDiv.style.display = 'block';
                
            } catch (error) {
                statusSpan.textContent = '400 Bad Request';
                statusSpan.className = 'response-status status-400';
                bodyDiv.textContent = JSON.stringify({ error: '잘못된 JSON 형식입니다.' }, null, 2);
                responseDiv.style.display = 'block';
            } finally {
                btn.disabled = false;
                btn.textContent = '요청 실행';
            }
        }

        async function testGetMetrics() {
            const btn = document.getElementById('metricsBtn');
            const responseDiv = document.getElementById('metricsResponse');
            const statusSpan = document.getElementById('metricsStatus');
            const bodyDiv = document.getElementById('metricsResponseBody');
            
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"><span class="spinner"></span>요청 중...</span>';
            
            const type = document.getElementById('metricsType').value;
            const aggregation = document.getElementById('metricsAggregation').value;
            
            try {
                await new Promise(resolve => setTimeout(resolve, 1200));
                
                const mockResponse = generateMockMetrics(type, aggregation);
                
                statusSpan.textContent = '200 OK';
                statusSpan.className = 'response-status status-200';
                bodyDiv.textContent = JSON.stringify(mockResponse, null, 2);
                responseDiv.style.display = 'block';
                
            } finally {
                btn.disabled = false;
                btn.textContent = '요청 실행';
            }
        }

        async function testGetAnomalies() {
            const btn = document.getElementById('anomaliesBtn');
            const responseDiv = document.getElementById('anomaliesResponse');
            const statusSpan = document.getElementById('anomaliesStatus');
            const bodyDiv = document.getElementById('anomaliesResponseBody');
            
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"><span class="spinner"></span>요청 중...</span>';
            
            const params = {
                severity: document.getElementById('anomaliesSeverity').value,
                resolved: document.getElementById('anomaliesResolved').value
            };
            
            try {
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                const mockResponse = generateMockAnomalies(params);
                
                statusSpan.textContent = '200 OK';
                statusSpan.className = 'response-status status-200';
                bodyDiv.textContent = JSON.stringify(mockResponse, null, 2);
                responseDiv.style.display = 'block';
                
            } finally {
                btn.disabled = false;
                btn.textContent = '요청 실행';
            }
        }

        // 예제 데이터 자동 입력
        document.addEventListener('DOMContentLoaded', () => {
            // 추적 생성 예제 데이터
            document.getElementById('createTraceBody').value = JSON.stringify({
                traceId: `trace-${Date.now()}`,
                serviceName: 'user-service',
                operationName: 'GET /api/users',
                startTime: new Date().toISOString(),
                duration: 250,
                status: 'ok',
                spans: [
                    {
                        spanId: 'span-1',
                        parentSpanId: null,
                        operationName: 'HTTP GET',
                        serviceName: 'user-service',
                        startTime: new Date().toISOString(),
                        duration: 250,
                        status: 'ok',
                        tags: {
                            'http.method': 'GET',
                            'http.url': '/api/users',
                            'http.status_code': 200
                        }
                    }
                ]
            }, null, 2);
            
            // 추적 ID 예제
            document.getElementById('traceId').value = 'trace-12345';
            document.getElementById('spansTraceId').value = 'trace-12345';
        });
    </script>
</body>
</html>