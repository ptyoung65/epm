<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIRIS EPM ì„œë¹„ìŠ¤ ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* shadcn/ui í…Œë§ˆ CSS ë³€ìˆ˜ */
        :root {
            --background: 0 0% 100%;
            --foreground: 222.2 84% 4.9%;
            --card: 0 0% 100%;
            --card-foreground: 222.2 84% 4.9%;
            --popover: 0 0% 100%;
            --popover-foreground: 222.2 84% 4.9%;
            --primary: 221.2 83.2% 53.3%;
            --primary-foreground: 210 40% 98%;
            --secondary: 210 40% 96%;
            --secondary-foreground: 222.2 84% 4.9%;
            --muted: 210 40% 96%;
            --muted-foreground: 215.4 16.3% 46.9%;
            --accent: 210 40% 96%;
            --accent-foreground: 222.2 84% 4.9%;
            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 210 40% 98%;
            --border: 214.3 31.8% 91.4%;
            --input: 214.3 31.8% 91.4%;
            --ring: 221.2 83.2% 53.3%;
            --radius: 0.75rem;
            --success: 142.1 76.2% 36.3%;
            --warning: 47.9 95.8% 53.1%;
            --info: 199.2 95.8% 48.4%;
            --error: 0 84.2% 60.2%;
        }

        .dark {
            --background: 222.2 84% 4.9%;
            --foreground: 210 40% 98%;
            --card: 222.2 84% 4.9%;
            --card-foreground: 210 40% 98%;
            --popover: 222.2 84% 4.9%;
            --popover-foreground: 210 40% 98%;
            --primary: 217.2 91.2% 59.8%;
            --primary-foreground: 222.2 84% 4.9%;
            --secondary: 217.2 32.6% 17.5%;
            --secondary-foreground: 210 40% 98%;
            --muted: 217.2 32.6% 17.5%;
            --muted-foreground: 215 20.2% 65.1%;
            --accent: 217.2 32.6% 17.5%;
            --accent-foreground: 210 40% 98%;
            --destructive: 0 62.8% 30.6%;
            --destructive-foreground: 210 40% 98%;
            --border: 217.2 32.6% 17.5%;
            --input: 217.2 32.6% 17.5%;
            --ring: 224.3 76.3% 94.1%;
        }

        .status-healthy { @apply text-green-600 bg-green-50 border-green-200; }
        .status-unhealthy { @apply text-red-600 bg-red-50 border-red-200; }
        .status-warning { @apply text-yellow-600 bg-yellow-50 border-yellow-200; }
        .status-loading { @apply text-blue-600 bg-blue-50 border-blue-200; }
        
        .dark .status-healthy { @apply text-green-400 bg-green-900/20 border-green-800; }
        .dark .status-unhealthy { @apply text-red-400 bg-red-900/20 border-red-800; }
        .dark .status-warning { @apply text-yellow-400 bg-yellow-900/20 border-yellow-800; }
        .dark .status-loading { @apply text-blue-400 bg-blue-900/20 border-blue-800; }

        .service-card {
            @apply bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 shadow-sm hover:shadow-md transition-all;
        }

        .chart-container {
            @apply h-64 w-full;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <a href="/portal.html" class="text-xl font-bold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors cursor-pointer">ğŸš€ AIRIS EPM</a>
                    </div>
                    <div class="ml-10 flex items-center space-x-8">
                        <!-- ë©”ì¸ ëŒ€ì‹œë³´ë“œ -->
                        <a href="/" class="text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white px-3 py-2 text-sm font-medium">ğŸ“Š ë©”ì¸</a>
                        
                        <!-- APM ëª¨ë‹ˆí„°ë§ ë“œë¡­ë‹¤ìš´ -->
                        <div class="relative group">
                            <button class="text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white transition-colors bg-transparent border-none cursor-pointer flex items-center px-3 py-2 text-sm font-medium">
                                âš¡ APM ëª¨ë‹ˆí„°ë§ â–¾
                            </button>
                            <div class="absolute top-full left-0 mt-1 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                                <a href="/j2ee-dashboard.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">â˜• J2EE ëª¨ë‹ˆí„°ë§</a>
                                <a href="/was-dashboard.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">ğŸ—ï¸ WAS ëª¨ë‹ˆí„°ë§</a>
                                <a href="/exception-dashboard.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">ğŸš¨ ì˜ˆì™¸ ì¶”ì </a>
                                <a href="/topology-dashboard.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">ğŸ—ºï¸ ì„œë¹„ìŠ¤ í† í´ë¡œì§€</a>
                                <a href="/alert-dashboard.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">ğŸ”” ì•Œë¦¼ ê´€ë¦¬</a>
                            </div>
                        </div>

                        <!-- ì¸í”„ë¼ ëª¨ë‹ˆí„°ë§ ë“œë¡­ë‹¤ìš´ -->
                        <div class="relative group">
                            <button class="text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white transition-colors bg-transparent border-none cursor-pointer flex items-center px-3 py-2 text-sm font-medium">
                                ğŸ–¥ï¸ ì¸í”„ë¼ ëª¨ë‹ˆí„°ë§ â–¾
                            </button>
                            <div class="absolute top-full left-0 mt-1 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                                <a href="/app-monitoring.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">ğŸ“± ì• í”Œë¦¬ì¼€ì´ì…˜ ëª¨ë‹ˆí„°ë§</a>
                                <a href="/system-monitoring.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">âš™ï¸ ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§</a>
                                <a href="/db-monitoring.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">ğŸ—ƒï¸ ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë‹ˆí„°ë§</a>
                                <a href="/web-monitoring.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">ğŸŒ ì›¹ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§</a>
                            </div>
                        </div>

                        <!-- ê´€ì°°ì„± ë“œë¡­ë‹¤ìš´ -->
                        <div class="relative group">
                            <button class="text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white transition-colors bg-transparent border-none cursor-pointer flex items-center px-3 py-2 text-sm font-medium">
                                ğŸ” ê´€ì°°ì„± â–¾
                            </button>
                            <div class="absolute top-full left-0 mt-1 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                                <a href="/logs-dashboard.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">ğŸ“‹ ë¡œê·¸ ëŒ€ì‹œë³´ë“œ</a>
                                <a href="/metrics-dashboard.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">ğŸ“Š ë©”íŠ¸ë¦­ ëŒ€ì‹œë³´ë“œ</a>
                                <a href="/traces-dashboard.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">ğŸ”— íŠ¸ë ˆì´ìŠ¤ ëŒ€ì‹œë³´ë“œ</a>
                            </div>
                        </div>

                        <!-- ì„¸ì…˜ ë¶„ì„ ë“œë¡­ë‹¤ìš´ -->
                        <div class="relative group">
                            <button class="text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white transition-colors bg-transparent border-none cursor-pointer flex items-center px-3 py-2 text-sm font-medium">
                                ğŸ‘¥ ì„¸ì…˜ ë¶„ì„ â–¾
                            </button>
                            <div class="absolute top-full left-0 mt-1 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                                <a href="/session-analysis.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">ğŸ“ˆ ì„¸ì…˜ ë¶„ì„</a>
                                <a href="/session-telemetry-dashboard.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">ğŸ›°ï¸ ì„¸ì…˜ í…”ë ˆë©”íŠ¸ë¦¬</a>
                                <a href="/session-replay.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">ğŸ¬ ì„¸ì…˜ ë¦¬í”Œë ˆì´</a>
                            </div>
                        </div>

                        <!-- ì‹œìŠ¤í…œ ê´€ë¦¬ ë“œë¡­ë‹¤ìš´ -->
                        <div class="relative group">
                            <button class="bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 transition-colors border-none cursor-pointer flex items-center px-3 py-2 text-sm font-medium rounded-md">
                                ğŸ› ï¸ ì‹œìŠ¤í…œ ê´€ë¦¬ â–¾
                            </button>
                            <div class="absolute top-full left-0 mt-1 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                                <a href="/services-management.html" class="block px-4 py-2 text-sm text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/30 hover:bg-blue-100 dark:hover:bg-blue-900/50">âš™ï¸ ì„œë¹„ìŠ¤ ê´€ë¦¬</a>
                                <a href="/deployment-manager.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">ğŸš€ ë°°í¬ ê´€ë¦¬</a>
                                <a href="/ontology.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white">ğŸ§  ì˜¨í†¨ë¡œì§€ ì‹œìŠ¤í…œ</a>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="darkModeToggle" class="p-2 rounded-md text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white">
                        <span class="dark:hidden">ğŸŒ™</span>
                        <span class="hidden dark:inline">â˜€ï¸</span>
                    </button>
                    <div id="systemStatus" class="flex items-center space-x-2">
                        <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                        <span class="text-sm text-gray-600 dark:text-gray-300">ì‹œìŠ¤í…œ ì •ìƒ</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        <!-- í—¤ë” -->
        <div class="px-4 py-6 sm:px-0">
            <div class="flex justify-between items-center">
                <h1 class="text-3xl font-bold text-gray-900 dark:text-white">AIRIS EPM ì„œë¹„ìŠ¤ ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ</h1>
                <div class="flex space-x-4">
                    <button onclick="refreshAll()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium">
                        ğŸ”„ ì „ì²´ ìƒˆë¡œê³ ì¹¨
                    </button>
                    <button onclick="exportServiceStatus()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium">
                        ğŸ“Š ìƒíƒœ ë‚´ë³´ë‚´ê¸°
                    </button>
                </div>
            </div>
            <p class="mt-2 text-gray-600 dark:text-gray-400">ëª¨ë“  EPM ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”</p>
        </div>

        <!-- í†µê³„ ê°œìš” -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                                <span class="text-white text-sm">âœ“</span>
                            </div>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 dark:text-gray-400 truncate">ì •ìƒ ì„œë¹„ìŠ¤</dt>
                                <dd class="text-lg font-medium text-gray-900 dark:text-white" id="healthyCount">-</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-8 h-8 bg-red-500 rounded-full flex items-center justify-center">
                                <span class="text-white text-sm">âœ—</span>
                            </div>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 dark:text-gray-400 truncate">ì˜¤ë¥˜ ì„œë¹„ìŠ¤</dt>
                                <dd class="text-lg font-medium text-gray-900 dark:text-white" id="unhealthyCount">-</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                                <span class="text-white text-sm">âš¡</span>
                            </div>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 dark:text-gray-400 truncate">ì´ ì„œë¹„ìŠ¤</dt>
                                <dd class="text-lg font-medium text-gray-900 dark:text-white" id="totalServices">13</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center">
                                <span class="text-white text-sm">â±</span>
                            </div>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 dark:text-gray-400 truncate">í‰ê·  ì‘ë‹µì‹œê°„</dt>
                                <dd class="text-lg font-medium text-gray-900 dark:text-white" id="avgResponseTime">-</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì„œë¹„ìŠ¤ ìƒíƒœ ê·¸ë¦¬ë“œ -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="servicesGrid">
            <!-- ì„œë¹„ìŠ¤ ì¹´ë“œë“¤ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>

        <!-- ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§ -->
        <div class="mt-8">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="service-card">
                    <h3 class="text-lg font-semibold mb-4 text-gray-900 dark:text-white">ì„œë¹„ìŠ¤ ìƒíƒœ ë¶„í¬</h3>
                    <div class="chart-container">
                        <canvas id="statusChart"></canvas>
                    </div>
                </div>
                <div class="service-card">
                    <h3 class="text-lg font-semibold mb-4 text-gray-900 dark:text-white">ì‘ë‹µì‹œê°„ ì¶”ì´</h3>
                    <div class="chart-container">
                        <canvas id="responseTimeChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ -->
        <div class="mt-8">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="databaseGrid">
                <!-- ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ ì¹´ë“œë“¤ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <script>
        // EPM ì„œë¹„ìŠ¤ ì„¤ì •
        const services = [
            { name: 'API Gateway', port: 3000, url: 'http://localhost:3000', healthEndpoint: '/health', icon: 'ğŸšª', description: 'API ê²Œì´íŠ¸ì›¨ì´ ì„œë¹„ìŠ¤' },
            { name: 'Data Ingestion', port: 3007, url: 'http://localhost:3007', healthEndpoint: '/health', icon: 'ğŸ“¥', description: 'ë°ì´í„° ìˆ˜ì§‘ ì„œë¹„ìŠ¤' },
            { name: 'UI Dashboard', port: 3001, url: 'http://localhost:3001', healthEndpoint: '/', icon: 'ğŸ–¥ï¸', description: 'ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ëŒ€ì‹œë³´ë“œ' },
            { name: 'Session Replay', port: 3003, url: 'http://localhost:3003', healthEndpoint: '/health', icon: 'ğŸ“¹', description: 'ì„¸ì…˜ ì¬ìƒ ì„œë¹„ìŠ¤' },
            { name: 'AIOps Engine', port: 3004, url: 'http://localhost:3004', healthEndpoint: '/health', icon: 'ğŸ¤–', description: 'AI ê¸°ë°˜ ìš´ì˜ ì„œë¹„ìŠ¤' },
            { name: 'Event Delta Analyzer', port: 3005, url: 'http://localhost:3005', healthEndpoint: '/health', icon: 'ğŸ“Š', description: 'ì´ë²¤íŠ¸ ë³€í™” ë¶„ì„ ì„œë¹„ìŠ¤' },
            { name: 'NLP Search', port: 3006, url: 'http://localhost:3006', healthEndpoint: '/health', icon: 'ğŸ”', description: 'ìì—°ì–´ ê²€ìƒ‰ ì„œë¹„ìŠ¤' },
            { name: 'J2EE Monitor', port: 3008, url: 'http://localhost:3008', healthEndpoint: '/health', icon: 'â˜•', description: 'J2EE ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤' },
            { name: 'WAS Monitor', port: 3009, url: 'http://localhost:3009', healthEndpoint: '/health', icon: 'ğŸ—ï¸', description: 'WAS ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤' },
            { name: 'Exception Tracker', port: 3010, url: 'http://localhost:3010', healthEndpoint: '/health', icon: 'ğŸš¨', description: 'ì˜ˆì™¸ ì¶”ì  ì„œë¹„ìŠ¤' },
            { name: 'Alert Notification', port: 3011, url: 'http://localhost:3011', healthEndpoint: '/health', icon: 'ğŸ””', description: 'ì•Œë¦¼ ì„œë¹„ìŠ¤' },
            { name: 'Service Topology', port: 3012, url: 'http://localhost:3012', healthEndpoint: '/health', icon: 'ğŸ—ºï¸', description: 'ì„œë¹„ìŠ¤ í† í´ë¡œì§€' },
        ];

        const databases = [
            { name: 'ClickHouse', port: 8123, url: 'http://localhost:8123', healthEndpoint: '/ping', icon: 'ğŸ ', description: 'ê³ ì„±ëŠ¥ ë¶„ì„ ë°ì´í„°ë² ì´ìŠ¤' },
            { name: 'MongoDB', port: 27017, url: 'mongodb://localhost:27017', icon: 'ğŸƒ', description: 'ë¬¸ì„œí˜• ë°ì´í„°ë² ì´ìŠ¤' },
            { name: 'Redis', port: 6379, url: 'redis://localhost:6379', icon: 'ğŸ”´', description: 'ì¸ë©”ëª¨ë¦¬ ìºì‹œ' },
            { name: 'PostgreSQL', port: 5432, url: 'postgresql://localhost:5432', icon: 'ğŸ˜', description: 'ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤' }
        ];

        let statusChart = null;
        let responseTimeChart = null;
        let serviceStatuses = {};
        let responseTimes = [];

        // ë‹¤í¬ ëª¨ë“œ í† ê¸€
        document.getElementById('darkModeToggle').addEventListener('click', function() {
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('darkMode', document.documentElement.classList.contains('dark'));
        });

        // ë‹¤í¬ ëª¨ë“œ ìƒíƒœ ë³µì›
        if (localStorage.getItem('darkMode') === 'true') {
            document.documentElement.classList.add('dark');
        }

        // ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
        async function checkServiceHealth(service) {
            try {
                const startTime = performance.now();
                const response = await fetch(service.url + service.healthEndpoint, {
                    method: 'GET',
                    timeout: 5000
                });
                const endTime = performance.now();
                const responseTime = Math.round(endTime - startTime);

                if (response.ok) {
                    return { status: 'healthy', responseTime, data: await response.text() };
                } else {
                    return { status: 'unhealthy', responseTime, error: `HTTP ${response.status}` };
                }
            } catch (error) {
                return { status: 'unhealthy', responseTime: 0, error: error.message };
            }
        }

        // ì„œë¹„ìŠ¤ ì¹´ë“œ ìƒì„±
        function createServiceCard(service, status) {
            const statusClass = status.status === 'healthy' ? 'status-healthy' : 
                               status.status === 'unhealthy' ? 'status-unhealthy' : 'status-loading';
            
            const statusIcon = status.status === 'healthy' ? 'âœ…' : 
                              status.status === 'unhealthy' ? 'âŒ' : 'â³';

            return `
                <div class="service-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <span class="text-2xl">${service.icon}</span>
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">${service.name}</h3>
                                <p class="text-sm text-gray-500 dark:text-gray-400">${service.description}</p>
                            </div>
                        </div>
                        <div class="flex flex-col items-end space-y-2">
                            <span class="${statusClass} px-2 py-1 rounded-full text-xs font-medium border">
                                ${statusIcon} ${status.status === 'healthy' ? 'ì •ìƒ' : status.status === 'unhealthy' ? 'ì˜¤ë¥˜' : 'í™•ì¸ì¤‘'}
                            </span>
                            <span class="text-xs text-gray-500 dark:text-gray-400">í¬íŠ¸: ${service.port}</span>
                        </div>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600 dark:text-gray-400">ì‘ë‹µì‹œê°„:</span>
                            <span class="text-sm font-medium text-gray-900 dark:text-white">
                                ${status.responseTime > 0 ? status.responseTime + 'ms' : '-'}
                            </span>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600 dark:text-gray-400">ìƒíƒœ:</span>
                            <span class="text-sm font-medium text-gray-900 dark:text-white">
                                ${status.error || (status.status === 'healthy' ? 'ì •ìƒ ë™ì‘' : 'í™•ì¸ì¤‘')}
                            </span>
                        </div>
                        
                        <div class="flex space-x-2 pt-2">
                            <a href="${service.url}" target="_blank" 
                               class="flex-1 bg-blue-600 hover:bg-blue-700 text-white text-center py-2 px-3 rounded text-sm font-medium">
                                ğŸ”— ì ‘ì†
                            </a>
                            <button onclick="checkSingleService('${service.name}')" 
                                    class="flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 px-3 rounded text-sm font-medium">
                                ğŸ”„ ìƒˆë¡œê³ ì¹¨
                            </button>
                        </div>
                        
                        ${service.name === 'UI Dashboard' ? `
                            <div class="mt-2 pt-2 border-t border-gray-200 dark:border-gray-600">
                                <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">ë¹ ë¥¸ ì ‘ê·¼:</p>
                                <div class="grid grid-cols-2 gap-1 text-xs">
                                    <a href="/j2ee-dashboard.html" target="_blank" class="text-blue-600 hover:text-blue-800">J2EE ëŒ€ì‹œë³´ë“œ</a>
                                    <a href="/was-dashboard.html" target="_blank" class="text-blue-600 hover:text-blue-800">WAS ëŒ€ì‹œë³´ë“œ</a>
                                    <a href="/exception-dashboard.html" target="_blank" class="text-blue-600 hover:text-blue-800">ì˜ˆì™¸ ì¶”ì </a>
                                    <a href="/topology-dashboard.html" target="_blank" class="text-blue-600 hover:text-blue-800">ì„œë¹„ìŠ¤ ë§µ</a>
                                </div>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        // ë°ì´í„°ë² ì´ìŠ¤ ì¹´ë“œ ìƒì„±
        function createDatabaseCard(database, status = { status: 'loading' }) {
            const statusClass = status.status === 'healthy' ? 'status-healthy' : 
                               status.status === 'unhealthy' ? 'status-unhealthy' : 'status-loading';
            
            const statusIcon = status.status === 'healthy' ? 'âœ…' : 
                              status.status === 'unhealthy' ? 'âŒ' : 'â³';

            return `
                <div class="service-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <span class="text-2xl">${database.icon}</span>
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">${database.name}</h3>
                                <p class="text-sm text-gray-500 dark:text-gray-400">${database.description}</p>
                            </div>
                        </div>
                        <span class="${statusClass} px-2 py-1 rounded-full text-xs font-medium border">
                            ${statusIcon} ${status.status === 'healthy' ? 'ì—°ê²°ë¨' : status.status === 'unhealthy' ? 'ì—°ê²° ì‹¤íŒ¨' : 'í™•ì¸ì¤‘'}
                        </span>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600 dark:text-gray-400">í¬íŠ¸:</span>
                            <span class="text-sm font-medium text-gray-900 dark:text-white">${database.port}</span>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600 dark:text-gray-400">ì—°ê²° URL:</span>
                            <span class="text-xs font-mono text-gray-600 dark:text-gray-400 truncate">${database.url}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // ëª¨ë“  ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
        async function checkAllServices() {
            const grid = document.getElementById('servicesGrid');
            const dbGrid = document.getElementById('databaseGrid');
            
            // ë¡œë”© ìƒíƒœ í‘œì‹œ
            grid.innerHTML = services.map(service => createServiceCard(service, { status: 'loading' })).join('');
            dbGrid.innerHTML = databases.map(db => createDatabaseCard(db, { status: 'loading' })).join('');

            let healthyCount = 0;
            let unhealthyCount = 0;
            let totalResponseTime = 0;
            let responseCount = 0;

            // ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
            for (const service of services) {
                try {
                    const status = await checkServiceHealth(service);
                    serviceStatuses[service.name] = status;
                    
                    if (status.status === 'healthy') {
                        healthyCount++;
                    } else {
                        unhealthyCount++;
                    }
                    
                    if (status.responseTime > 0) {
                        totalResponseTime += status.responseTime;
                        responseCount++;
                    }

                    // ê°œë³„ ì¹´ë“œ ì—…ë°ì´íŠ¸
                    const cardIndex = services.indexOf(service);
                    const cards = grid.children;
                    if (cards[cardIndex]) {
                        cards[cardIndex].outerHTML = createServiceCard(service, status);
                    }
                } catch (error) {
                    console.error(`Error checking ${service.name}:`, error);
                    unhealthyCount++;
                }
            }

            // í†µê³„ ì—…ë°ì´íŠ¸
            document.getElementById('healthyCount').textContent = healthyCount;
            document.getElementById('unhealthyCount').textContent = unhealthyCount;
            document.getElementById('avgResponseTime').textContent = responseCount > 0 ? Math.round(totalResponseTime / responseCount) + 'ms' : '-';

            // ì‘ë‹µì‹œê°„ ë°ì´í„° ì—…ë°ì´íŠ¸
            responseTimes.push({
                time: new Date().toLocaleTimeString(),
                value: responseCount > 0 ? Math.round(totalResponseTime / responseCount) : 0
            });

            if (responseTimes.length > 10) {
                responseTimes.shift();
            }

            // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
            updateCharts(healthyCount, unhealthyCount);

            // ì‹œìŠ¤í…œ ìƒíƒœ ì—…ë°ì´íŠ¸
            const systemStatus = document.getElementById('systemStatus');
            if (healthyCount === services.length) {
                systemStatus.innerHTML = `
                    <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                    <span class="text-sm text-gray-600 dark:text-gray-300">ì‹œìŠ¤í…œ ì •ìƒ</span>
                `;
            } else if (unhealthyCount > healthyCount) {
                systemStatus.innerHTML = `
                    <div class="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                    <span class="text-sm text-gray-600 dark:text-gray-300">ì‹œìŠ¤í…œ ì˜¤ë¥˜</span>
                `;
            } else {
                systemStatus.innerHTML = `
                    <div class="w-3 h-3 bg-yellow-500 rounded-full animate-pulse"></div>
                    <span class="text-sm text-gray-600 dark:text-gray-300">ì¼ë¶€ ì˜¤ë¥˜</span>
                `;
            }
        }

        // ê°œë³„ ì„œë¹„ìŠ¤ í™•ì¸
        async function checkSingleService(serviceName) {
            const service = services.find(s => s.name === serviceName);
            if (!service) return;

            const status = await checkServiceHealth(service);
            serviceStatuses[service.name] = status;

            // í•´ë‹¹ ì¹´ë“œë§Œ ì—…ë°ì´íŠ¸
            const cardIndex = services.indexOf(service);
            const cards = document.getElementById('servicesGrid').children;
            if (cards[cardIndex]) {
                cards[cardIndex].outerHTML = createServiceCard(service, status);
            }
        }

        // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
        function updateCharts(healthy, unhealthy) {
            // ìƒíƒœ ë¶„í¬ ì°¨íŠ¸
            if (statusChart) {
                statusChart.data.datasets[0].data = [healthy, unhealthy, services.length - healthy - unhealthy];
                statusChart.update();
            } else {
                const ctx = document.getElementById('statusChart').getContext('2d');
                statusChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['ì •ìƒ', 'ì˜¤ë¥˜', 'í™•ì¸ì¤‘'],
                        datasets: [{
                            data: [healthy, unhealthy, services.length - healthy - unhealthy],
                            backgroundColor: ['#10B981', '#EF4444', '#F59E0B']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }

            // ì‘ë‹µì‹œê°„ ì°¨íŠ¸
            if (responseTimeChart && responseTimes.length > 0) {
                responseTimeChart.data.labels = responseTimes.map(rt => rt.time);
                responseTimeChart.data.datasets[0].data = responseTimes.map(rt => rt.value);
                responseTimeChart.update();
            } else if (responseTimes.length > 0) {
                const ctx = document.getElementById('responseTimeChart').getContext('2d');
                responseTimeChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: responseTimes.map(rt => rt.time),
                        datasets: [{
                            label: 'ì‘ë‹µì‹œê°„ (ms)',
                            data: responseTimes.map(rt => rt.value),
                            borderColor: '#3B82F6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
        }

        // ì „ì²´ ìƒˆë¡œê³ ì¹¨
        function refreshAll() {
            checkAllServices();
        }

        // ìƒíƒœ ë‚´ë³´ë‚´ê¸°
        function exportServiceStatus() {
            const data = {
                timestamp: new Date().toISOString(),
                services: serviceStatuses,
                summary: {
                    total: services.length,
                    healthy: Object.values(serviceStatuses).filter(s => s.status === 'healthy').length,
                    unhealthy: Object.values(serviceStatuses).filter(s => s.status === 'unhealthy').length
                }
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `airis-epm-status-${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // ì´ˆê¸° ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            checkAllServices();
            // 30ì´ˆë§ˆë‹¤ ìë™ ìƒˆë¡œê³ ì¹¨
            setInterval(checkAllServices, 30000);
        });
    </script>
</body>
</html>