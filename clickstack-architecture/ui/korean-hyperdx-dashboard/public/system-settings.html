<!DOCTYPE html>
<html lang="ko" class="h-full bg-gray-50 dark:bg-gray-900">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIRIS EPM - ì‹œìŠ¤í…œ ì„¤ì • ë° í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- shadcn/ui CSS -->
    <style>
        :root {
            --background: 0 0% 100%;
            --foreground: 222.2 84% 4.9%;
            --card: 0 0% 100%;
            --card-foreground: 222.2 84% 4.9%;
            --primary: 221.2 83.2% 53.3%;
            --primary-foreground: 210 40% 98%;
            --secondary: 210 40% 96%;
            --secondary-foreground: 222.2 84% 4.9%;
            --muted: 210 40% 96%;
            --muted-foreground: 215.4 16.3% 46.9%;
            --accent: 210 40% 96%;
            --accent-foreground: 222.2 84% 4.9%;
            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 210 40% 98%;
            --border: 214.3 31.8% 91.4%;
            --input: 214.3 31.8% 91.4%;
            --ring: 221.2 83.2% 53.3%;
            --radius: 0.5rem;
        }
        
        .dark {
            --background: 222.2 84% 4.9%;
            --foreground: 210 40% 98%;
            --card: 222.2 84% 4.9%;
            --card-foreground: 210 40% 98%;
            --primary: 217.2 91.2% 59.8%;
            --primary-foreground: 222.2 84% 4.9%;
            --secondary: 217.2 32.6% 17.5%;
            --secondary-foreground: 210 40% 98%;
            --muted: 217.2 32.6% 17.5%;
            --muted-foreground: 215 20.2% 65.1%;
            --accent: 217.2 32.6% 17.5%;
            --accent-foreground: 210 40% 98%;
            --destructive: 0 62.8% 30.6%;
            --destructive-foreground: 210 40% 98%;
            --border: 217.2 32.6% 17.5%;
            --input: 217.2 32.6% 17.5%;
            --ring: 224.3 76.3% 94.1%;
        }

        .form-input {
            @apply w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent;
        }
        
        .form-label {
            @apply block text-sm font-medium text-foreground mb-2;
        }
        
        .setting-card {
            @apply bg-card border border-border rounded-lg p-6;
        }
        
        .env-var-row {
            @apply flex items-center space-x-4 p-3 border-b border-border;
        }
        
        .status-badge {
            @apply px-2 py-1 rounded-full text-xs font-medium;
        }
        
        .status-active {
            @apply bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200;
        }
        
        .status-inactive {
            @apply bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200;
        }
        
        .status-warning {
            @apply bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200;
        }
    </style>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        border: 'hsl(var(--border))',
                        input: 'hsl(var(--input))',
                        ring: 'hsl(var(--ring))',
                        background: 'hsl(var(--background))',
                        foreground: 'hsl(var(--foreground))',
                        primary: {
                            DEFAULT: 'hsl(var(--primary))',
                            foreground: 'hsl(var(--primary-foreground))'
                        },
                        secondary: {
                            DEFAULT: 'hsl(var(--secondary))',
                            foreground: 'hsl(var(--secondary-foreground))'
                        },
                        card: {
                            DEFAULT: 'hsl(var(--card))',
                            foreground: 'hsl(var(--card-foreground))'
                        },
                        muted: {
                            DEFAULT: 'hsl(var(--muted))',
                            foreground: 'hsl(var(--muted-foreground))'
                        },
                        accent: {
                            DEFAULT: 'hsl(var(--accent))',
                            foreground: 'hsl(var(--accent-foreground))'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="h-full bg-background text-foreground">
    <div class="min-h-full">
        <!-- Navigation -->
        <nav class="bg-card border-b border-border">
            <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
                <div class="flex h-16 items-center justify-between">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <a href="/portal.html" class="text-xl font-bold text-foreground hover:text-primary transition-colors cursor-pointer">
                                ğŸš€ AIRIS EPM
                            </a>
                        </div>
                        <div class="ml-10">
                            <div class="flex items-baseline space-x-4">
                                <a href="/admin-dashboard.html" class="text-muted-foreground hover:text-foreground px-3 py-2 rounded-md text-sm font-medium">
                                    â† ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <button id="themeToggle" class="text-muted-foreground hover:text-foreground p-2">
                            <i class="fas fa-moon dark:hidden"></i>
                            <i class="fas fa-sun hidden dark:inline"></i>
                        </button>
                        <button id="saveAllBtn" class="bg-primary text-primary-foreground px-4 py-2 rounded-md text-sm hover:bg-primary/90">
                            <i class="fas fa-save mr-2"></i>ëª¨ë“  ì„¤ì • ì €ì¥
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
            <!-- Page Header -->
            <div class="px-4 py-4 sm:px-0">
                <div class="flex items-center justify-between">
                    <h1 class="text-3xl font-bold text-foreground">âš™ï¸ ì‹œìŠ¤í…œ ì„¤ì • ë° í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬</h1>
                </div>
            </div>

            <!-- System Configuration -->
            <div class="px-4 py-4 sm:px-0 space-y-8">
                <!-- General Settings -->
                <div class="setting-card">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-semibold text-foreground flex items-center">
                            <i class="fas fa-cogs mr-2 text-blue-600"></i>
                            ì¼ë°˜ ì„¤ì •
                        </h2>
                        <span class="status-badge status-active">í™œì„±</span>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                            <label class="form-label">ì‹œìŠ¤í…œ ì´ë¦„</label>
                            <input type="text" class="form-input" value="AIRIS EPM" id="systemName">
                        </div>
                        <div>
                            <label class="form-label">ì‹œìŠ¤í…œ ë²„ì „</label>
                            <input type="text" class="form-input" value="2.0.1" readonly>
                        </div>
                        <div>
                            <label class="form-label">ê¸°ë³¸ ì–¸ì–´</label>
                            <select class="form-input" id="defaultLanguage">
                                <option value="ko">í•œêµ­ì–´</option>
                                <option value="en">English</option>
                                <option value="ja">æ—¥æœ¬èª</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">ì‹œê°„ëŒ€</label>
                            <select class="form-input" id="timezone">
                                <option value="Asia/Seoul" selected>Asia/Seoul (UTC+9)</option>
                                <option value="UTC">UTC (UTC+0)</option>
                                <option value="America/New_York">America/New_York (UTC-5)</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">ë¡œê·¸ ë ˆë²¨</label>
                            <select class="form-input" id="logLevel">
                                <option value="debug">Debug</option>
                                <option value="info" selected>Info</option>
                                <option value="warn">Warning</option>
                                <option value="error">Error</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ (ë¶„)</label>
                            <input type="number" class="form-input" value="60" id="sessionTimeout" min="5" max="1440">
                        </div>
                    </div>
                </div>

                <!-- Database Configuration -->
                <div class="setting-card">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-semibold text-foreground flex items-center">
                            <i class="fas fa-database mr-2 text-green-600"></i>
                            ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
                        </h2>
                        <div class="flex space-x-2">
                            <span class="status-badge status-active">ì—°ê²°ë¨</span>
                            <button class="text-blue-600 hover:text-blue-800" onclick="testDatabaseConnection()">
                                <i class="fas fa-plug"></i> ì—°ê²° í…ŒìŠ¤íŠ¸
                            </button>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <h3 class="font-medium text-foreground">ClickHouse (ì‹œê³„ì—´ ë°ì´í„°)</h3>
                            <div>
                                <label class="form-label">í˜¸ìŠ¤íŠ¸</label>
                                <input type="text" class="form-input" value="localhost" id="clickhouseHost">
                            </div>
                            <div>
                                <label class="form-label">í¬íŠ¸</label>
                                <input type="number" class="form-input" value="8123" id="clickhousePort">
                            </div>
                            <div>
                                <label class="form-label">ë°ì´í„°ë² ì´ìŠ¤</label>
                                <input type="text" class="form-input" value="airis_epm" id="clickhouseDb">
                            </div>
                        </div>
                        <div class="space-y-4">
                            <h3 class="font-medium text-foreground">PostgreSQL (ê´€ê³„í˜• ë°ì´í„°)</h3>
                            <div>
                                <label class="form-label">í˜¸ìŠ¤íŠ¸</label>
                                <input type="text" class="form-input" value="localhost" id="postgresHost">
                            </div>
                            <div>
                                <label class="form-label">í¬íŠ¸</label>
                                <input type="number" class="form-input" value="5432" id="postgresPort">
                            </div>
                            <div>
                                <label class="form-label">ë°ì´í„°ë² ì´ìŠ¤</label>
                                <input type="text" class="form-input" value="airis_epm" id="postgresDb">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Cache Configuration -->
                <div class="setting-card">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-semibold text-foreground flex items-center">
                            <i class="fas fa-memory mr-2 text-red-600"></i>
                            ìºì‹œ ì„¤ì •
                        </h2>
                        <span class="status-badge status-active">Redis í™œì„±</span>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div>
                            <label class="form-label">Redis í˜¸ìŠ¤íŠ¸</label>
                            <input type="text" class="form-input" value="localhost" id="redisHost">
                        </div>
                        <div>
                            <label class="form-label">Redis í¬íŠ¸</label>
                            <input type="number" class="form-input" value="6379" id="redisPort">
                        </div>
                        <div>
                            <label class="form-label">ìºì‹œ TTL (ì´ˆ)</label>
                            <input type="number" class="form-input" value="300" id="cacheTtl" min="60" max="3600">
                        </div>
                        <div>
                            <label class="form-label">ìµœëŒ€ ë©”ëª¨ë¦¬ (MB)</label>
                            <input type="number" class="form-input" value="512" id="maxMemory" min="128">
                        </div>
                        <div>
                            <label class="form-label">ë§Œë£Œ ì •ì±…</label>
                            <select class="form-input" id="evictionPolicy">
                                <option value="allkeys-lru" selected>allkeys-lru</option>
                                <option value="allkeys-lfu">allkeys-lfu</option>
                                <option value="volatile-lru">volatile-lru</option>
                                <option value="volatile-ttl">volatile-ttl</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Environment Variables -->
                <div class="setting-card">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-semibold text-foreground flex items-center">
                            <i class="fas fa-list-ul mr-2 text-purple-600"></i>
                            í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬
                        </h2>
                        <div class="space-x-2">
                            <button id="addEnvVarBtn" class="bg-primary text-primary-foreground px-3 py-1 rounded text-sm">
                                <i class="fas fa-plus mr-1"></i>ì¶”ê°€
                            </button>
                            <button id="importEnvBtn" class="bg-secondary text-secondary-foreground px-3 py-1 rounded text-sm">
                                <i class="fas fa-upload mr-1"></i>ê°€ì ¸ì˜¤ê¸°
                            </button>
                            <button id="exportEnvBtn" class="bg-secondary text-secondary-foreground px-3 py-1 rounded text-sm">
                                <i class="fas fa-download mr-1"></i>ë‚´ë³´ë‚´ê¸°
                            </button>
                        </div>
                    </div>
                    
                    <!-- Environment Variables Filter -->
                    <div class="mb-4 flex space-x-4">
                        <input type="text" id="envSearchInput" placeholder="í™˜ê²½ ë³€ìˆ˜ ê²€ìƒ‰..." class="form-input w-64">
                        <select id="envCategoryFilter" class="form-input w-48">
                            <option value="">ì „ì²´ ì¹´í…Œê³ ë¦¬</option>
                            <option value="database">ë°ì´í„°ë² ì´ìŠ¤</option>
                            <option value="auth">ì¸ì¦</option>
                            <option value="external">ì™¸ë¶€ ì‹œìŠ¤í…œ</option>
                            <option value="monitoring">ëª¨ë‹ˆí„°ë§</option>
                            <option value="security">ë³´ì•ˆ</option>
                        </select>
                    </div>
                    
                    <!-- Environment Variables List -->
                    <div class="space-y-2" id="envVarsList">
                        <!-- Environment variables will be loaded here -->
                    </div>
                </div>

                <!-- Performance Tuning -->
                <div class="setting-card">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-semibold text-foreground flex items-center">
                            <i class="fas fa-tachometer-alt mr-2 text-orange-600"></i>
                            ì„±ëŠ¥ íŠœë‹
                        </h2>
                        <span class="status-badge status-active">ìµœì í™”ë¨</span>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div>
                            <label class="form-label">ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ ìˆ˜</label>
                            <input type="number" class="form-input" value="4" id="workerProcesses" min="1" max="16">
                        </div>
                        <div>
                            <label class="form-label">ìµœëŒ€ ì—°ê²° ìˆ˜</label>
                            <input type="number" class="form-input" value="1000" id="maxConnections" min="100" max="10000">
                        </div>
                        <div>
                            <label class="form-label">ìš”ì²­ íƒ€ì„ì•„ì›ƒ (ì´ˆ)</label>
                            <input type="number" class="form-input" value="30" id="requestTimeout" min="5" max="300">
                        </div>
                        <div>
                            <label class="form-label">ë©”ëª¨ë¦¬ ì œí•œ (MB)</label>
                            <input type="number" class="form-input" value="2048" id="memoryLimit" min="512">
                        </div>
                        <div>
                            <label class="form-label">ì••ì¶• í™œì„±í™”</label>
                            <select class="form-input" id="compressionEnabled">
                                <option value="true" selected>í™œì„±í™”</option>
                                <option value="false">ë¹„í™œì„±í™”</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">ì••ì¶• ë ˆë²¨</label>
                            <select class="form-input" id="compressionLevel">
                                <option value="1">1 (ë¹ ë¦„)</option>
                                <option value="6" selected>6 (ê· í˜•)</option>
                                <option value="9">9 (ìµœê³  ì••ì¶•)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Security Settings -->
                <div class="setting-card">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-semibold text-foreground flex items-center">
                            <i class="fas fa-shield-alt mr-2 text-teal-600"></i>
                            ë³´ì•ˆ ì„¤ì •
                        </h2>
                        <span class="status-badge status-active">ë³´ì•ˆë¨</span>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                            <label class="form-label">JWT í† í° ë§Œë£Œ ì‹œê°„ (ì‹œê°„)</label>
                            <input type="number" class="form-input" value="24" id="jwtExpiry" min="1" max="168">
                        </div>
                        <div>
                            <label class="form-label">ë¹„ë°€ë²ˆí˜¸ ìµœì†Œ ê¸¸ì´</label>
                            <input type="number" class="form-input" value="8" id="minPasswordLength" min="6" max="32">
                        </div>
                        <div>
                            <label class="form-label">ë¡œê·¸ì¸ ì‹œë„ ì œí•œ</label>
                            <input type="number" class="form-input" value="5" id="maxLoginAttempts" min="3" max="10">
                        </div>
                        <div>
                            <label class="form-label">ê³„ì • ì ê¸ˆ ì‹œê°„ (ë¶„)</label>
                            <input type="number" class="form-input" value="15" id="lockoutDuration" min="5" max="60">
                        </div>
                        <div>
                            <label class="form-label">2FA í•„ìˆ˜ ì—¬ë¶€</label>
                            <select class="form-input" id="require2FA">
                                <option value="false">ì„ íƒì‚¬í•­</option>
                                <option value="admin">ê´€ë¦¬ìë§Œ</option>
                                <option value="true">ëª¨ë“  ì‚¬ìš©ì</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ í™œì„±í™”</label>
                            <select class="form-input" id="ipWhitelistEnabled">
                                <option value="false" selected>ë¹„í™œì„±í™”</option>
                                <option value="true">í™œì„±í™”</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Environment Variable Modal -->
    <div id="addEnvModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-card rounded-lg border border-border p-6 w-full max-w-md">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold text-foreground">í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€</h3>
                <button id="closeAddEnvModal" class="text-muted-foreground hover:text-foreground">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="space-y-4">
                <div>
                    <label class="form-label">ë³€ìˆ˜ëª…</label>
                    <input type="text" id="newEnvKey" class="form-input" placeholder="ENV_VARIABLE_NAME">
                </div>
                <div>
                    <label class="form-label">ê°’</label>
                    <input type="text" id="newEnvValue" class="form-input" placeholder="ê°’ ì…ë ¥">
                </div>
                <div>
                    <label class="form-label">ì¹´í…Œê³ ë¦¬</label>
                    <select id="newEnvCategory" class="form-input">
                        <option value="database">ë°ì´í„°ë² ì´ìŠ¤</option>
                        <option value="auth">ì¸ì¦</option>
                        <option value="external">ì™¸ë¶€ ì‹œìŠ¤í…œ</option>
                        <option value="monitoring">ëª¨ë‹ˆí„°ë§</option>
                        <option value="security">ë³´ì•ˆ</option>
                    </select>
                </div>
                <div>
                    <label class="form-label">ì„¤ëª…</label>
                    <textarea id="newEnvDescription" class="form-input" placeholder="í™˜ê²½ ë³€ìˆ˜ ì„¤ëª…" rows="2"></textarea>
                </div>
                <div class="flex justify-end space-x-4">
                    <button id="cancelAddEnv" class="px-4 py-2 border border-border rounded-md text-sm hover:bg-accent">
                        ì·¨ì†Œ
                    </button>
                    <button id="confirmAddEnv" class="px-4 py-2 bg-primary text-primary-foreground rounded-md text-sm hover:bg-primary/90">
                        ì¶”ê°€
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample environment variables data
        const envVars = [
            { key: 'DATABASE_URL', value: 'postgresql://user:pass@localhost:5432/airis_epm', category: 'database', description: 'PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° URL', sensitive: true },
            { key: 'REDIS_URL', value: 'redis://localhost:6379', category: 'database', description: 'Redis ìºì‹œ ì„œë²„ URL', sensitive: false },
            { key: 'JWT_SECRET', value: 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢', category: 'auth', description: 'JWT í† í° ì„œëª…ì„ ìœ„í•œ ë¹„ë°€í‚¤', sensitive: true },
            { key: 'SLACK_TOKEN', value: 'xoxb-â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢', category: 'external', description: 'Slack ì•Œë¦¼ì„ ìœ„í•œ ë´‡ í† í°', sensitive: true },
            { key: 'MONITORING_PORT', value: '3001', category: 'monitoring', description: 'ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤ í¬íŠ¸', sensitive: false },
            { key: 'LOG_LEVEL', value: 'info', category: 'monitoring', description: 'ë¡œê·¸ ë ˆë²¨ ì„¤ì •', sensitive: false },
            { key: 'ENCRYPTION_KEY', value: 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢', category: 'security', description: 'ë°ì´í„° ì•”í˜¸í™” í‚¤', sensitive: true },
            { key: 'API_RATE_LIMIT', value: '100', category: 'security', description: 'API ìš”ì²­ ì œí•œ (ë¶„ë‹¹)', sensitive: false }
        ];

        // Theme toggle
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;
        const currentTheme = localStorage.getItem('theme') || 'light';
        html.classList.toggle('dark', currentTheme === 'dark');

        themeToggle.addEventListener('click', () => {
            html.classList.toggle('dark');
            const newTheme = html.classList.contains('dark') ? 'dark' : 'light';
            localStorage.setItem('theme', newTheme);
        });

        // Load environment variables
        function loadEnvVars() {
            const container = document.getElementById('envVarsList');
            const searchTerm = document.getElementById('envSearchInput').value.toLowerCase();
            const categoryFilter = document.getElementById('envCategoryFilter').value;
            
            const filteredVars = envVars.filter(env => {
                const matchesSearch = env.key.toLowerCase().includes(searchTerm) || 
                                    env.description.toLowerCase().includes(searchTerm);
                const matchesCategory = !categoryFilter || env.category === categoryFilter;
                return matchesSearch && matchesCategory;
            });

            container.innerHTML = filteredVars.map(env => `
                <div class="env-var-row">
                    <div class="flex-1">
                        <div class="flex items-center space-x-2">
                            <span class="font-medium text-foreground">${env.key}</span>
                            <span class="text-xs px-2 py-1 rounded bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
                                ${env.category}
                            </span>
                            ${env.sensitive ? '<i class="fas fa-lock text-yellow-600" title="ë¯¼ê°í•œ ì •ë³´"></i>' : ''}
                        </div>
                        <p class="text-sm text-muted-foreground">${env.description}</p>
                    </div>
                    <div class="w-64">
                        <input type="${env.sensitive ? 'password' : 'text'}" 
                               class="form-input text-sm" 
                               value="${env.value}"
                               data-key="${env.key}">
                    </div>
                    <div class="flex space-x-2">
                        <button class="text-blue-600 hover:text-blue-800" onclick="editEnvVar('${env.key}')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="text-red-600 hover:text-red-800" onclick="deleteEnvVar('${env.key}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Environment variable search and filter
        document.getElementById('envSearchInput').addEventListener('input', loadEnvVars);
        document.getElementById('envCategoryFilter').addEventListener('change', loadEnvVars);

        // Modal handlers
        document.getElementById('addEnvVarBtn').addEventListener('click', () => {
            document.getElementById('addEnvModal').classList.remove('hidden');
            document.getElementById('addEnvModal').classList.add('flex');
        });

        document.getElementById('closeAddEnvModal').addEventListener('click', closeAddEnvModal);
        document.getElementById('cancelAddEnv').addEventListener('click', closeAddEnvModal);

        function closeAddEnvModal() {
            document.getElementById('addEnvModal').classList.add('hidden');
            document.getElementById('addEnvModal').classList.remove('flex');
            // Clear form
            document.getElementById('newEnvKey').value = '';
            document.getElementById('newEnvValue').value = '';
            document.getElementById('newEnvDescription').value = '';
        }

        document.getElementById('confirmAddEnv').addEventListener('click', () => {
            const key = document.getElementById('newEnvKey').value;
            const value = document.getElementById('newEnvValue').value;
            const category = document.getElementById('newEnvCategory').value;
            const description = document.getElementById('newEnvDescription').value;
            
            if (key && value) {
                // Add to envVars array (simulation)
                envVars.push({
                    key: key,
                    value: value,
                    category: category,
                    description: description || 'ì„¤ëª… ì—†ìŒ',
                    sensitive: false
                });
                
                loadEnvVars();
                closeAddEnvModal();
                showNotification('í™˜ê²½ ë³€ìˆ˜ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            } else {
                showNotification('ë³€ìˆ˜ëª…ê³¼ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
            }
        });

        // Action functions
        function editEnvVar(key) {
            const newValue = prompt(`${key} ë³€ìˆ˜ì˜ ìƒˆ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”:`);
            if (newValue !== null) {
                const envVar = envVars.find(env => env.key === key);
                if (envVar) {
                    envVar.value = newValue;
                    loadEnvVars();
                    showNotification('í™˜ê²½ ë³€ìˆ˜ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                }
            }
        }

        function deleteEnvVar(key) {
            if (confirm(`í™˜ê²½ ë³€ìˆ˜ ${key}ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                const index = envVars.findIndex(env => env.key === key);
                if (index !== -1) {
                    envVars.splice(index, 1);
                    loadEnvVars();
                    showNotification('í™˜ê²½ ë³€ìˆ˜ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                }
            }
        }

        function testDatabaseConnection() {
            showNotification('ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ í…ŒìŠ¤íŠ¸ ì¤‘ì…ë‹ˆë‹¤...', 'info');
            setTimeout(() => {
                showNotification('ëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì´ ì •ìƒì…ë‹ˆë‹¤.', 'success');
            }, 2000);
        }

        // Import/Export functions
        document.getElementById('importEnvBtn').addEventListener('click', () => {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.env,.txt';
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    showNotification('í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ì„ ê°€ì ¸ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...', 'info');
                    setTimeout(() => {
                        showNotification('í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„±ê³µì ìœ¼ë¡œ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.', 'success');
                    }, 1500);
                }
            };
            input.click();
        });

        document.getElementById('exportEnvBtn').addEventListener('click', () => {
            const envContent = envVars.map(env => `${env.key}=${env.value}`).join('\n');
            const blob = new Blob([envContent], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'airis-epm-env-vars.env';
            a.click();
            window.URL.revokeObjectURL(url);
            showNotification('í™˜ê²½ ë³€ìˆ˜ë¥¼ ë‚´ë³´ëƒˆìŠµë‹ˆë‹¤.', 'success');
        });

        // Save all settings
        document.getElementById('saveAllBtn').addEventListener('click', () => {
            const btn = document.getElementById('saveAllBtn');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>ì €ì¥ ì¤‘...';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.innerHTML = '<i class="fas fa-save mr-2"></i>ëª¨ë“  ì„¤ì • ì €ì¥';
                btn.disabled = false;
                showNotification('ëª¨ë“  ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            }, 2000);
        });

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 ${
                type === 'success' ? 'bg-green-500 text-white' :
                type === 'error' ? 'bg-red-500 text-white' :
                'bg-blue-500 text-white'
            }`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'exclamation-triangle' : 'info'} mr-2"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Initialize
        loadEnvVars();
    </script>
</body>
</html>