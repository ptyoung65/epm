# AIRIS-MON 물리 서버 요구사항 분석

## 📊 시스템 리소스 요구사항 총계

### 🧮 **리소스 집계 분석**

#### **Stateful 서비스 (데이터베이스)**
| 서비스 | 리플리카 | CPU Request | CPU Limit | Memory Request | Memory Limit | Storage |
|--------|----------|-------------|-----------|----------------|--------------|---------|
| ClickHouse | 3 | 2 × 3 = 6 | 8 × 3 = 24 | 4Gi × 3 = 12Gi | 16Gi × 3 = 48Gi | 100Gi × 3 = 300Gi |
| Kafka | 3 | 1 × 3 = 3 | 4 × 3 = 12 | 2Gi × 3 = 6Gi | 8Gi × 3 = 24Gi | 50Gi × 3 = 150Gi |
| Zookeeper | 3 | 0.5 × 3 = 1.5 | 2 × 3 = 6 | 1Gi × 3 = 3Gi | 4Gi × 3 = 12Gi | 10Gi × 3 = 30Gi |
| Redis | 1 | 0.2 | 1 | 0.5Gi | 2Gi | 5Gi |
| **소계** | **10** | **10.7** | **43** | **21.5Gi** | **86Gi** | **485Gi** |

#### **Stateless 서비스 (애플리케이션)**
| 서비스 | 리플리카 | CPU Request | CPU Limit | Memory Request | Memory Limit |
|--------|----------|-------------|-----------|----------------|--------------|
| API Gateway | 3 | 0.5 × 3 = 1.5 | 2 × 3 = 6 | 0.5Gi × 3 = 1.5Gi | 2Gi × 3 = 6Gi |
| Data Ingestion | 2 | 0.3 × 2 = 0.6 | 1 × 2 = 2 | 0.25Gi × 2 = 0.5Gi | 1Gi × 2 = 2Gi |
| Analytics Engine | 2 | 0.5 × 2 = 1 | 2 × 2 = 4 | 0.5Gi × 2 = 1Gi | 2Gi × 2 = 4Gi |
| Session Replay | 2 | 0.2 × 2 = 0.4 | 1 × 2 = 2 | 0.25Gi × 2 = 0.5Gi | 1Gi × 2 = 2Gi |
| AIOps | 1 | 1 | 4 | 1Gi | 4Gi |
| Event Delta Analyzer | 2 | 0.3 × 2 = 0.6 | 1 × 2 = 2 | 0.25Gi × 2 = 0.5Gi | 1Gi × 2 = 2Gi |
| NLP Search | 2 | 0.3 × 2 = 0.6 | 1 × 2 = 2 | 0.5Gi × 2 = 1Gi | 2Gi × 2 = 4Gi |
| UI | 2 | 0.1 × 2 = 0.2 | 0.5 × 2 = 1 | 0.125Gi × 2 = 0.25Gi | 0.5Gi × 2 = 1Gi |
| Test Suite | 1 | 0.2 | 1 | 0.25Gi | 1Gi |
| **소계** | **17** | **5.4** | **25** | **5.75Gi** | **26Gi** |

#### **시스템 오버헤드**
| 구성요소 | CPU | Memory | Storage |
|---------|-----|--------|---------|
| Kubernetes 시스템 | 2 | 4Gi | 50Gi |
| 네트워킹 (CNI) | 1 | 2Gi | 10Gi |
| 모니터링 (Prometheus/Grafana) | 2 | 8Gi | 100Gi |
| 로깅 (Fluentd) | 1 | 2Gi | 50Gi |
| 백업 및 기타 | 1 | 2Gi | 100Gi |
| **소계** | **7** | **18Gi** | **310Gi** |

### 🎯 **전체 시스템 요구사항**

| 구분 | CPU Request | CPU Limit | Memory Request | Memory Limit | Storage |
|------|-------------|-----------|----------------|--------------|---------|
| **Stateful** | 10.7 | 43 | 21.5Gi | 86Gi | 485Gi |
| **Stateless** | 5.4 | 25 | 5.75Gi | 26Gi | - |
| **시스템** | 7 | 7 | 18Gi | 18Gi | 310Gi |
| **총합** | **23.1** | **75** | **45.25Gi** | **130Gi** | **795Gi** |

## 🖥️ 환경별 서버 요구사항

### 🛠️ **개발 환경**
**목표**: 로컬 개발 및 테스트

| 서버 사양 | 수량 | CPU | Memory | Storage | 역할 |
|----------|------|-----|--------|---------|------|
| **워크스테이션** | 1 | 16 Core | 32GB | 1TB SSD | 개발, Docker Compose |

**추정 비용**: 워크스테이션 1대 (300-500만원)

### 🧪 **테스트 환경**
**목표**: QA 테스트 및 통합 테스트

#### **옵션 1: 물리 서버 구성**
| 서버 사양 | 수량 | CPU | Memory | Storage | 역할 |
|----------|------|-----|--------|---------|------|
| **마스터 노드** | 3 | 4 Core | 8GB | 200GB SSD | K8s Control Plane |
| **워커 노드** | 3 | 8 Core | 32GB | 500GB SSD | 애플리케이션 실행 |

**총 서버**: **6대**
**추정 비용**: 2,400-3,600만원

#### **옵션 2: 클라우드 (권장)**
| 인스턴스 타입 | 수량 | vCPU | Memory | Storage | 월 비용(AWS) |
|--------------|------|------|--------|---------|-------------|
| **t3.medium** | 3 | 2 | 4GB | 20GB | $75 |
| **t3.large** | 3 | 2 | 8GB | 100GB | $150 |
| **r5.xlarge** | 2 | 4 | 32GB | 200GB | $500 |

**총 월 비용**: **$725 (약 95만원)**

### 🏭 **운영 환경**
**목표**: 24/7 서비스 운영, 고가용성

#### **물리 서버 구성 (권장)**

##### **최소 구성 (3개 노드)**
| 서버 사양 | 수량 | CPU | Memory | Storage | 역할 |
|----------|------|-----|--------|---------|------|
| **Dell PowerEdge R7525** | 3 | 32 Core (AMD EPYC) | 128GB DDR4 | 2TB NVMe + 4TB HDD | Multi-Master K8s |

**장점**: 
- 고가용성 보장 (3개 노드 분산)
- 단일 장애점 제거
- 비용 효율적

**총 서버**: **3대**
**추정 비용**: 9,000-12,000만원

##### **권장 구성 (5개 노드)**
| 서버 사양 | 수량 | CPU | Memory | Storage | 역할 |
|----------|------|-----|--------|---------|------|
| **마스터 노드** | 3 | 16 Core | 64GB | 1TB NVMe | K8s Control Plane |
| **데이터 노드** | 2 | 32 Core | 256GB | 4TB NVMe + 8TB HDD | Stateful 서비스 전용 |

**장점**:
- 완전한 역할 분리
- 최적의 성능
- 확장성 우수

**총 서버**: **5대**
**추정 비용**: 15,000-20,000만원

##### **엔터프라이즈 구성 (7개 노드)**
| 서버 사양 | 수량 | CPU | Memory | Storage | 역할 |
|----------|------|-----|--------|---------|------|
| **마스터 노드** | 3 | 16 Core | 64GB | 1TB NVMe | K8s Control Plane |
| **데이터 노드** | 2 | 64 Core | 512GB | 8TB NVMe + 16TB HDD | Database 전용 |
| **앱 노드** | 2 | 32 Core | 128GB | 2TB NVMe | 애플리케이션 전용 |

**총 서버**: **7대**
**추정 비용**: 25,000-35,000만원

## 💰 비용 분석 및 권장사항

### 📊 **총 소유 비용 (3년 기준)**

#### **물리 서버 vs 클라우드**
| 구분 | 물리 서버 (5노드) | AWS 클라우드 | Azure 클라우드 |
|------|------------------|-------------|---------------|
| **초기 비용** | 1.5억원 | 0원 | 0원 |
| **월 운영비** | 200만원 | 800만원 | 750만원 |
| **3년 총 비용** | 2.22억원 | 2.88억원 | 2.7억원 |
| **5년 총 비용** | 2.7억원 | 4.8억원 | 4.5억원 |

### 🎯 **권장 시나리오별 구성**

#### **🚀 스타트업/중소기업 (예산 제한)**
```
개발: 워크스테이션 1대 (500만원)
테스트: 클라우드 t3.large 3대 (월 150만원)
운영: 클라우드 r5.xlarge 5대 (월 800만원)

총 초기비용: 500만원
월 운영비: 950만원
```

#### **💼 중견기업 (성능 중시)**
```
개발: 워크스테이션 2대 (1,000만원)
테스트: 물리서버 6대 (3,000만원)
운영: 물리서버 5대 (1.5억원)

총 초기비용: 1.84억원
월 운영비: 300만원 (전력, 네트워크)
```

#### **🏢 대기업/엔터프라이즈 (안정성 최우선)**
```
개발: 고사양 워크스테이션 5대 (2,500만원)
테스트: 물리서버 6대 (3,500만원)
운영: 물리서버 7대 (3억원)
DR: 물리서버 3대 (1.5억원)

총 초기비용: 5.35억원
월 운영비: 500만원
```

## 🛠️ 구체적인 서버 사양 권장

### **권장 서버 스펙 (운영환경)**

#### **Option A: Dell PowerEdge R7525 (추천)**
```
CPU: AMD EPYC 7443 24-Core (2.85GHz)
Memory: 128GB DDR4-3200 ECC
Storage: 2TB NVMe SSD + 4TB SATA HDD
Network: Dual 25Gb Ethernet
RAID: Hardware RAID 1+0
PSU: Redundant 800W
가격: 약 3,000-4,000만원
```

#### **Option B: HPE ProLiant DL385 Gen10**
```
CPU: AMD EPYC 7352 24-Core (2.3GHz)
Memory: 128GB DDR4-3200 ECC
Storage: 1.6TB NVMe SSD + 8TB SATA HDD
Network: Dual 10Gb Ethernet
RAID: Smart Array P408i-a
PSU: Redundant 800W
가격: 약 2,800-3,500만원
```

### **네트워크 인프라**

#### **필수 네트워크 장비**
```
Core Switch: 48포트 25Gb + 4포트 100Gb (1,500만원)
ToR Switch: 24포트 10Gb (500만원)
Firewall: FortiGate 400F (800만원)
Load Balancer: F5 Big-IP VE (1,000만원)
```

## 🎯 **최종 권장사항**

### **💡 권장 구성: 하이브리드 접근법**

#### **Phase 1: 빠른 시작 (0-6개월)**
- **개발**: 워크스테이션 2대
- **테스트**: AWS EKS (월 200만원)
- **운영**: AWS EKS (월 800만원)
- **총 비용**: 초기 1,000만원 + 월 1,000만원

#### **Phase 2: 안정화 (6-18개월)**
- **개발**: 기존 유지
- **테스트**: 물리서버 3대 도입 (3,000만원)
- **운영**: 클라우드 유지
- **총 비용**: 추가 3,000만원 + 월 운영비 감소

#### **Phase 3: 완전 On-Premise (18개월+)**
- **운영**: 물리서버 5대 도입 (1.5억원)
- **월 운영비**: 클라우드 대비 70% 절감
- **ROI**: 24개월 후 손익분기점

### **🚨 주의사항**

1. **전력 인프라**: 200V 전용선, UPS 필수
2. **네트워크**: 최소 100Mbps 전용선
3. **공조 시설**: 서버실 온도 18-24도 유지
4. **보안**: 물리적 접근 제어, 화재 감지
5. **백업**: 오프사이트 백업 스토리지

## 📞 **즉시 시작 가능한 최소 구성**

### **🎯 MVP 구성 (당장 시작 가능)**
```
서버: Dell PowerEdge R7525 × 3대
비용: 9,000만원
기간: 주문 후 2주 내 구축 가능
성능: 중간 규모 트래픽 처리 가능 (DAU 10만명)
```

**이 구성으로 시작하여 트래픽 증가에 따라 점진적 확장을 권장합니다!**